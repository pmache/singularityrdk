var codeplex;(function(a){(function(b){var a=function(){function a(){}a.SCROLL_BAR_WIDTH=18;return a}();b.Constants=a})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));var codeplex;(function(a){(function(b){var a=function(){function a(){}a.OPTIONS_CLASS_NAME="options";a._OPTIONS_ID_DATA_NAME="options-id";a._OPTIONS_DATA="_options_data";a._contentChangeCallbacks=[];a.registerContentChange=function(b){a._contentChangeCallbacks.push(b)};a.prototype.triggerContentChange=function(){a._triggerContentChange()};a._triggerContentChange=function(){for(var b=0;b<a._contentChangeCallbacks.length;b++)a._contentChangeCallbacks[b]()};a.getOptions=function(d){var b,f,c,e;c=d.data(a._OPTIONS_DATA);if(c===undefined){b=d.children("script."+a.OPTIONS_CLASS_NAME+":first");if(b.length===0){e=d.data(a._OPTIONS_ID_DATA_NAME);if(e!=undefined)b=$("#"+e)}if(b.length!=0){f=b.eq(0).html();c=$.parseJSON(f);d.data(a._OPTIONS_DATA,c);b.remove()}}return c};return a}();b.BaseEnhancement=a})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){$(document).ajaxSuccess(function(c,b,a){a&&!a.noContentChange&&window.setTimeout(function(){codeplex.ui.BaseEnhancement._triggerContentChange()},0)});codeplex.ui.BaseEnhancement._triggerContentChange();$.fn.checkContent=function(){codeplex.ui.BaseEnhancement._triggerContentChange()}});var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={};this.justPopped=false;this.forcedSync=false}a.prototype.queryUIElements=function(){this.header=$(".floating_header",this.element);this.splitView=$("#splitView",this.element);this.directoryView=$("#DirectoryView",this.element);this.rightPane=$("#rightPane",this.element);this.leftPane=$("#leftPane",this.element);this.footer=$("#footer",this.element);this.fileView=$(".FileView",this.element);this.fileList=$(".FileList",this.element);this.fileListView=$(".FileListView",this.element);this.fileContentView=$("#FileContentView",this.element)};a.prototype._attachFloatingScrollbar=function(){this.element.floatingScrollbar({attachedScrollSelector:this.attachedScrollSelector,attachedContentSelector:this.attachedContentSelector,attachedHeightSelector:this.attachedHeightSelector,extraLeftOffset:this.extraLeftOffsetForScrollbar,extraBottomOffset:this.extraBottomOffsetForScrollbar})};a.prototype._handleSplitterMove=function(a){if(a){$(window).bind("mousemove.diff",this,function(a){a.data._syncView()});$(window).bind("mouseup.diff",this,function(a){a.data._handleSplitterMove(false)})}else{$(window).unbind("mousemove.diff");$(window).unbind("mouseup.diff")}};a.prototype._enableTheSplitter=function(){if(!this.options.syncEnabled)return;$(".vsplitbar").length<1&&this.splitView.splitter({minRight:550,sizeLeft:true,resizeToWidth:true,cookie:"sourceCodeBrowserSplitter",cookiePath:"/"})};a.prototype._showLoading=function(){CodePlex.UpdateProgress.show()};a.prototype._hideLoading=function(){CodePlex.UpdateProgress.hide()};a.prototype._isSplitViewShorterThanWindow=function(){var c=$(".FileView",this.element),a=Math.max(this.directoryView.offset().top,0),b=$(window).height()-a-this.footer.height()-38;return c.height()<=b};a.prototype._syncShortFileView=function(){var a=Math.max(this.directoryView.offset().top,0),b=$(window).height()-a-this.footer.height()-38,c=Math.max(b,$("#FileContentView").height());this._sizeCodeViewContainers(c)};a.prototype._syncLongFileView=function(){var a=$(".FileView",this.element),b=$("#FileViewContainer"),k=a.length>0?Math.max(a.offset().top,0)+a.height():0,g=Math.max(this.directoryView.offset().top,0),j=this.directoryView.css("position")=="fixed",i=j?parseInt(this.directoryView.css("top")):g-$(window).scrollTop(),m=b.length>0?b.width():0,c=m>a.width(),d=Math.max($(window).scrollTop()+$(window).height()-k,0),e=$(window).height()-d-i-(c?0:16)+(!c&&d==0?16:0),f=$("#DiffHeader").length>0&&$("#DiffHeader").css("position")!="fixed",h=f?12:0,l=Math.max(e,a.height())+h;this._sizeCodeViewContainers(l);this.directoryView.height(e)};a.prototype._sizeCodeViewContainers=function(a){$("#sourceBrowserContainer").css("height",a-25);$(".vsplitbar").height(a);$(this.splitView).height(a);this.fileList.height(a);this.directoryView.height(a);this.directoryView.css("width",this.leftPane.width());this.directoryView.scrollLeft(0)};a.prototype._syncView=function(){var b=$("#FileViewContainer").length==0&&!$("#beginInstructions").is(":visible"),a=!$(".no_results_message").is(":visible");if(!this.options.syncEnabled||b&&a)return;else if(this._isSplitViewShorterThanWindow())this._syncShortFileView();else this._syncLongFileView();$(this.splitView).trigger("resize");this.element.floatingScrollbar("syncView");this.forcedSync=true;$(document).floatingViewport("syncView")};a.prototype._enableTheFloatingViewport=function(){var a=this;$(document).floatingViewport({splitter:$(".vsplitbar",a.element),selectorForHeaderOffset:this.theSelectorForHeaderOffset,floatingElements:[{element:a.fileListView,getWidth:function(){return a.fileList.width()}},{element:$("#FileInfoHeading",a.element),height:$("#FileInfoHeading",a.element).height(),getWidth:function(){return $(".FileView",a.element).outerWidth()}}],repaint:function(){if(a.forcedSync){a.forcedSync=false;return}a._syncView()}})};return a}(a.BaseEnhancement);a.CodeBrowser=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(b){var a=function(b){__extends(a,b);function a(){b.apply(this,arguments)}a.latency=100;a.prototype._setup=function(b,a){$(this).bind("scroll.scroll-events-"+a,b);return true};a.prototype._teardown=function(a){$(this).unbind("scroll.scroll-events-"+a);return true};a.prototype.setup=function(){throw"Derived classes must implement the setup method.";};a.prototype.teardown=function(){throw"Derived classes must implement the teardown method.";};return a}(b.BaseEnhancement);b.ScrollEvent=a;var c=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.prototype.setup=function(){var d=this,b=null;return c.prototype._setup.call(this,function(e){var c=arguments;if(b)clearTimeout(b);else{e.type="scrollstart";$.event.handle.apply(d,c)}b=setTimeout(function(){b=null},a.latency)},"scroll-start")};b.prototype.teardown=function(){return c.prototype._teardown.call(this,"scroll-start")};return b}(a);b.ScrollStartEvent=c;var d=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.prototype.setup=function(){var d=this,b=null;return c.prototype._setup.call(this,function(e){var c=arguments;b&&clearTimeout(b);b=setTimeout(function(){b=null;e.type="scrollstop";$.event.handle.apply(d,c)},a.latency)},"scroll-stop")};b.prototype.teardown=function(){return c.prototype._teardown.call(this,"scroll-stop")};return b}(a);b.ScrollStopEvent=d})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.event.special.scrollstart=new codeplex.ui.ScrollStartEvent;$.event.special.scrollstop=new codeplex.ui.ScrollStopEvent;(function(a){var b={tagType:"Project"};a.fn.autocomplete=function(c){c=$.extend({},b,c);return this.each(function(){new a.autocomplete(this,c)})};a.autocomplete=function(b,c){this.options=c;this.input=a(b);this.results=a('<div style="position:absolute;z-index:100;display:none;width:205px;"></div>').addClass("AutoCompletePanel").hide();this.isVisible=false;this.selectedIndex=-1;this.data=[];this.init()};a.autocomplete.fn=a.autocomplete.prototype={};a.autocomplete.fn.extend=a.autocomplete.extend=a.extend;a.autocomplete.fn.extend({init:function(){var b=this;this.input.bind("keyup",function(a){b.handleKeyUp(a)}).bind("keydown",function(a){b.handleKeyDown(a)}).bind("keypress",function(a){b.handleKeyPress(a)}).bind("blur",function(a){b.handleBlur(a)});a(window).bind("resize",function(){b.reposition()});this.results.appendTo("body")},handleKeyUp:function(a){if(!a)a=window.event;switch(a.keyCode){case 38:this.handleUpArrowKey();return;case 40:this.handleDownArrowKey();return;case 13:return}if(a.keyCode==9||this.input.val().length==0)this.reset();else{var b=this;$.ajax({type:"POST",url:"/Services/TaggingService.asmx/GetTagAutoCompleteInfo",data:JSON.stringify({prefixText:"'"+this.input.val().replace("'","\\'")+"'",count:"10",tagType:"'"+this.options.tagType+"'"}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){b.dataCallback(a.d,b)}})}},handleKeyDown:function(a){if(!a)a=window.event;switch(a.keyCode){case 9:if(this.selectedIndex!=-1){this.handleTabKey();return false}case 13:if(this.isVisible&&this.selectedIndex>-1){this.handleEnterKey();this.preventFurtherAction(a)}}return true},handleKeyPress:function(a){if(!a)a=window.event;if(a.keyCode==13&&this.isVisible)return this.preventFurtherAction(a)},handleUpArrowKey:function(){if(this.selectedIndex>0)this.selectedIndex--;this.updateSelectedStyles()},handleDownArrowKey:function(){if(this.selectedIndex<this.results.children().length-1)this.selectedIndex++;this.updateSelectedStyles()},handleTabKey:function(){this.selectedIndex!=-1&&this.input.val(this.data[this.selectedIndex].TagName);this.input.focus();this.reset()},handleBlur:function(a){this.reset()},handleEnterKey:function(){this.selectTag(a.browser.mozilla)},handleMouseOver:function(c){var b=a(c.target);if(!b.hasClass("Row"))b=b.parent();c.data.selectedIndex=b.attr("index");c.data.updateSelectedStyles()},handleMouseDown:function(c){var b=a(c.target);if(!b.hasClass("Row"))b=b.parent();c.data.selectTag(false)},reset:function(){this.data=[];this.selectedIndex=-1;this.results.hide();this.isVisible=false},dataCallback:function(b,a){a.data=b?b:[];if(a.data.length>0){a.dataBind();a.reposition();a.results.show();a.isVisible=true}else a.reset()},dataBind:function(){this.results.empty();if(this.data.length>0)for(var b=0;b<this.data.length;b++){var d=this.data[b],c=d.Popularity;c+=c>1?" usages":" usage";var e=this._bindMouseEvents(a("<div></div>").addClass("Row").attr("index",b).appendTo(this.results)),f=this._bindMouseEvents(a("<div></div>").text(c).css("float","right").appendTo(e)),g=this._bindMouseEvents(a("<span></span>").text(d.TagName).appendTo(e))}},_bindMouseEvents:function(b){var a=this;return b.bind("mouseover",a,a.handleMouseOver).bind("mousedown",a,a.handleMouseDown)},selectTag:function(b){if(this.data==null)return;var a=this.data[this.selectedIndex];if(a){this.input.val(a.TagName);!b&&this.reset();this.input.focus()}},updateSelectedStyles:function(){var a=this;this.results.children().each(function(){if($(this).attr("index")==a.selectedIndex)$(this).addClass("Selected");else $(this).removeClass("Selected")})},preventFurtherAction:function(b){var a=b.rawEvent?b.rawEvent:b;a.preventDefault&&a.preventDefault();a.stopPropagation&&a.stopPropagation();this.reset();return false},encodeHTML:function(c,b){var a=document.createElement("div");a.appendChild(document.createTextNode(c));return(b?a.innerHTML.split('"').join("&quot;"):a.innerHTML).split(" ").join("&nbsp;")},reposition:function(){var a=this.input.offset();this.results.css("left",a.left).css("top",a.top+this.input.outerHeight())}})})(jQuery);(function(a){a.cookie=function(c,b,d){if(b===undefined)return getCookie(c);else{var e=new Date((new Date).setDate(d.expires)),f=document.domain.substring(document.domain.indexOf("."));setCookie(c,b,e,d.path,f)}return a}})(jQuery);var canvasBounced,fixWidthElementList=[];function $goToLinkHref(b){var a=$("#"+b);if(a.length>0)location.href=a.attr("href")}function $getQuerystring(b,a){if(a==null)a="";b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=new RegExp("[\\?&]"+b+"=([^&#]*)","i"),c=d.exec(window.location.href);if(c==null)return a;else return c[1]}function $setControlFocus(a){if(a){a.scrollIntoView();a.focus()}}function $keyCode(a){var b=0;if(!a)a=window.event;if(a.keyCode)b=a.keyCode;else if(a.which)b=a.which;else if(a.charCode)b=a.charCode;return b}function $isFormValid(a){var b=true;if(a==undefined||a)b=MvcValidation_Validate();return b}function $submitForm(a,c){var b=$isFormValid(c);if(b&&a){$("#"+a).val("true");$("#"+a)[0].form.submit()}else if(b)return true;return false}function $submitFormElement(b,a){$isFormValid(a)&&b.form.submit();return false}function $submitKeyPress(a,b){if($keyCode(b)==13)return $submitForm(a)}function $submitKeyPressElement(a,b){if($keyCode(b)==13)return $submitFormElement(a)}function addFixWidthElement(a){a&&fixWidthElementList.push(a)}function masterLoad(){if(!self.logoImageLoaded)document.body.className+=" NoImages";else logoImageLoaded=null;CodePlex.UpdateProgress.initialize("UpdateProgressPanel");canvasBounced=false;typeof SmartDate_Load=="function"&&SmartDate_Load();if(window.onbeforeunload_suppressed)window.onbeforeunload=window.onbeforeunload_suppressed;fixWikiContentWidth();fixWidthElementList=[]}function canvasBounce(){if(!canvasBounced){CodePlex.UI.bounceFullHeightElement($("#Canvas").get(0));canvasBounced=true}}function fixWidth(e,b){if(!b&&!CodePlex.UI.isIE)return;var f={html:1,body:1,form:1,tbody:!b,table:!b,td:!b},d=$("#CanvasContent").get(0),a=e||d;while(a&&a.tagName){if(!f[a.tagName.toLowerCase()]&&a.scrollWidth>(a.clientWidth||a.offsetWidth))if(CodePlex.UI.isIE7){var c=a.scrollWidth;if(a.className=="CanvasIEWidthFix")c=c-7;if(c>(a.clientWidth||a.offsetWidth))a.style.width=c+"px"}else a.style.width=a.scrollWidth+"px";a=a.parentNode}if(!e){if(CodePlex.UI.isOpera)if(document.body.offsetHeight>d.scrollHeight)d.style.height=document.body.offsetHeight+"px";CodePlex.UpdateProgress.reset()}}function fixWikiContentWidth(){if(CodePlex.UI.isIE){for(i=0;i<fixWidthElementList.length;i++)fixWidth(fixWidthElementList[i],true);fixWidth(null,true)}else{for(i=0;i<fixWidthElementList.length;i++)if(CodePlex.UI.isFF3)fixWidthElementList[i].style.width=fixWidthElementList[i].scrollWidth-17+"px";else fixWidthElementList[i].style.width=fixWidthElementList[i].scrollWidth+"px";fixWidthElementList.length>0&&canvasBounce()}}function getResizeHandler(b){var a=0;return function(){a&&clearTimeout(a);a=setTimeout(fixWidth,1)}}function EnterKeyFormSubmitHandler(c,a,b){if(a.keyCode==13){a.returnValue=false;a.Cancel=true;document.getElementById(getFullIdForControl(c,b)).click()}}function getElementByClass(a,b){var c=a.length;for(i=0;i<c;i++)if(a[i].className==b)return a[i];return null}function expandAndCollapseDivs(h,b,d,c){var a=document.all?document.all:document.getElementsByTagName("*"),i=getElementByClass(a,h),f=getCookie(b);if(f=="expanded"){var g=getElementByClass(a,d);displayContentDisplay(g,"collapseButton",b)}else{var e=getElementByClass(a,c);hideContentDisplay(e,"expandButton",b)}}function displayAllContentInlineDisplay(k,j,m,l,n,o){for(var b=document.getElementsByTagName("div"),c=document.getElementsByTagName("img"),e=[],d=[],g=[],f=[],a=0;a<b.length;a++)if(b[a].className==k)e.push(b[a]);else b[a].className==j&&d.push(b[a]);for(var a=0;a<c.length;a++)if(c[a].className==m)g.push(c[a]);else c[a].className==l&&f.push(c[a]);for(var a=0;a<e.length;a++)e[a].style.display="inline";for(var a=0;a<d.length;a++)d[a].style.display="none";for(var a=0;a<g.length;a++)g[a].style.display="inline";for(var a=0;a<f.length;a++)f[a].style.display="none";var h=document.getElementById(n);if(h)h.style.display="inline";var i=document.getElementById(o);if(i)i.style.display="none"}function getFullIdForControl(a,b){var c=a.id.substring(0,a.id.lastIndexOf("_")+1)+b;return c}function displayContentDisplay(a,d,b){var e=document.getElementById(getFullIdForControl(a,b)),c=document.getElementById(getFullIdForControl(a,d));a.style.display="none";c.style.display="inline";e.style.display="block";setCookie(b,"expanded")}function hideContentDisplay(a,d,b){var e=document.getElementById(getFullIdForControl(a,b)),c=document.getElementById(getFullIdForControl(a,d));a.style.display="none";c.style.display="inline";e.style.display="none";setCookie(b,"collapsed")}function displayContentInlineDisplay(a,d,g,f){var e=document.getElementById(getFullIdForControl(a,g)),c=document.getElementById(getFullIdForControl(a,f)),b=document.getElementById(getFullIdForControl(a,d));a.style.display="none";b.style.display="inline";e.style.display="inline";c.style.display="none"}function setCookie(f,e,a,c,b,d){document.cookie=f+"="+escape(e)+(a?"; expires="+a.toGMTString():"")+(c?"; path="+c:"")+(b?"; domain="+b:"")+(d?"; secure":"")}function getCookie(a){var b=document.cookie.indexOf(a+"="),d=b+a.length+1;if(!b&&a!=document.cookie.substring(0,a.length))return null;if(b==-1)return null;var c=document.cookie.indexOf(";",d);if(c==-1)c=document.cookie.length;return unescape(document.cookie.substring(d,c))}function deleteCookie(b,c,a){if(getCookie(b))document.cookie=b+"="+(c?"; path="+c:"")+(a?"; domain="+a:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}function getChildNodes(a,g,c,e,f){var d=[];if(a&&a.childNodes)for(var b=0;b<a.childNodes.length;b++){if(a.childNodes[b].nodeType!=1)continue;if((!g||a.childNodes[b].tagName.toLowerCase()==g.toLowerCase())&&(!c||!f&&a.childNodes[b][c]==e||f&&a.childNodes[b][c]&&a.childNodes[b][c].indexOf(e)>-1))d[d.length]=a.childNodes[b];else d=d.concat(getChildNodes(a.childNodes[b],g,c,e,f))}return d}function getParentNode(g,e,b,c,d){var f=null,a=g.parentNode;while(a){if((!e||a.tagName.toLowerCase()==e.toLowerCase())&&(!b||!d&&a[b]==c||d&&a[b]&&a[b].indexOf(c)>-1)){f=a;break}a=a.parentNode}return f}function createNode(c,a,d){var b=document.createElement(d?d:"div");if(a)for(var e in a)b[e]=a[e];c&&c.appendChild(b);return b}var CodePlex={};CodePlex.UI=new function(){this.isIE=document.documentElement.className.indexOf("IE")>-1;this.isIE6=document.documentElement.className.indexOf("IE6")>-1;this.isIE7=document.documentElement.className.indexOf("IE7")>-1;this.isFF=document.documentElement.className.indexOf("FF")>-1;this.isFF3=document.documentElement.className.indexOf("FF3")>-1;this.isSafari=document.documentElement.className.indexOf("Safari")>-1;this.isOpera=document.documentElement.className.indexOf("Opera")>-1;this.Browser=document.documentElement.className.replace(/IE /,"");this.Point=function(a,b){this.x=a;this.y=b};this.getElementPosition=function(a){var b=0,c=0;while(a.offsetParent){b+=a.offsetLeft;c+=a.offsetTop;a=a.offsetParent}b+=a.offsetLeft;c+=a.offsetTop;return new CodePlex.UI.Point(b,c)};this.focus=function(a){if(!a)return false;try{a.focus();return true}catch(b){return false}};var b=null;this.encodeHtml=function(c,a){if(!b)b=document.createElement("div");b.innerHTML="";b.appendChild(document.createTextNode(c));return(a?b.innerHTML.split('"').join("&quot;"):b.innerHTML).split(" ").join("&nbsp;")};var a=0;this.bounceElement=function(b,c){if(!b)return;var d=b.style.width;b.style.width=d!="auto"?"auto":"100%";a&&clearTimeout(a);a=setTimeout(function(){b.style.width=d;typeof c=="function"&&c()},1)};this.bounceFullHeightElement=function(b,c){if(!b)return;b.style.height="99.9%";a&&clearTimeout(a);a=setTimeout(function(){b.style.height="100%";typeof c=="function"&&c()},1)}};function createDelegate(a,b){return function(){b.apply(a)}}if(typeof originalRegularExpressionValidatorEvaluateIsValid=="undefined"&&typeof RegularExpressionValidatorEvaluateIsValid=="function"){originalRegularExpressionValidatorEvaluateIsValid=RegularExpressionValidatorEvaluateIsValid;RegularExpressionValidatorEvaluateIsValid=function(a){if(a.invalidinIEifonlywhitespace)if(a.invalidinIEifonlywhitespace=="true"){var b=ValidatorGetValue(a.controltovalidate);if(b.replace(/\s*/g,"").length==0&&b.length>0)return false;return originalRegularExpressionValidatorEvaluateIsValid(a)}return originalRegularExpressionValidatorEvaluateIsValid(a)}}function suppressUnsavedData(){window.onbeforeunload_suppressed=window.onbeforeunload;window.onbeforeunload=null}function allowUnsavedDataAlert(){if(window.onbeforeunload_suppressed&&!window.onbeforeunload)window.onbeforeunload=window.onbeforeunload_suppressed}function disableUnsavedData(){window.onbeforeunload=null;window.onbeforeunload_suppressed=null}function setupUnsavedData(){$("input, textarea, select").each(function(c,b){var a=$(b);if(a.data("suppress")===true)return;a.change(appendUnsavedDataPrompt)});$("a.YesNoSelect").click(appendUnsavedDataPrompt)}function appendUnsavedDataPrompt(){if(window.onbeforeunload===null)window.onbeforeunload=function(){return"You are navigating away from this page. Your changes will be lost."}}function OpenDialog(a,e,h,i,d,g,b,c){if($(a)&&!e){$(a).dialog("close");return}if(!c)c=true;try{$(a).dialog("destroy")}catch(j){}$(a).dialog({autoOpen:false,open:g,close:b,dialogClass:i,width:h,modal:c,close:function(a,b){$("body").css("overflow-y",f)}});var f=$("body").css("overflow-y");$(a).click(function(c){if($(c.target).is('a.close, input[type="button"]')){$(a).dialog("close");b&&b()}});if($(a)&&e){if(d)$(a).parent().appendTo(d);else $(a).parent().appendTo("form:last");$("body").css("overflow-y","hidden");$(a).dialog("open").show().focus();$("div.ui-widget-overlay.loading").removeClass("loading")}}function OpenDialogNonModal(d,f,e,g,c,b,a){OpenDialog(d,f,e,g,c,b,a,false)}function GetHashValue(a,d){var b=null;if(path.match("#")){var c=path.split("#")[1];a=a.toLowerCase();if(!d)a+="=";if(c.toLowerCase().indexOf(a)>=0)if(!d)b=c.split("=")[1];else b=c}return b}function HashValueExist(a,b){if(location.hash!=""){var c=location.hash.substr(1);a=a.toLowerCase();if(b!=undefined&&!b)a+="=";if(c.toLowerCase().indexOf(a)>=0)return true;else return false}}function BindButtonHover(c,b,a){$("#"+c).bind("mouseover",function(){$(this).attr("src",b)}).bind("mouseout",function(){$(this).attr("src",a)})}function $breakWords(a,d){if(a.length<=d)return $encodeIt(a);var e="",c=0;eval("var regex = /([^\\s]{"+d+"})(?=[^\\s])/g");var b=regex.exec(a);while(b!=null){if(b.index-c>0)e+=$encodeIt(a.substr(c,b.index-c));e+=$encodeIt(b[0])+"<wbr></wbr>";c=b.index+d;b=regex.exec(a)}return e+$encodeIt(a.substr(c))}function $encodeIt(a){$("#sampleEncode").length==0&&$("body").append('<div id="sampleEncode" style="display:none;"></div>');return $("#sampleEncode").text(a).html()}function $normalizeText(a){a=$.trim(a);if(a.indexOf("\r")>-1){if(a.indexOf("\r\n")>-1)a=a.split("\r\n").join("\n");if(a.indexOf("\r")>-1)a=a.split("\r").join("\n")}return a}function $replaceNewLines(a){return a.replace(/\r?\n/g,"<br />")}function logError(b){var c=codeplex.ui.UrlGenerator.errorReportingUrl(),a=$("html").attr("class");$.ajax({url:c,type:"POST",data:{msg:b,browserInfo:a,url:location.href},noContentChange:true})}function $loadScript(b,a){$(function(){var d=document.getElementsByTagName("head")[0]||document.documentElement,c,e=false;function f(){if(!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){e=true;$.isFunction(a)&&a();c.onload=c.onreadystatechange=null;d&&c.parentNode&&d.removeChild(c)}}c=document.createElement("script");c.src=b;c.onload=c.onreadystatechange=f;d.insertBefore(c,d.firstChild)})}function getInt(b){var a=parseInt(b);if(isNaN(a))return 0;return a}String.prototype.startsWith=function(a){return this.substring(0,a.length)===a};function resizeProjectTabs(){var c=$("#page_box_links"),a=$("li",c);if(a.length==8)return;var b=0;a.each(function(){b+=$(this).width()});var d=(c.width()-b)/a.length;a.each(function(){var a=$(this);a.css({width:parseInt(a.width()-17+d)+"px"})})}function $createFileLoadError(b,a){return'<div class="no_results_message no_results_padding">We encountered a problem loading &quot;'+$encodeIt(b)+'&quot;. If you continuously encounter this issue, please <a href="'+a+'">contact us</a>.</div>'}(function(a){a.fn.applyLastClassToList=function(b){if(b==null||b.length==0)return a("li:last",this).addClass("last");else return a("li."+b+":last",this).addClass("last")}})(jQuery);$.fn.scrollTo=function(){var a=this.offset().top,d=CodePlex.UI.isSafari?document.body.scrollTop:$("html,body")[0].scrollTop,b=d+document.body.clientHeight,c=this.outerHeight();if(a+c>b&&c<b)window.scrollBy(0,a+this.outerHeight()-b);else a<d&&$("html,body").animate({scrollTop:a},"fast");return this};$(function(){masterLoad();resizeProjectTabs();jQuery.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase())});function showSummaryValidator(a,b){for(i=0;i<Page_Validators.length;i++)if(Page_Validators[i].validationGroup==a.validationGroup&&Page_Validators[i].id!=a.id){ValidatorValidate(Page_Validators[i]);if(Page_Validators[i].isvalid==false){b.IsValid=false;break}}};var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.apply(this,arguments);this.updatingText=false}b._defaults={limit:150,counterId:"charCounter",showCounter:true,autoEnlarge:false,isShowErrorMsg:false,maxAutoEnlarge:0,defaultButtonID:"",overflowMsg:"",showUnsavedDataAlert:true,text:""};b.prototype._init=function(){var c=a.BaseEnhancement.getOptions(this.element);this.options=$.extend({},b._defaults,c,this.options);this.options.limit=Math.max(this.options.limit,0);this.textArea=this.element;this.multiline=$(this.element).is("textarea");this.defaultButton=$("#"+this.options.defaultButtonId);this.textArea.text=this.options.text;if(this.options.showUnsavedDataAlert)if(this.options.hiddenFieldValue=="true"){$(window).bind("onbeforeunload",function(){return"You are navigating away from the page you were editing; Your changes may be lost."});$("#"+this.options.hiddenFieldId).val("true")}this.errorMsg=$("<div>").css("clear","both").addClass("ErrorMessage").hide();this.textArea.after(this.errorMsg);this.initTextArea()};b.prototype.initTextArea=function(){this.textArea.bind("keydown",this,this.onKeyDown).bind("keyup",this,this.onKeyUp).bind("keypress",this,this.onKeyPress).bind("change",this,this.onChange).bind("enlarge",this,this.onEnlarge);this.populateTextArea()};b.prototype.populateTextArea=function(){if(!this.textArea)return;this.textArea.attr("disabled",false);!$.browser.mozilla&&this.textArea.css("display","block")};b.prototype.autoEnlargeTextBox=function(a,b){var c=5;if(a&&a.rows)if(document.all){while(a.scrollHeight>a.clientHeight&&this.isLessThanMaxRows(b))a.rows+=c;a.scrollTop=0}else{var d=this.countLineBreaks(a.value),e=a.getAttribute("wrap");if(d>parseInt(a.rows))while(d>parseInt(a.rows)&&this.isLessThanMaxRows(b))a.rows+=c;else if(e.toLowerCase()=="soft"||e.toLowerCase()=="hard")while(parseInt(a.rows)*parseInt(a.cols)<=a.value.length&&this.isLessThanMaxRows(b))a.rows+=c}};b.prototype.updateCounter=function(a,b){if(!this.options.showCounter)return;if(!this.options.limit)return this.setCounter(a.length,b);return this.setCounter(a.length<this.options.limit?this.options.limit-a.length:0,b)};b.prototype.setCounter=function(b,d){var a=$("#"+this.options.counterId),c=a.html();if(!a.length)return;if(d&&c-b<10)return;a.html(b)};b.prototype.countLineBreaks=function(a){return a.split("\n").length-1};b.prototype.isLessThanMaxRows=function(a){if(!a)return true;return parseInt(this.textArea.get(0).rows)<a};b.prototype.isLessThanLimit=function(b){if(!this.options.limit)return true;var a=this.textArea.val();return a.length<this.options.limit||(b||this.normalize(a).length)<this.options.limit};b.prototype.isGreaterThanLimit=function(b){if(!this.options.limit)return false;var a=this.textArea.val();return a.length>this.options.limit&&(b||this.normalize(a).length>this.options.limit)};b.prototype.normalize=function(a){return $normalizeText(a)};b.prototype.getSelection=function(){var a=this.textArea.get(0);if(typeof a.createTextRange!="undefined"){var b=document.selection&&document.activeElement==a?document.selection.createRange():null;return b?b.text:""}if(typeof a.selectionStart!="undefined")return this.textArea.val().substring(a.selectionStart,a.selectionEnd);return""};b.prototype.textAreaChanged=function(){if(!this.textArea||this.updatingText)return;var a=this.normalize(this.textArea.val());this.isLessThanLimit(a)&&$(this.errorMsg).hide();if(this.isGreaterThanLimit(a)){this.showLimitExceedMsg();a=a.substring(0,this.options.limit||Infinity);this.updatingText=true;try{this.textArea.val(a)}finally{this.updatingText=false}}this.updateCounter(a);this.options.autoEnlarge&&this.autoEnlargeTextBox(this.textArea);this.textArea.trigger("textChangedComplete")};b.prototype.showLimitExceedMsg=function(){this.options.isShowErrorMsg&&this._showErrorMessage(this.options.overflowMsg)};b.prototype._showErrorMessage=function(a){this.errorMsg.html("").text(a).show()};b.prototype.cancelEvent=function(a){a&&a.preventDefault&&a.preventDefault();a&&a.stopPropagation&&a.stopPropagation();return false};b.prototype.onKeyDown=function(a){a.data.updateCounter(a.data.normalize(a.data.textArea.value),1);if(a.data.showUnsavedDataAlert){$("#"+a.data.options.hiddenFieldId).val("true");window.onbeforeunload=function(){return"You are navigating away from the page you were editing; Your changes may be lost."}}};b.prototype.onKeyUp=function(a){a.data.keyTimer&&clearTimeout(a.data.keyTimer);a.data.keyTimer=setTimeout(function(){a.data.onChange(a)},250);$(a.data.textArea).trigger("textChanged")};b.prototype.onKeyPress=function(a){var b=false;if(a.data.multiline)b=!a.data.onKeyPress_MultiLine(a);else b=!a.data.onKeyPress_SingleLine(a);if(b){a.data.showLimitExceedMsg();return a.data.cancelEvent(a)}};b.prototype.onKeyPress_SingleLine=function(a){var b=a.keyCode;if(b==13&&a.data.defaultButton){a.data.click();return false}return true};b.prototype.onKeyPress_MultiLine=function(a){var b=a.keyCode;$.browser.mozilla&&b==13&&a&&a.stopPropagation&&a.stopPropagation();if(!a.data.options.limit)return true;if(a.ctrlKey||a.shiftKey||a.altKey)return true;var c={8:true,34:true,33:true,35:true,36:true,37:true,38:true,39:true,40:true,46:true};if(c[b])return true;if(a.data.getSelection().length)return true;return a.data.isLessThanLimit()};b.prototype.onChange=function(a){a.data.textAreaChanged()};b.prototype.onEnlarge=function(b,a){b.data.enlarge(a)};return b}(a.BaseEnhancement);a.EnhancedTextBox=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedTextBox",new codeplex.ui.EnhancedTextBox);$.fn.selectEntireSelectedLine=function(){var b=this[0],a,g,e,h,i,d,c,f;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){d=b.value;c=document.selection.createRange();f=c.length;g=a=this.getCursorPosition();e=this.getCursorPosition()+c.text.length;while(a-->0&&b.value.charAt(a-1)!="\r")c.moveStart("character",-1);a=e;while(a++<d.length&&b.value.charAt(a)!="\n")c.moveEnd("character",1);c.select()}else{a=b.selectionStart;while(a>0&&b.value.charAt(a-1)!="\n")a=a-1;b.selectionStart=a;a=b.selectionEnd;while(a<b.value.length&&b.value.charAt(a)!="\n")a=a+1;b.selectionEnd=a}this.focus()};$.fn.seekCursorToStartOfLine=function(){var b=this[0],a,e,c,d;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){e=b.value;c=document.selection.createRange();d=c.length;a=this.getCursorPosition();while(a>0&&b.value.charAt(a-1)!="\n")a=a-1;c.collapse(true);c.moveStart("character",-1*a);c.moveEnd("character",-1*a+d);c.select()}else{a=b.selectionStart;while(a>0&&b.value.charAt(a-1)!="\n")a=a-1;b.selectionStart=b.selectionEnd=a}this.focus()};$.fn.seekCursorToEndOfLine=function(){var b=this[0],a,e,c,d;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){e=b.value;c=document.selection.createRange();d=c.length;a=this.getCursorPosition();while(a<e.length&&b.value.charAt(a)!="\n")a=a+1;c.collapse(true);c.moveStart("character",a+d);c.moveEnd("character",a);c.select()}else{a=b.selectionStart;while(a<b.value.length&&b.value.charAt(a+1)!="\n")a=a+1;b.selectionStart=b.selectionEnd=a}this.focus()};$.fn.getCursorPosition=function(){var b=this[0],a;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){a=document.selection.createRange();var c=a.duplicate();c.moveToElementText(b);c.setEndPoint("EndToEnd",a);return c.text.length-a.text.length}else return b.selectionStart};$.fn.insertTextAtStartOfEachLine=function(d){var a=this[0],c,e,b,f,g;this.focus();if(typeof a.selectionStart!="number"||typeof a.selectionEnd!="number"){this.selectEntireSelectedLine();e=document.selection.createRange();g=this.getCursorPosition();c=d+e.text.replace(/\n/g,"\n"+d);e.text=c;this.highlightText(g+c.length,g+c.length)}else{this.selectEntireSelectedLine();b=a.selectionStart;f=a.selectionEnd;while(b>0&&a.value.charAt(b-1)!="\n")b=b-1;c=d+a.value.substring(b,f).replace(/\n/g,"\n"+d);a.value=a.value.substring(0,b)+c+a.value.substring(f,a.value.length);a.selectionStart=a.selectionEnd=b+c.length}this.focus()};$.fn.insertTextAtLineStart=function(c){var a=this[0],f,e,b,d;this.focus();if(typeof a.selectionStart!="number"||typeof a.selectionEnd!="number"){f=a.value;e=document.selection.createRange();b=this.getCursorPosition();while(b>0&&a.value.charAt(b-1)!="\n")b=b-1;a.value=a.value.substring(0,b)+c+a.value.substring(b,a.value.length)}else{b=a.selectionStart;d=a.selectionEnd;while(b>=0&&a.value.charAt(b-1)!="\n")b=b-1;a.value=a.value.substring(0,b)+c+a.value.substring(b,a.value.length);a.selectionStart=a.selectionEnd=d+c.length}this.focus()};$.fn.highlightText=function(c,d){var b=this[0],e,a;this.focus();if(typeof b.selectionStart!="number"||typeof b.selectionEnd!="number"){e=this.getCursorPosition();a=b.createTextRange();a.collapse(true);a.moveEnd("character",d);a.moveStart("character",c);a.select()}else{b.selectionStart=c;b.selectionEnd=d}this.focus()};$.fn.insertTextAtCaret=function(f,g,h,i){if(typeof i==="undefined")i=true;var a,j,c,l,n,m,k,b,e,d=this[0];this.focus();if(!h)h="";if(typeof d.selectionStart!="number"||typeof d.selectionEnd!="number"){a=document.selection.createRange();c=a.text.length;if(i){if(a.text[0]==" "){f=" "+f;a=a.substring(1,c);c--}if(a.text[c-1]==" "){g=g+" ";a=a.substring(0,c-1);c--}}if(c==0){a.text=f+h+g;if(h.length==0){b=e=this.getCursorPosition()-g.length;this.highlightText(b,e)}else{e=this.getCursorPosition()-g.length;b=e-h.length;this.highlightText(b,e)}}else{a.text=f+a.text+g;b=this.getCursorPosition()+f.length;e=b+f.length+c-1;this.highlightText(b,e)}this.focus();return e}else{b=d.selectionStart;e=d.selectionEnd;k=d.scrollTop;a=d.value.substring(b,e);c=a.length;if(i){if(a[0]==" "){f=" "+f;a=a.substring(1,c)}if(a[c-1]==" "){g=g+" ";a=a.substring(0,c-1)}}if(b==e)j=h;else j=a;d.value=d.value.substring(0,b)+f+j+g+d.value.substring(e,d.value.length);this.highlightText(b+f.length,b+f.length+j.length);d.scrollTop=k;this.focus();return d.selectionEnd}};CodePlexPaging=new function(){var a,c,b;this.initialize=function(b,a){this._parameterCallbackMethod=b;this._useIndex0=a===undefined?false:a};this.gotoPage=function(c,b){var a=this._getParameters().replace(/(?:\?|&)?page=\d+/g,""),d=this._getQuerystringSeparator(a);CodePlex.UpdateProgress.displayForPaging();if(b>0||this._useIndex0)location.href=c+a+d+"page="+b;else location.href=c+a};this.loadPage=function(a,d,c){var b=this._getParameters(),e=this._getQuerystringSeparator(b);CodePlex.UpdateProgress.displayForPaging();if(c>0||this._useIndex0)a=a+b+e+"page="+c;else a=a+b;$("#"+d).load(a,null,function(){CodePlex.UpdateProgress.hide()})};this.gotoPageSize=function(d,c){var a=this._getParameters().replace(/(?:\?|&)?(?:page|size)=\d+/g,""),b=this._getQuerystringSeparator(a);CodePlex.UpdateProgress.displayForPaging();location.href=d+a+b+"size="+c};this._getParameters=function(){this._parameters="";if(this._parameterCallbackMethod!=null)eval("this._parameters = "+this._parameterCallbackMethod+"();");return this._parameters};this._getQuerystringSeparator=function(b){var a="?";if(b.length>0)a="&";return a}};MultiFileUpload=function(b,a){this._namePrefix=b;this._iconPathFormat=a};MultiFileUpload.prototype={render:function(a){this.baseContainer=a;var b=document.createElement("tr");this._renderToTableRow(a.appendChild(b),this._namePrefix)},_renderToTableRow:function(b,a){var d=b.insertCell(0),e=b.insertCell(1),c=b.insertCell(2);this._renderFilenameTemplate(d,a);var f=this._renderLocationTemplate(c,a),g=this._renderRecommendedTemplate(c,a);this._renderTypeTemplate(e,a);$(f).change(function(){$("#IsClickOnce:checked").length==0&&$(g).css("display","inline")})},_renderRecommendedTemplate:function(d,c){var b=$('<a href="#" onclick="return MultiFileUpload.toggleMarkNewAsRecommended(this);" class="RecommendedLink" style="display: none;">Mark as Recommended</a>');b[0].id=b[0].name=c+"_MarkAsRecommended";var a=document.createElement("input");a.id=a.name=c+"_Recommended";a.setAttribute("type","hidden");a.className="RecommendedValue";a.setAttribute("value","false");d.appendChild(b[0]);d.appendChild(a);return b},_renderFilenameTemplate:function(c,b){var a=document.createElement("input");a.setAttribute("type","text");a.id=a.name=b+"_Filename";a.className="MutiFileHeight";a.maxLength=80;c.appendChild(a)},_renderLocationTemplate:function(f,a){var b=$('<input type="file" />');b.attr("id",a+"_Location");b.attr("name",a+"_Location");if(CodePlex.UI.isIE){$(f).append(b);return b}var d=$('<input type="text" readonly="readonly" />');d.attr("id",a+"_Location_text");d.attr("name",a+"_Location_text");d.bind("click",function(){$("#"+a+"_Location").click()});b.bind("change",function(){$("#"+a+"_Location_text").val($(this).val())});var e=$('<div style="height:0;width:0;overflow:hidden;"></div>');e.append(b);var c=$('<input type="button" class="ok" value="browse..." />');c.attr("id",a+"_Location_button");c.attr("name",a+"_Location_button");c.bind("click",function(){$("#"+a+"_Location").click()});var g=$('<div class="file_input"></div>').append(d).append(e).append(c).append($('<div class="clear"></div>'));$(f).append(g);return b},_renderTypeTemplate:function(c,b){var a=this.typeSelect=document.createElement("select");a.multiple=false;a.id=a.name=b+"_Type";a.className="MultiFileHeight";a.onchange=createDelegate(this,this._renderTypeIconTemplate);this._renderTypeItem(a,"Application (Runtime Binary)","RuntimeBinary");this._renderTypeItem(a,"Source Code","SourceCode");this._renderTypeItem(a,"Documentation","Documentation");this._renderTypeItem(a,"Example","Example");c.appendChild(a)},_renderTypeItem:function(b,d,c){var a=document.createElement("option");a.text=d;a.value=c;b.options.add(a)}};MultiFileUpload._fileCount=1;MultiFileUpload.getFileCount=function(){return MultiFileUpload._fileCount};MultiFileUpload.getNextNamePrefix=function(a){return a+"_"+MultiFileUpload.getFileCount()};MultiFileUpload.addFileToTable=function(b,d,c){var a;if(b)a=$("#"+b)[0];if(a){if(a.tBodies&&a.tBodies.length)a=a.tBodies[0];MultiFileUpload._fileCount++;var e=new MultiFileUpload(d,c);e.render(a)}};MultiFileUpload.init=function(){$("#MultiFileUpload_0_Location").change(function(){$("#IsClickOnce:checked").length==0&&$("#MultiFileUpload_0_MarkAsRecommended").css("display","inline")});if(this.noUploadedFiles()){$(".RecommendedLink").html("Remove as Default");$(".RecommendedValue").val("true")}$("#IsClickOnce").click(function(){if($("#IsClickOnce:checked").length>0){$(".RecommendedValue").val("false");$(".RecommendedLink").text("Mark as Recommended").hide();$(".markAsRecommendedContainer").hide().children("a").text("Mark as Recommended");$(".currentRecommendedContainer").hide();$("#MarkedAsRecommended").val("")}else if($("#CurrentRecommendedFile").length===1){$(".markAsRecommendedContainer").show();$("#MarkedAsRecommended").val($("#CurrentRecommendedFile").val());var a=$(".markAsRecommendedContainer[fileId='"+$("#CurrentRecommendedFile").val()+"']");a.parents("div.FileListItemDiv").children(".currentRecommendedContainer").css("display","inline").attr("d:isCurrent","true");a.children("a").html("Remove as Default")}else $('.file_input input[type="text"]').each(function(c,b){var a=$(b);if(c==1&&$(".FileListItemDiv").length<2){a.parent().parent().children(".RecommendedValue").val("true");a.parent().parent().children(".RecommendedLink").text("Remove as Default")}a.val().length>1&&a.parent().parent().children(".RecommendedLink").css("display","inline")})})};MultiFileUpload.noUploadedFiles=function(){return $(".FileListItemDiv").length+$("#IsClickOnce:checked").length<1};MultiFileUpload.markFileForDeletion=function(e,b,d){var a=$(e).parents("div.FileListItemDiv");if(a.hasClass("FileListItemDeleted"))return false;a.attr("d:EditMode")==="true"&&this.toggleUploadVersionState(a.find("a.Replace"),b,d);var c=$("#MarkedForDeletion");if(c.val().indexOf(b)<0){c.val(c.val().replace(/,$/,"")+b);a.addClass("FileListItemDeleted")}return false};MultiFileUpload.toggleMarkAsRecommended=function(d){var a=$(d),c=a.parents("div.FileListItemDiv").children(".currentRecommendedContainer").attr("d:isCurrent");this.setAllFilesNotRecommended();if(c=="true"){$("#MarkedAsRecommended").val("");$("#CurrentRecommendedFile").val("")}else{a.parents("div.FileListItemDiv").children(".currentRecommendedContainer").css("display","inline").attr("d:isCurrent","true");a.html("Remove as Default");var b=a.parents().attr("fileId");$("#MarkedAsRecommended").val(b);$("#CurrentRecommendedFile").val(b)}return false};MultiFileUpload.setAllFilesNotRecommended=function(){$(".markAsRecommendedContainer").children("a").html("Mark as Recommended");$(".currentRecommendedContainer").css("display","none").attr("d:isCurrent","false");var a=$(".RecommendedValue");$(".RecommendedLink").html("Mark as Recommended");$(".RecommendedValue").val("false")};MultiFileUpload.toggleMarkNewAsRecommended=function(d){var b=$(d),a=b.parent().children(".RecommendedValue"),c=a.val();this.setAllFilesNotRecommended();if(c!=="true"){b.html("Remove as Default");a.val("true");$("#MarkedAsRecommended").val("")}return false};MultiFileUpload.toggleUploadVersionState=function(k,t,s){var b=$(k).parents("div.FileListItemDiv");if(b.hasClass("FileListItemDeleted"))return false;var y=b.attr("id").match(/.+(\d+)/),j=y[1],m="#editItemInfo"+j,q=b.attr("d:EditMode"),p=b.children("img.FileTypeImage"),h=b.children("a.FileNameLink"),f=b.children("span.currentRecommendedContainer"),g=b.find("span.FileListItemInfo"),l=$("#markAsRecommended"+j),o=$("#delete"+j);if(q===undefined||q==="false"){$(k).text("Cancel");p.hide();h.hide();f.hide();g.hide();l.hide();o.hide();var a=h.attr("id");$(m).addClass("linkPosition");var w=$('<input type="hidden" name="'+a+'_Type" value="'+s+'" class="dynamic" />'),x=$('<input type="hidden" name="'+a+'_ID" value="'+t+'" class="dynamic" />'),r=$('<div class="MultiFileUpload dynamic" />'),u=$('<table border="0" cellpadding="0" cellspacing="0" style="float:left;"><tr><th>Name</th><th>Location</th></tr></table>').appendTo(r),v=$("<input type='text' maxlength='80' />").attr("id",a+"_Filename").attr("name",a+"_Filename"),e=$('<input type="text" readonly="readonly" />');e.attr("id",a+"_Location_text");e.attr("name",a+"_Location_text");e.bind("click",function(){$("#"+a+"_Location").click()});var c=$('<input type="file" />');c.attr("id",a+"_Location");c.attr("name",a+"_Location");var i;if(!CodePlex.UI.isIE){c.bind("change",function(){$("#"+a+"_Location_text").val($(this).val())});var n=$('<div style="height:0;width:0;overflow:hidden;"></div>');n.append(c);var d=$('<input type="button" class="ok" value="browse..." />');d.attr("id",a+"_Location_button");d.attr("name",a+"_Location_button");d.bind("click",function(){$("#"+a+"_Location").click()});i=$('<div class="file_input"></div>').append(e).append(n).append(d).append($('<div class="clear"></div>'))}else i=c;$("<tr />").append($("<td />").append(v)).append($("<td />").append(i)).appendTo(u);g.parent().prepend(r).prepend(x).prepend(w);b.attr("d:EditMode","true")}else{$(k).text("Replace");$(b).find(".dynamic").remove();p.show();h.show();l.show();o.show();$(m).removeClass("linkPosition");f.attr("d:isCurrent")==="true"&&f.show();g.show();b.attr("d:EditMode","false")}return false};(function(a){a.fn.promptBox=function(b){return this.each(function(){new a.promptBox(this,b)})};a.promptBox=function(b,a){this.textBox=b;this.watermarkText=a;this.init()};a.promptBox.fn=a.promptBox.prototype={};a.promptBox.fn.extend=a.promptBox.extend=a.extend;a.promptBox.fn.extend({init:function(){this.css="EmptyTextBox";this.initTextBox();this.registerEvents()},initTextBox:function(){$(this.textBox).addClass(this.css);$(this.textBox).val(this.watermarkText)},focusHandler:function(a){!a.data.dirty&&$(a.data.textBox).val("");$(a.data.textBox).removeClass(a.data.css)},blurHandler:function(a){var b=$(a.data.textBox).val();a.data.dirty=b.length>0&&b!=a.data.watermarkText;$(a.data.textBox).attr("dirty",a.data.dirty);!a.data.dirty&&a.data.initTextBox()},submitHandler:function(a){$keyCode(a)==13&&!a.data.dirty&&$(a.data.textBox).val("")},keyHandler:function(a){switch(a.keyCode){case 13:a.data.blurHandler(a);break;case 27:$(a.data.textBox).val("");$(a.data.textBox).blur();break}},registerEvents:function(){$(this.textBox).bind("focus",this,this.focusHandler).bind("blur",this,this.blurHandler).bind("keydown",this,this.keyHandler).bind("keypress",this,this.submitHandler)}})})(jQuery);function TimezoneCookieExists(){var b=false,c=new Date,a=getCookie("TimezoneOffset");if(a!=null&&a==c.getTimezoneOffset()/60*-1&&!firstTimeSetTimezoneCookie)b=true;return b}function SmartDate_Load(){if(TimezoneCookieExists())return;for(var f=document.getElementsByTagName("abbr"),d=new Array(f.length),a=0;a<f.length;a++)d[a]=f[a].parentNode;for(var a=0;a<d.length;a++){for(var c=d[a].className.split(" "),k=false,b=0;b<c.length;b++)if(c[b]=="smartDate"){k=true;break}if(k){for(var i=false,e=false,j=false,l=false,b=0;b<c.length;b++){if(c[b]=="full"){i=true;break}if(c[b]=="dateOnly"){e=true;break}if(c[b]=="timeOnly"){j=true;break}if(c[b]=="dateOnlyNoShort"){e=true;l=true}}var m=parseInt(d[a].attributes.LocalTimeTicks.value);if(m!=Number.NaN){var h=false,g=false;if(d[a].getAttribute("BreakDateTime"))h=true;if(d[a].getAttribute("BreakAfterAtDateTime"))g=true;d[a].innerHTML=SmartDate_FormatTimestamp(m,i,e,j,l,h,g)}}}var f=null,d=null}function SmartDate_FormatTimestamp(k,b,h,i,j,g,f){var e=new Date(k*1e3),d=SmartDate_FormatTime(e,b),c=SmartDate_FormatDate(e,b,j),a="";if(c.length>0)a=c;if(h)return a;if(i)a="";if(d.length>0){if(a.length>0){if(g)a+="<br />";a+=" at ";if(f)a+="<br />"}a+=d}return a}function SmartDate_FormatTime(b,e){var a=b.getHours(),d=b.getMinutes(),c=a<12?"AM":"PM";if(a==0&&d==0&&b.getSeconds()==0&&b.getMilliseconds()==0)return"";if(a>12)a=a-12;if(a==0)a=12;return a+":"+SmartDate_ZeroPadNumber(b.getMinutes(),2)+" "+c}function SmartDate_FormatDate(f,j,k){var e=f.getFullYear(),d=f.getMonth(),b=f.getDate(),i=f.getDay(),h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(j)return h[i]+" "+g[d]+" "+b+" "+e;else{var a=new Date,c="";if(!k){if(a.getFullYear()==e&&a.getMonth()==d&&a.getDate()==b)c="Today";else if(a.getFullYear()==e&&a.getMonth()==d&&(a.getDate()>b&&a.getDate()-6<b||b>a.getDate()&&b-6<a.getDate()))c=h[i];else if(a.getFullYear()==e)c=g[d]+" "+b;else c=g[d]+" "+b+" "+e;return c}c=g[d]+" "+b+" "+e;return c}}function SmartDate_ZeroPadNumber(d,c){for(var a=""+d+"",b=0;b<c-a.length;b++)a="0"+a;return a}function SmartDate_AjaxLoad(){var a=$object("_PageRequestManager");a.propertyChanged.add(SmartDate_RequestManagerPropertyChanged)}function SmartDate_RequestManagerPropertyChanged(a,b){b.get_propertyName()=="inPostBack"&&!a.get_inPostBack()&&SmartDate_Load()};var UpdateProgress_Hide,UpdateProgress_PagingTimer,DefaultText="Working...";CodePlex.UpdateProgress=new function(){var u,j,v,t,b,e,w,a;this.initialize=function(c){if(e===c)return;u=this;a=[];e=c;v=$.browser.mozilla;j=$.browser.msie&&$.browser.version<7;t=!j&&typeof document.documentElement.scrollLeft!="undefined"?document.documentElement:document.body;if(d()){o();h.apply(b,[null])}};this.show=f;this.reset=l;this.displayPanelAndDisableControls=k;this.displayForPaging=n;this.hidePanelAndEnableControls=p;this.hide=g;this.showWithCustomText=m;function p(d,e){g();for(var b=0;b<a.length;b++)if(a[b]){if(a[b].disabled)a[b].disabled=false;var c=a[b].saveClick;if(c){a[b].onclick=c;a[b].saveClick=null}}}function k(d){c(d);f(true);for(var b=1;b<arguments.length;b++)try{if(arguments[b]){arguments[b].disabled=true;if(arguments[b].onclick){arguments[b].saveClick=arguments[b].onclick;arguments[b].onclick=function(){return false}}a[b-1]=arguments[b]}}catch(e){}}function n(a){if(!a||a<=0)a=2e3;if(UpdateProgress_PagingTimer!=null){window.clearTimeout(UpdateProgress_PagingTimer);UpdateProgress_PagingTimer=null}c(DefaultText);UpdateProgress_PagingTimer=window.setTimeout(this.show,a)}function g(){if(UpdateProgress_PagingTimer!=null){window.clearTimeout(UpdateProgress_PagingTimer);UpdateProgress_PagingTimer=null}f(false);c(DefaultText)}function c(a){$("#UpdateProgressText").html(a)}function f(a){c(DefaultText);h();if(d())if(a||arguments.length==0){b.dialog("open");$(".ui-widget-overlay").addClass("loading")}else{b.dialog("close");$(".ui-widget-overlay").removeClass("loading")}$("#animatedLoadingIcon").detach().appendTo("#animatedLoadingIconContainer")}function m(a,b){c(b);f(a)}function d(){if(!e)return false;if(!b)b=$("#"+e).dialog({autoOpen:false,modal:true,closeOnEscape:false});return!!b}function h(a,b,c){i(a,b,c)}function l(a,b){g();i(a);if(!d())return}function q(c,b,a){return function(){for(var d=0;d<arguments.length;d++)a[a.length]=arguments[d];if(b)return b.apply(c,a)}}function i(e){if(typeof e!="function")return;for(var a=[],c=1;c<arguments.length;c++)a[a.length]=arguments[c];d()&&q(b,e,a)()}function s(d,a){if(!a||!a.nodeType)return null;for(var b=0;b<a.childNodes.length;b++){if(a.childNodes[b].id==d)return a.childNodes[b];var c=s(d,a.childNodes[b]);if(c)return c}return null}function o(){$(document).bind("keydown",r)}function r(a){if(d()&&b.is(":visible")){a.preventDefault&&a.preventDefault();a.stopPropagation&&a.stopPropagation();return a.returnValue=false}}};function openPreviewWikiWindow(a){newWindow=window.open(a,"Print","toolbar=0, menubar=0, location=0, status=0, scrollbars=1, resizable=1")}function printWiki(){parent.print()}function closeWiki(){try{parent.focus();parent.close()}catch(a){}}(function(a){var b={allowJsonSave:false,allowEmpty:false,version:0,initialParentWikiTitle:"Home",cancelRedirectUrl:"",wikiActionUrl:"",saveActionUrl:"",initialWikiContent:"",emptyErrorMessage:"Wiki content cannot be empty. Please enter content for the wiki page.",emptyTitleErrorMessage:"Wiki page title cannot be empty. Please enter a title.",tooManyCharactersInTitleErrorMessage:"Wiki page title cannot have more than 255 characters.",invalidCharactersInTitleErrorMessage:"Wiki page title cannot contain the # or | characters."};a.fn.wikiContent=function(c){c=a.extend({},b,c);return this.each(function(){new a.wikiContent(this,c)})};a.wikiContent=function(b,a){this.element=b;this.settings=a;this.init()};a.wikiContent.fn=a.wikiContent.prototype={};a.wikiContent.fn.extend=a.wikiContent.extend=a.extend;a.wikiContent.fn.extend({init:function(){this.initContent();a(this.element).bind("editPersonalStatement",this,function(a){a.data.editPersonalStatement()});a(this.element).bind("saveWiki",this,function(a){a.data.save()});a(this.element).bind("cancelWiki",this,function(a){a.data.cancel()});this.bindContainerEvents()},initContent:function(){this.wikiContent=this.settings.initialWikiContent;this.parentWikiTitle=this.settings.initialParentWikiTitle},editPersonalStatement:function(){this.post("Edit",false,function(a){this.sourceObject.onPersonalStatementLoad(a)})},onPersonalStatementLoad:function(b){this.updatePersonalStatement(b);a(".tab_control").enhanceTabs()},updatePersonalStatement:function(b){a("#personalStatement").html(b);this.bindContainerEvents();this.completeSuccess()},onUpdatePreview:function(a){this.sourceObject.updatePreview(a)},updatePreview:function(f){var d,c,e=a("#compose_tab_content"),b=a("#preview_tab_content");a(b).html(f.Message);c=a(".wikidoc",b).height()+5;d=Math.max(e.height(),c);a(b).height(d);this.bindContainerEvents();this.completeSuccess()},completeSuccess:function(){CodePlex.UpdateProgress.hide()},bindContainerEvents:function(){a("#previewLink",a(this.element)).unbind("click.post").bind("click.post",this,function(a){a.data.preview(a)});a("#saveWikiButton").unbind("click.post").bind("click.post",this,function(b){suppressUnsavedData();a(b.data.element).trigger("saveWiki");return false});a("#cancelWikiButton").unbind("click.post").bind("click.post",this,function(b){suppressUnsavedData();a(b.data.element).trigger("cancelWiki");return false})},preview:function(b){if(a("#preview_tab_content").is(":visible"))return;if(this.validate(true))this.post("Preview");else b.stopPropagation()},validate:function(c){this.updateContentFromForm();var b=true;if(!this.settings.allowEmpty){a("#wikiTitleError").hide();a("#wikiError").hide();if((this.editType===null||this.editType==="Wiki")&&a.trim(this.wikiContent).length===0){a("#wikiError").html(this.settings.emptyErrorMessage).show();b=false}if(this.editType==="Html"&&a.trim(this.htmlContent).length===0){a("#wikiError").html(this.settings.emptyErrorMessage).show();b=false}if(!c&&a.trim(this.wikiPageTitle).length>255){a("#wikiTitleError").html(this.settings.tooManyCharactersInTitleErrorMessage).show();b=false}if(!c&&/[\#\|]/.test(this.wikiPageTitle)){a("#wikiTitleError").html(this.settings.invalidCharactersInTitleErrorMessage).show();b=false}if(!c&&this.settings.isNewPage&&(!this.wikiPageTitle||a.trim(this.wikiPageTitle).length===0)){a("#wikiTitleError").html(this.settings.emptyTitleErrorMessage).show();b=false}return b}return true},updateContentFromForm:function(){var c=a("#inputText",a(this.element)).val();if(c!=undefined)this.wikiContent=c;if(typeof tinymce!="undefined"&&tinymce.activeEditor!==null)this.htmlContent=tinymce.activeEditor.getContent();var d=a('input[name="EditType"]:checked').val();if(d!=undefined)this.editType=d;var b=a("#parentWikiTitle").val();if(b&&b.length)this.parentWikiTitle=b;var e=a("#WikiPageTitle").val();if(e!=undefined)this.wikiPageTitle=e},post:function(b,e,c){var d,f,g;if(e===undefined)e=false;if(this.settings.allowJsonSave&&b==="Save"||b==="Preview")d="json";else d="html";g=this.settings.wikiActionUrl;if(this.settings.allowJsonSave&&b==="Save")g=this.settings.saveActionUrl;if(c===undefined)c=this.onUpdatePreview;CodePlex.UpdateProgress.show();f={WikiAction:b,IsNewPage:this.settings.isNewPage,Version:this.settings.version,EditType:this.editType,WikiContent:this.wikiContent,HtmlContent:this.htmlContent,ParentWikiTitle:this.parentWikiTitle,ForceOverwrite:e};if(this.wikiPageTitle)f.title=this.wikiPageTitle;a.ajax({data:f,type:"POST",url:g,success:c,sourceObject:this,dataType:d})},save:function(b){if(b===undefined)b=false;a("#wikiError").hide();this.validate()&&this.post("Save",b,function(a){this.sourceObject.saveSuccess(a)})},saveSuccess:function(b){if(typeof b==="object"){this.completeSuccess();if(b.IsError)if(/page title/.test(b.Message))a("#wikiTitleError").text(b.Message).show();else a("#wikiError").text(b.Message).show();else if(b.RequireConcurrencyPrompt)confirm("You are not editing the latest version of this page. If you continue, you will overwrite the latest version. Are you sure you want to overwrite the changes?")&&this.save(true);else{disableUnsavedData();location.href=b.RedirectUrl}}else this.updatePersonalStatement(b)},cancel:function(){if(this.settings.cancelRedirectUrl&&this.settings.cancelRedirectUrl.length){disableUnsavedData();location.href=this.settings.cancelRedirectUrl}else{this.post("View",false,function(a){this.sourceObject.onPersonalStatementLoad(a)});this.initContent()}}})})(jQuery);if(!document.createElement("canvas").getContext){(function(){var z=Math;var K=z.round;var J=z.sin;var U=z.cos;var b=z.abs;var k=z.sqrt;var D=10;var F=D/2;function T(){return this.context_||(this.context_=new W(this))}var O=Array.prototype.slice;function G(i,j,m){var Z=O.call(arguments,2);return function(){return i.apply(j,Z.concat(O.call(arguments)))}}function AD(Z){return String(Z).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function r(i){if(!i.namespaces.g_vml_){i.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML")}if(!i.namespaces.g_o_){i.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML")}if(!i.styleSheets.ex_canvas_){var Z=i.createStyleSheet();Z.owningElement.id="ex_canvas_";Z.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}r(document);var E={init:function(Z){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var i=Z||document;i.createElement("canvas");i.attachEvent("onreadystatechange",G(this.init_,this,i))}},init_:function(m){var j=m.getElementsByTagName("canvas");for(var Z=0;Z<j.length;Z++){this.initElement(j[Z])}},initElement:function(i){if(!i.getContext){i.getContext=T;r(i.ownerDocument);i.innerHTML="";i.attachEvent("onpropertychange",S);i.attachEvent("onresize",w);var Z=i.attributes;if(Z.width&&Z.width.specified){i.style.width=Z.width.nodeValue+"px"}else{i.width=i.clientWidth}if(Z.height&&Z.height.specified){i.style.height=Z.height.nodeValue+"px"}else{i.height=i.clientHeight}}return i}};function S(i){var Z=i.srcElement;switch(i.propertyName){case"width":Z.getContext().clearRect();Z.style.width=Z.attributes.width.nodeValue+"px";Z.firstChild.style.width=Z.clientWidth+"px";break;case"height":Z.getContext().clearRect();Z.style.height=Z.attributes.height.nodeValue+"px";Z.firstChild.style.height=Z.clientHeight+"px";break}}function w(i){var Z=i.srcElement;if(Z.firstChild){Z.firstChild.style.width=Z.clientWidth+"px";Z.firstChild.style.height=Z.clientHeight+"px"}}E.init();var I=[];for(var AC=0;AC<16;AC++){for(var AB=0;AB<16;AB++){I[AC*16+AB]=AC.toString(16)+AB.toString(16)}}function V(){return[[1,0,0],[0,1,0],[0,0,1]]}function d(m,j){var i=V();for(var Z=0;Z<3;Z++){for(var AF=0;AF<3;AF++){var p=0;for(var AE=0;AE<3;AE++){p+=m[Z][AE]*j[AE][AF]}i[Z][AF]=p}}return i}function Q(i,Z){Z.fillStyle=i.fillStyle;Z.lineCap=i.lineCap;Z.lineJoin=i.lineJoin;Z.lineWidth=i.lineWidth;Z.miterLimit=i.miterLimit;Z.shadowBlur=i.shadowBlur;Z.shadowColor=i.shadowColor;Z.shadowOffsetX=i.shadowOffsetX;Z.shadowOffsetY=i.shadowOffsetY;Z.strokeStyle=i.strokeStyle;Z.globalAlpha=i.globalAlpha;Z.font=i.font;Z.textAlign=i.textAlign;Z.textBaseline=i.textBaseline;Z.arcScaleX_=i.arcScaleX_;Z.arcScaleY_=i.arcScaleY_;Z.lineScale_=i.lineScale_}var B={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function g(i){var m=i.indexOf("(",3);var Z=i.indexOf(")",m+1);var j=i.substring(m+1,Z).split(",");if(j.length==4&&i.substr(3,1)=="a"){alpha=Number(j[3])}else{j[3]=1}return j}function C(Z){return parseFloat(Z)/100}function N(i,j,Z){return Math.min(Z,Math.max(j,i))}function c(AF){var j,i,Z;h=parseFloat(AF[0])/360%360;if(h<0){h++}s=N(C(AF[1]),0,1);l=N(C(AF[2]),0,1);if(s==0){j=i=Z=l}else{var m=l<0.5?l*(1+s):l+s-l*s;var AE=2*l-m;j=A(AE,m,h+1/3);i=A(AE,m,h);Z=A(AE,m,h-1/3)}return"#"+I[Math.floor(j*255)]+I[Math.floor(i*255)]+I[Math.floor(Z*255)]}function A(i,Z,j){if(j<0){j++}if(j>1){j--}if(6*j<1){return i+(Z-i)*6*j}else{if(2*j<1){return Z}else{if(3*j<2){return i+(Z-i)*(2/3-j)*6}else{return i}}}}function Y(Z){var AE,p=1;Z=String(Z);if(Z.charAt(0)=="#"){AE=Z}else{if(/^rgb/.test(Z)){var m=g(Z);var AE="#",AF;for(var j=0;j<3;j++){if(m[j].indexOf("%")!=-1){AF=Math.floor(C(m[j])*255)}else{AF=Number(m[j])}AE+=I[N(AF,0,255)]}p=m[3]}else{if(/^hsl/.test(Z)){var m=g(Z);AE=c(m);p=m[3]}else{AE=B[Z]||Z}}}return{color:AE,alpha:p}}var L={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"};var f={};function X(Z){if(f[Z]){return f[Z]}var m=document.createElement("div");var j=m.style;try{j.font=Z}catch(i){}return f[Z]={style:j.fontStyle||L.style,variant:j.fontVariant||L.variant,weight:j.fontWeight||L.weight,size:j.fontSize||L.size,family:j.fontFamily||L.family}}function P(j,i){var Z={};for(var AF in j){Z[AF]=j[AF]}var AE=parseFloat(i.currentStyle.fontSize),m=parseFloat(j.size);if(typeof j.size=="number"){Z.size=j.size}else{if(j.size.indexOf("px")!=-1){Z.size=m}else{if(j.size.indexOf("em")!=-1){Z.size=AE*m}else{if(j.size.indexOf("%")!=-1){Z.size=(AE/100)*m}else{if(j.size.indexOf("pt")!=-1){Z.size=m/0.75}else{Z.size=AE}}}}}Z.size*=0.981;return Z}function AA(Z){return Z.style+" "+Z.variant+" "+Z.weight+" "+Z.size+"px "+Z.family}function t(Z){switch(Z){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function W(i){this.m_=V();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=D*1;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=i;var Z=i.ownerDocument.createElement("div");Z.style.width=i.clientWidth+"px";Z.style.height=i.clientHeight+"px";Z.style.overflow="hidden";Z.style.position="absolute";i.appendChild(Z);this.element_=Z;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var M=W.prototype;M.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null}this.element_.innerHTML=""};M.beginPath=function(){this.currentPath_=[]};M.moveTo=function(i,Z){var j=this.getCoords_(i,Z);this.currentPath_.push({type:"moveTo",x:j.x,y:j.y});this.currentX_=j.x;this.currentY_=j.y};M.lineTo=function(i,Z){var j=this.getCoords_(i,Z);this.currentPath_.push({type:"lineTo",x:j.x,y:j.y});this.currentX_=j.x;this.currentY_=j.y};M.bezierCurveTo=function(j,i,AI,AH,AG,AE){var Z=this.getCoords_(AG,AE);var AF=this.getCoords_(j,i);var m=this.getCoords_(AI,AH);e(this,AF,m,Z)};function e(Z,m,j,i){Z.currentPath_.push({type:"bezierCurveTo",cp1x:m.x,cp1y:m.y,cp2x:j.x,cp2y:j.y,x:i.x,y:i.y});Z.currentX_=i.x;Z.currentY_=i.y}M.quadraticCurveTo=function(AG,j,i,Z){var AF=this.getCoords_(AG,j);var AE=this.getCoords_(i,Z);var AH={x:this.currentX_+2/3*(AF.x-this.currentX_),y:this.currentY_+2/3*(AF.y-this.currentY_)};var m={x:AH.x+(AE.x-this.currentX_)/3,y:AH.y+(AE.y-this.currentY_)/3};e(this,AH,m,AE)};M.arc=function(AJ,AH,AI,AE,i,j){AI*=D;var AN=j?"at":"wa";var AK=AJ+U(AE)*AI-F;var AM=AH+J(AE)*AI-F;var Z=AJ+U(i)*AI-F;var AL=AH+J(i)*AI-F;if(AK==Z&&!j){AK+=0.125}var m=this.getCoords_(AJ,AH);var AG=this.getCoords_(AK,AM);var AF=this.getCoords_(Z,AL);this.currentPath_.push({type:AN,x:m.x,y:m.y,radius:AI,xStart:AG.x,yStart:AG.y,xEnd:AF.x,yEnd:AF.y})};M.rect=function(j,i,Z,m){this.moveTo(j,i);this.lineTo(j+Z,i);this.lineTo(j+Z,i+m);this.lineTo(j,i+m);this.closePath()};M.strokeRect=function(j,i,Z,m){var p=this.currentPath_;this.beginPath();this.moveTo(j,i);this.lineTo(j+Z,i);this.lineTo(j+Z,i+m);this.lineTo(j,i+m);this.closePath();this.stroke();this.currentPath_=p};M.fillRect=function(j,i,Z,m){var p=this.currentPath_;this.beginPath();this.moveTo(j,i);this.lineTo(j+Z,i);this.lineTo(j+Z,i+m);this.lineTo(j,i+m);this.closePath();this.fill();this.currentPath_=p};M.createLinearGradient=function(i,m,Z,j){var p=new v("gradient");p.x0_=i;p.y0_=m;p.x1_=Z;p.y1_=j;return p};M.createRadialGradient=function(m,AE,j,i,p,Z){var AF=new v("gradientradial");AF.x0_=m;AF.y0_=AE;AF.r0_=j;AF.x1_=i;AF.y1_=p;AF.r1_=Z;return AF};M.drawImage=function(AO,j){var AH,AF,AJ,AV,AM,AK,AQ,AX;var AI=AO.runtimeStyle.width;var AN=AO.runtimeStyle.height;AO.runtimeStyle.width="auto";AO.runtimeStyle.height="auto";var AG=AO.width;var AT=AO.height;AO.runtimeStyle.width=AI;AO.runtimeStyle.height=AN;if(arguments.length==3){AH=arguments[1];AF=arguments[2];AM=AK=0;AQ=AJ=AG;AX=AV=AT}else{if(arguments.length==5){AH=arguments[1];AF=arguments[2];AJ=arguments[3];AV=arguments[4];AM=AK=0;AQ=AG;AX=AT}else{if(arguments.length==9){AM=arguments[1];AK=arguments[2];AQ=arguments[3];AX=arguments[4];AH=arguments[5];AF=arguments[6];AJ=arguments[7];AV=arguments[8]}else{throw Error("Invalid number of arguments")}}}var AW=this.getCoords_(AH,AF);var m=AQ/2;var i=AX/2;var AU=[];var Z=10;var AE=10;AU.push(" <g_vml_:group",' coordsize="',D*Z,",",D*AE,'"',' coordorigin="0,0"',' style="width:',Z,"px;height:",AE,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var p=[];p.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",K(AW.x/D),",","Dy=",K(AW.y/D),"");var AS=AW;var AR=this.getCoords_(AH+AJ,AF);var AP=this.getCoords_(AH,AF+AV);var AL=this.getCoords_(AH+AJ,AF+AV);AS.x=z.max(AS.x,AR.x,AP.x,AL.x);AS.y=z.max(AS.y,AR.y,AP.y,AL.y);AU.push("padding:0 ",K(AS.x/D),"px ",K(AS.y/D),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",p.join(""),", sizingmethod='clip');")}else{AU.push("top:",K(AW.y/D),"px;left:",K(AW.x/D),"px;")}AU.push(' ">','<g_vml_:image src="',AO.src,'"',' style="width:',D*AJ,"px;"," height:",D*AV,'px"',' cropleft="',AM/AG,'"',' croptop="',AK/AT,'"',' cropright="',(AG-AM-AQ)/AG,'"',' cropbottom="',(AT-AK-AX)/AT,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",AU.join(""))};M.stroke=function(AM){var m=10;var AN=10;var AE=5000;var AG={x:null,y:null};var AL={x:null,y:null};for(var AH=0;AH<this.currentPath_.length;AH+=AE){var AK=[];var AF=false;AK.push("<g_vml_:shape",' filled="',!!AM,'"',' style="position:absolute;width:',m,"px;height:",AN,'px;"',' coordorigin="0,0"',' coordsize="',D*m,",",D*AN,'"',' stroked="',!AM,'"',' path="');var AO=false;for(var AI=AH;AI<Math.min(AH+AE,this.currentPath_.length);AI++){if(AI%AE==0&&AI>0){AK.push(" m ",K(this.currentPath_[AI-1].x),",",K(this.currentPath_[AI-1].y))}var Z=this.currentPath_[AI];var AJ;switch(Z.type){case"moveTo":AJ=Z;AK.push(" m ",K(Z.x),",",K(Z.y));break;case"lineTo":AK.push(" l ",K(Z.x),",",K(Z.y));break;case"close":AK.push(" x ");Z=null;break;case"bezierCurveTo":AK.push(" c ",K(Z.cp1x),",",K(Z.cp1y),",",K(Z.cp2x),",",K(Z.cp2y),",",K(Z.x),",",K(Z.y));break;case"at":case"wa":AK.push(" ",Z.type," ",K(Z.x-this.arcScaleX_*Z.radius),",",K(Z.y-this.arcScaleY_*Z.radius)," ",K(Z.x+this.arcScaleX_*Z.radius),",",K(Z.y+this.arcScaleY_*Z.radius)," ",K(Z.xStart),",",K(Z.yStart)," ",K(Z.xEnd),",",K(Z.yEnd));break}if(Z){if(AG.x==null||Z.x<AG.x){AG.x=Z.x}if(AL.x==null||Z.x>AL.x){AL.x=Z.x}if(AG.y==null||Z.y<AG.y){AG.y=Z.y}if(AL.y==null||Z.y>AL.y){AL.y=Z.y}}}AK.push(' ">');if(!AM){R(this,AK)}else{a(this,AK,AG,AL)}AK.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",AK.join(""))}};function R(j,AE){var i=Y(j.strokeStyle);var m=i.color;var p=i.alpha*j.globalAlpha;var Z=j.lineScale_*j.lineWidth;if(Z<1){p*=Z}AE.push("<g_vml_:stroke",' opacity="',p,'"',' joinstyle="',j.lineJoin,'"',' miterlimit="',j.miterLimit,'"',' endcap="',t(j.lineCap),'"',' weight="',Z,'px"',' color="',m,'" />')}function a(AO,AG,Ah,AP){var AH=AO.fillStyle;var AY=AO.arcScaleX_;var AX=AO.arcScaleY_;var Z=AP.x-Ah.x;var m=AP.y-Ah.y;if(AH instanceof v){var AL=0;var Ac={x:0,y:0};var AU=0;var AK=1;if(AH.type_=="gradient"){var AJ=AH.x0_/AY;var j=AH.y0_/AX;var AI=AH.x1_/AY;var Aj=AH.y1_/AX;var Ag=AO.getCoords_(AJ,j);var Af=AO.getCoords_(AI,Aj);var AE=Af.x-Ag.x;var p=Af.y-Ag.y;AL=Math.atan2(AE,p)*180/Math.PI;if(AL<0){AL+=360}if(AL<0.000001){AL=0}}else{var Ag=AO.getCoords_(AH.x0_,AH.y0_);Ac={x:(Ag.x-Ah.x)/Z,y:(Ag.y-Ah.y)/m};Z/=AY*D;m/=AX*D;var Aa=z.max(Z,m);AU=2*AH.r0_/Aa;AK=2*AH.r1_/Aa-AU}var AS=AH.colors_;AS.sort(function(Ak,i){return Ak.offset-i.offset});var AN=AS.length;var AR=AS[0].color;var AQ=AS[AN-1].color;var AW=AS[0].alpha*AO.globalAlpha;var AV=AS[AN-1].alpha*AO.globalAlpha;var Ab=[];for(var Ae=0;Ae<AN;Ae++){var AM=AS[Ae];Ab.push(AM.offset*AK+AU+" "+AM.color)}AG.push('<g_vml_:fill type="',AH.type_,'"',' method="none" focus="100%"',' color="',AR,'"',' color2="',AQ,'"',' colors="',Ab.join(","),'"',' opacity="',AV,'"',' g_o_:opacity2="',AW,'"',' angle="',AL,'"',' focusposition="',Ac.x,",",Ac.y,'" />')}else{if(AH instanceof u){if(Z&&m){var AF=-Ah.x;var AZ=-Ah.y;AG.push("<g_vml_:fill",' position="',AF/Z*AY*AY,",",AZ/m*AX*AX,'"',' type="tile"',' src="',AH.src_,'" />')}}else{var Ai=Y(AO.fillStyle);var AT=Ai.color;var Ad=Ai.alpha*AO.globalAlpha;AG.push('<g_vml_:fill color="',AT,'" opacity="',Ad,'" />')}}}M.fill=function(){this.stroke(true)};M.closePath=function(){this.currentPath_.push({type:"close"})};M.getCoords_=function(j,i){var Z=this.m_;return{x:D*(j*Z[0][0]+i*Z[1][0]+Z[2][0])-F,y:D*(j*Z[0][1]+i*Z[1][1]+Z[2][1])-F}};M.save=function(){var Z={};Q(this,Z);this.aStack_.push(Z);this.mStack_.push(this.m_);this.m_=d(V(),this.m_)};M.restore=function(){if(this.aStack_.length){Q(this.aStack_.pop(),this);this.m_=this.mStack_.pop()}};function H(Z){return isFinite(Z[0][0])&&isFinite(Z[0][1])&&isFinite(Z[1][0])&&isFinite(Z[1][1])&&isFinite(Z[2][0])&&isFinite(Z[2][1])}function y(i,Z,j){if(!H(Z)){return }i.m_=Z;if(j){var p=Z[0][0]*Z[1][1]-Z[0][1]*Z[1][0];i.lineScale_=k(b(p))}}M.translate=function(j,i){var Z=[[1,0,0],[0,1,0],[j,i,1]];y(this,d(Z,this.m_),false)};M.rotate=function(i){var m=U(i);var j=J(i);var Z=[[m,j,0],[-j,m,0],[0,0,1]];y(this,d(Z,this.m_),false)};M.scale=function(j,i){this.arcScaleX_*=j;this.arcScaleY_*=i;var Z=[[j,0,0],[0,i,0],[0,0,1]];y(this,d(Z,this.m_),true)};M.transform=function(p,m,AF,AE,i,Z){var j=[[p,m,0],[AF,AE,0],[i,Z,1]];y(this,d(j,this.m_),true)};M.setTransform=function(AE,p,AG,AF,j,i){var Z=[[AE,p,0],[AG,AF,0],[j,i,1]];y(this,Z,true)};M.drawText_=function(AK,AI,AH,AN,AG){var AM=this.m_,AQ=1000,i=0,AP=AQ,AF={x:0,y:0},AE=[];var Z=P(X(this.font),this.element_);var j=AA(Z);var AR=this.element_.currentStyle;var p=this.textAlign.toLowerCase();switch(p){case"left":case"center":case"right":break;case"end":p=AR.direction=="ltr"?"right":"left";break;case"start":p=AR.direction=="rtl"?"right":"left";break;default:p="left"}switch(this.textBaseline){case"hanging":case"top":AF.y=Z.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":AF.y=-Z.size/2.25;break}switch(p){case"right":i=AQ;AP=0.05;break;case"center":i=AP=AQ/2;break}var AO=this.getCoords_(AI+AF.x,AH+AF.y);AE.push('<g_vml_:line from="',-i,' 0" to="',AP,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!AG,'" stroked="',!!AG,'" style="position:absolute;width:1px;height:1px;">');if(AG){R(this,AE)}else{a(this,AE,{x:-i,y:0},{x:AP,y:Z.size})}var AL=AM[0][0].toFixed(3)+","+AM[1][0].toFixed(3)+","+AM[0][1].toFixed(3)+","+AM[1][1].toFixed(3)+",0,0";var AJ=K(AO.x/D)+","+K(AO.y/D);AE.push('<g_vml_:skew on="t" matrix="',AL,'" ',' offset="',AJ,'" origin="',i,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',AD(AK),'" style="v-text-align:',p,";font:",AD(j),'" /></g_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",AE.join(""))};M.fillText=function(j,Z,m,i){this.drawText_(j,Z,m,i,false)};M.strokeText=function(j,Z,m,i){this.drawText_(j,Z,m,i,true)};M.measureText=function(j){if(!this.textMeasureEl_){var Z='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",Z);this.textMeasureEl_=this.element_.lastChild}var i=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(i.createTextNode(j));return{width:this.textMeasureEl_.offsetWidth}};M.clip=function(){};M.arcTo=function(){};M.createPattern=function(i,Z){return new u(i,Z)};function v(Z){this.type_=Z;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}v.prototype.addColorStop=function(i,Z){Z=Y(Z);this.colors_.push({offset:i,color:Z.color,alpha:Z.alpha})};function u(i,Z){q(i);switch(Z){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=Z;break;default:n("SYNTAX_ERR")}this.src_=i.src;this.width_=i.width;this.height_=i.height}function n(Z){throw new o(Z)}function q(Z){if(!Z||Z.nodeType!=1||Z.tagName!="IMG"){n("TYPE_MISMATCH_ERR")}if(Z.readyState!="complete"){n("INVALID_STATE_ERR")}}function o(Z){this.code=this[Z];this.message=Z+": DOM Exception "+this.code}var x=o.prototype=new Error;x.INDEX_SIZE_ERR=1;x.DOMSTRING_SIZE_ERR=2;x.HIERARCHY_REQUEST_ERR=3;x.WRONG_DOCUMENT_ERR=4;x.INVALID_CHARACTER_ERR=5;x.NO_DATA_ALLOWED_ERR=6;x.NO_MODIFICATION_ALLOWED_ERR=7;x.NOT_FOUND_ERR=8;x.NOT_SUPPORTED_ERR=9;x.INUSE_ATTRIBUTE_ERR=10;x.INVALID_STATE_ERR=11;x.SYNTAX_ERR=12;x.INVALID_MODIFICATION_ERR=13;x.NAMESPACE_ERR=14;x.INVALID_ACCESS_ERR=15;x.VALIDATION_ERR=16;x.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=E;CanvasRenderingContext2D=W;CanvasGradient=v;CanvasPattern=u;DOMException=o})()};(function(){jQuery.color={};jQuery.color.make=function(c,d,f,e){var b={};b.r=c||0;b.g=d||0;b.b=f||0;b.a=e!=null?e:1;b.add=function(g,h){for(var j=0;j<g.length;++j){b[g.charAt(j)]+=h}return b.normalize()};b.scale=function(g,h){for(var j=0;j<g.length;++j){b[g.charAt(j)]*=h}return b.normalize()};b.toString=function(){if(b.a>=1){return"rgb("+[b.r,b.g,b.b].join(",")+")"}else{return"rgba("+[b.r,b.g,b.b,b.a].join(",")+")"}};b.normalize=function(){function g(j,h,k){return h<j?j:(h>k?k:h)}b.r=g(0,parseInt(b.r),255);b.g=g(0,parseInt(b.g),255);b.b=g(0,parseInt(b.b),255);b.a=g(0,b.a,1);return b};b.clone=function(){return jQuery.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};jQuery.color.extract=function(c,d){var b;do{b=c.css(d).toLowerCase();if(b!=""&&b!="transparent"){break}c=c.parent()}while(!jQuery.nodeName(c.get(0),"body"));if(b=="rgba(0, 0, 0, 0)"){b="transparent"}return jQuery.color.parse(b)};jQuery.color.parse=function(b){var c,e=jQuery.color.make;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b)){return e(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10))}if(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b)){return e(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),parseFloat(c[4]))}if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b)){return e(parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55)}if(c=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b)){return e(parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55,parseFloat(c[4]))}if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b)){return e(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16))}if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b)){return e(parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16))}var d=jQuery.trim(b).toLowerCase();if(d=="transparent"){return e(255,255,255,0)}else{c=a[d];return e(c[0],c[1],c[2])}};var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})();(function(c){function b(N,z,A,e){var p=[],J={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},q=null,al=null,am=null,B=null,av=null,ao=[],T=[],H={left:0,right:0,top:0,bottom:0},ah=0,s=0,h=0,aa=0,m={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[]},f=this;f.setData=I;f.setupGrid=M;f.draw=at;f.getPlaceholder=function(){return N};f.getCanvas=function(){return q};f.getPlotOffset=function(){return H};f.width=function(){return h};f.height=function(){return aa};f.offset=function(){var aw=am.offset();aw.left+=H.left;aw.top+=H.top;return aw};f.getData=function(){return p};f.getAxis=function(ax,ay){var aw=(ax==x?ao:T)[ay-1];if(aw&&!aw.used){aw=null}return aw};f.getAxes=function(){var ax={},aw;for(aw=0;aw<ao.length;++aw){ax["x"+(aw?(aw+1):"")+"axis"]=ao[aw]||{}}for(aw=0;aw<T.length;++aw){ax["y"+(aw?(aw+1):"")+"axis"]=T[aw]||{}}if(!ax.x2axis){ax.x2axis={n:2}}if(!ax.y2axis){ax.y2axis={n:2}}return ax};f.getXAxes=function(){return ao};f.getYAxes=function(){return T};f.getUsedAxes=Y;f.c2p=V;f.p2c=O;f.getOptions=function(){return J};f.highlight=an;f.unhighlight=ag;f.triggerRedrawOverlay=U;f.pointOffset=function(aw){return{left:parseInt(ao[v(aw,"x")-1].p2c(+aw.x)+H.left),top:parseInt(T[v(aw,"y")-1].p2c(+aw.y)+H.top)}};f.hooks=m;E(f);X(A);F();I(z);M();at();ar();function C(ay,aw){aw=[f].concat(aw);for(var ax=0;ax<ay.length;++ax){ay[ax].apply(this,aw)}}function E(){for(var aw=0;aw<e.length;++aw){var ax=e[aw];ax.init(f);if(ax.options){c.extend(true,J,ax.options)}}}function X(ax){var aw;c.extend(true,J,ax);if(J.xaxis.color==null){J.xaxis.color=J.grid.color}if(J.yaxis.color==null){J.yaxis.color=J.grid.color}if(J.xaxis.tickColor==null){J.xaxis.tickColor=J.grid.tickColor}if(J.yaxis.tickColor==null){J.yaxis.tickColor=J.grid.tickColor}if(J.grid.borderColor==null){J.grid.borderColor=J.grid.color}if(J.grid.tickColor==null){J.grid.tickColor=c.color.parse(J.grid.color).scale("a",0.22).toString()}for(aw=0;aw<Math.max(1,J.xaxes.length);++aw){J.xaxes[aw]=c.extend(true,{},J.xaxis,J.xaxes[aw])}for(aw=0;aw<Math.max(1,J.yaxes.length);++aw){J.yaxes[aw]=c.extend(true,{},J.yaxis,J.yaxes[aw])}if(J.xaxis.noTicks&&J.xaxis.ticks==null){J.xaxis.ticks=J.xaxis.noTicks}if(J.yaxis.noTicks&&J.yaxis.ticks==null){J.yaxis.ticks=J.yaxis.noTicks}if(J.x2axis){J.x2axis.position="top";J.xaxes[1]=J.x2axis}if(J.y2axis){if(J.y2axis.autoscaleMargin===undefined){J.y2axis.autoscaleMargin=0.02}J.y2axis.position="right";J.yaxes[1]=J.y2axis}if(J.grid.coloredAreas){J.grid.markings=J.grid.coloredAreas}if(J.grid.coloredAreasColor){J.grid.markingsColor=J.grid.coloredAreasColor}if(J.lines){c.extend(true,J.series.lines,J.lines)}if(J.points){c.extend(true,J.series.points,J.points)}if(J.bars){c.extend(true,J.series.bars,J.bars)}if(J.shadowSize){J.series.shadowSize=J.shadowSize}for(aw=0;aw<J.xaxes.length;++aw){K(ao,aw+1).options=J.xaxes[aw]}for(aw=0;aw<J.yaxes.length;++aw){K(T,aw+1).options=J.yaxes[aw]}for(var ay in m){if(J.hooks[ay]&&J.hooks[ay].length){m[ay]=m[ay].concat(J.hooks[ay])}}C(m.processOptions,[J])}function I(aw){p=n(aw);w();P()}function n(az){var ax=[];for(var aw=0;aw<az.length;++aw){var ay=c.extend(true,{},J.series);if(az[aw].data){ay.data=az[aw].data;delete az[aw].data;c.extend(true,ay,az[aw]);az[aw].data=ay.data}else{ay.data=az[aw]}ax.push(ay)}return ax}function v(ax,ay){var aw=ax[ay+"axis"];if(typeof aw=="object"){aw=aw.n}if(typeof aw!="number"){aw=1}return aw}function V(az){var ax={},aw,ay;for(aw=0;aw<ao.length;++aw){ay=ao[aw];if(ay&&ay.used){ax["x"+ay.n]=ay.c2p(az.left)}}for(aw=0;aw<T.length;++aw){ay=T[aw];if(ay&&ay.used){ax["y"+ay.n]=ay.c2p(az.top)}}if(ax.x1!==undefined){ax.x=ax.x1}if(ax.y1!==undefined){ax.y=ax.y1}return ax}function O(aA){var ay={},ax,az,aw;for(ax=0;ax<ao.length;++ax){az=ao[ax];if(az&&az.used){aw="x"+az.n;if(aA[aw]==null&&az.n==1){aw="x"}if(aA[aw]){ay.left=az.p2c(aA[aw]);break}}}for(ax=0;ax<T.length;++ax){az=T[ax];if(az&&az.used){aw="y"+az.n;if(aA[aw]==null&&az.n==1){aw="y"}if(aA[aw]){ay.top=az.p2c(aA[aw]);break}}}return ay}function Y(){var ax=[],aw,ay;for(aw=0;aw<ao.length;++aw){ay=ao[aw];if(ay&&ay.used){ax.push(ay)}}for(aw=0;aw<T.length;++aw){ay=T[aw];if(ay&&ay.used){ax.push(ay)}}return ax}function K(ax,aw){if(!ax[aw-1]){ax[aw-1]={n:aw,direction:ax==ao?"x":"y",options:c.extend(true,{},ax==ao?J.xaxis:J.yaxis)}}return ax[aw-1]}function w(){var aB;var aH=p.length,aw=[],az=[];for(aB=0;aB<p.length;++aB){var aE=p[aB].color;if(aE!=null){--aH;if(typeof aE=="number"){az.push(aE)}else{aw.push(c.color.parse(p[aB].color))}}}for(aB=0;aB<az.length;++aB){aH=Math.max(aH,az[aB]+1)}var ax=[],aA=0;aB=0;while(ax.length<aH){var aD;if(J.colors.length==aB){aD=c.color.make(100,100,100)}else{aD=c.color.parse(J.colors[aB])}var ay=aA%2==1?-1:1;aD.scale("rgb",1+ay*Math.ceil(aA/2)*0.2);ax.push(aD);++aB;if(aB>=J.colors.length){aB=0;++aA}}var aC=0,aI;for(aB=0;aB<p.length;++aB){aI=p[aB];if(aI.color==null){aI.color=ax[aC].toString();++aC}else{if(typeof aI.color=="number"){aI.color=ax[aI.color].toString()}}if(aI.lines.show==null){var aG,aF=true;for(aG in aI){if(aI[aG]&&aI[aG].show){aF=false;break}}if(aF){aI.lines.show=true}}aI.xaxis=K(ao,v(aI,"x"));aI.yaxis=K(T,v(aI,"y"))}}function P(){var aJ=Number.POSITIVE_INFINITY,aD=Number.NEGATIVE_INFINITY,aP,aN,aM,aI,ay,aE,aO,aK,aC,aB,ax,aV,aS,aG;function aw(aW,aX){if(!aW){return}aW.datamin=aJ;aW.datamax=aD;aW.used=false}function aA(aY,aX,aW){if(aX<aY.datamin){aY.datamin=aX}if(aW>aY.datamax){aY.datamax=aW}}for(aP=0;aP<ao.length;++aP){aw(ao[aP])}for(aP=0;aP<T.length;++aP){aw(T[aP])}for(aP=0;aP<p.length;++aP){aE=p[aP];aE.datapoints={points:[]};C(m.processRawData,[aE,aE.data,aE.datapoints])}for(aP=0;aP<p.length;++aP){aE=p[aP];var aU=aE.data,aR=aE.datapoints.format;if(!aR){aR=[];aR.push({x:true,number:true,required:true});aR.push({y:true,number:true,required:true});if(aE.bars.show||(aE.lines.show&&aE.lines.fill)){aR.push({y:true,number:true,required:false,defaultValue:0});if(aE.bars.horizontal){delete aR[aR.length-1].y;aR[aR.length-1].x=true}}aE.datapoints.format=aR}if(aE.datapoints.pointsize!=null){continue}aE.datapoints.pointsize=aR.length;aK=aE.datapoints.pointsize;aO=aE.datapoints.points;insertSteps=aE.lines.show&&aE.lines.steps;aE.xaxis.used=aE.yaxis.used=true;for(aN=aM=0;aN<aU.length;++aN,aM+=aK){aG=aU[aN];var az=aG==null;if(!az){for(aI=0;aI<aK;++aI){aV=aG[aI];aS=aR[aI];if(aS){if(aS.number&&aV!=null){aV=+aV;if(isNaN(aV)){aV=null}}if(aV==null){if(aS.required){az=true}if(aS.defaultValue!=null){aV=aS.defaultValue}}}aO[aM+aI]=aV}}if(az){for(aI=0;aI<aK;++aI){aV=aO[aM+aI];if(aV!=null){aS=aR[aI];if(aS.x){aA(aE.xaxis,aV,aV)}if(aS.y){aA(aE.yaxis,aV,aV)}}aO[aM+aI]=null}}else{if(insertSteps&&aM>0&&aO[aM-aK]!=null&&aO[aM-aK]!=aO[aM]&&aO[aM-aK+1]!=aO[aM+1]){for(aI=0;aI<aK;++aI){aO[aM+aK+aI]=aO[aM+aI]}aO[aM+1]=aO[aM-aK+1];aM+=aK}}}}for(aP=0;aP<p.length;++aP){aE=p[aP];C(m.processDatapoints,[aE,aE.datapoints])}for(aP=0;aP<p.length;++aP){aE=p[aP];aO=aE.datapoints.points,aK=aE.datapoints.pointsize;var aF=aJ,aL=aJ,aH=aD,aQ=aD;for(aN=0;aN<aO.length;aN+=aK){if(aO[aN]==null){continue}for(aI=0;aI<aK;++aI){aV=aO[aN+aI];aS=aR[aI];if(!aS){continue}if(aS.x){if(aV<aF){aF=aV}if(aV>aH){aH=aV}}if(aS.y){if(aV<aL){aL=aV}if(aV>aQ){aQ=aV}}}}if(aE.bars.show){var aT=aE.bars.align=="left"?0:-aE.bars.barWidth/2;if(aE.bars.horizontal){aL+=aT;aQ+=aT+aE.bars.barWidth}else{aF+=aT;aH+=aT+aE.bars.barWidth}}aA(aE.xaxis,aF,aH);aA(aE.yaxis,aL,aQ)}c.each(Y(),function(aW,aX){if(aX.datamin==aJ){aX.datamin=null}if(aX.datamax==aD){aX.datamax=null}})}function F(){function aw(ay,ax){var az=document.createElement("canvas");az.width=ay;az.height=ax;if(!az.getContext){az=window.G_vmlCanvasManager.initElement(az)}return az}ah=N.width();s=N.height();N.html("");if(N.css("position")=="static"){N.css("position","relative")}if(ah<=0||s<=0){throw"Invalid dimensions for plot, width = "+ah+", height = "+s}if(window.G_vmlCanvasManager){window.G_vmlCanvasManager.init_(document)}q=c(aw(ah,s)).appendTo(N).get(0);B=q.getContext("2d");al=c(aw(ah,s)).css({position:"absolute",left:0,top:0}).appendTo(N).get(0);av=al.getContext("2d");av.stroke()}function ar(){am=c([al,q]);if(J.grid.hoverable){am.mousemove(d)}if(J.grid.clickable){am.click(G)}C(m.bindEvents,[am])}function l(aB){function ax(aC){return aC}var aA,aw,ay=aB.options.transform||ax,az=aB.options.inverseTransform;if(aB.direction=="x"){aA=aB.scale=h/(ay(aB.max)-ay(aB.min));aw=ay(aB.min);if(ay==ax){aB.p2c=function(aC){return(aC-aw)*aA}}else{aB.p2c=function(aC){return(ay(aC)-aw)*aA}}if(!az){aB.c2p=function(aC){return aw+aC/aA}}else{aB.c2p=function(aC){return az(aw+aC/aA)}}}else{aA=aB.scale=aa/(ay(aB.max)-ay(aB.min));aw=ay(aB.max);if(ay==ax){aB.p2c=function(aC){return(aw-aC)*aA}}else{aB.p2c=function(aC){return(aw-ay(aC))*aA}}if(!az){aB.c2p=function(aC){return aw-aC/aA}}else{aB.c2p=function(aC){return az(aw-aC/aA)}}}}function W(ay){if(!ay){return}var aw=ay.options,aA,aE=ay.ticks||[],aD=[],az,aF=aw.labelWidth,aB=aw.labelHeight,ax;function aC(aH,aG){return c('<div style="position:absolute;top:-10000px;'+aG+'font-size:smaller"><div class="'+ay.direction+"Axis "+ay.direction+ay.n+'Axis">'+aH.join("")+"</div></div>").appendTo(N)}if(ay.direction=="x"){if(aF==null){aF=Math.floor(ah/(aE.length>0?aE.length:1))}if(aB==null){aD=[];for(aA=0;aA<aE.length;++aA){az=aE[aA].label;if(az){aD.push('<div class="tickLabel" style="float:left;width:'+aF+'px">'+az+"</div>")}}if(aD.length>0){aD.push('<div style="clear:left"></div>');ax=aC(aD,"width:10000px;");aB=ax.height();ax.remove()}}}else{if(aF==null||aB==null){for(aA=0;aA<aE.length;++aA){az=aE[aA].label;if(az){aD.push('<div class="tickLabel">'+az+"</div>")}}if(aD.length>0){ax=aC(aD,"");if(aF==null){aF=ax.children().width()}if(aB==null){aB=ax.find("div.tickLabel").height()}ax.remove()}}}if(aF==null){aF=0}if(aB==null){aB=0}ay.labelWidth=aF;ay.labelHeight=aB}function Z(ay){if(!ay||(!ay.used&&!(ay.labelWidth||ay.labelHeight))){return}var ax=ay.labelWidth,aG=ay.labelHeight,aC=ay.options.position,aA=ay.options.tickLength,aB=J.grid.axisMargin,aE=J.grid.labelMargin,aF=ay.direction=="x"?ao:T,az;var aw=c.grep(aF,function(aI){return aI&&aI.options.position==aC&&(aI.labelHeight||aI.labelWidth)});if(c.inArray(ay,aw)==aw.length-1){aB=0}if(aA==null){aA="full"}var aD=c.grep(aF,function(aI){return aI&&(aI.labelHeight||aI.labelWidth)});var aH=c.inArray(ay,aD)==0;if(!aH&&aA=="full"){aA=5}if(!isNaN(+aA)){aE+=+aA}if(ay.direction=="x"){aG+=aE;if(aC=="bottom"){H.bottom+=aG+aB;ay.box={top:s-H.bottom,height:aG}}else{ay.box={top:H.top+aB,height:aG};H.top+=aG+aB}}else{ax+=aE;if(aC=="left"){ay.box={left:H.left+aB,width:ax};H.left+=ax+aB}else{H.right+=ax+aB;ay.box={left:ah-H.right,width:ax}}}ay.position=aC;ay.tickLength=aA;ay.box.padding=aE;ay.innermost=aH}function ab(aw){if(aw.direction=="x"){aw.box.left=H.left;aw.box.width=h}else{aw.box.top=H.top;aw.box.height=aa}}function M(){var aB=Y(),ay,ax;for(ax=0;ax<aB.length;++ax){k(aB[ax])}H.left=H.right=H.top=H.bottom=0;if(J.grid.show){for(ax=0;ax<aB.length;++ax){aq(aB[ax]);S(aB[ax]);r(aB[ax],aB[ax].ticks)}for(ay=0;ay<ao.length;++ay){W(ao[ay])}for(ay=0;ay<T.length;++ay){W(T[ay])}for(ay=ao.length-1;ay>=0;--ay){Z(ao[ay])}for(ay=T.length-1;ay>=0;--ay){Z(T[ay])}var aA=0;for(var az=0;az<p.length;++az){aA=Math.max(aA,2*(p[az].points.radius+p[az].points.lineWidth/2))}for(var aw in H){H[aw]+=J.grid.borderWidth;H[aw]=Math.max(aA,H[aw])}}h=ah-H.left-H.right;aa=s-H.bottom-H.top;for(ax=0;ax<aB.length;++ax){l(aB[ax])}if(J.grid.show){for(ax=0;ax<aB.length;++ax){ab(aB[ax])}ae()}au()}function k(az){var aA=az.options,ay=+(aA.min!=null?aA.min:az.datamin),aw=+(aA.max!=null?aA.max:az.datamax),aC=aw-ay;if(aC==0){var ax=aw==0?1:0.01;if(aA.min==null){ay-=ax}if(aA.max==null||aA.min!=null){aw+=ax}}else{var aB=aA.autoscaleMargin;if(aB!=null){if(aA.min==null){ay-=aC*aB;if(ay<0&&az.datamin!=null&&az.datamin>=0){ay=0}}if(aA.max==null){aw+=aC*aB;if(aw>0&&az.datamax!=null&&az.datamax<=0){aw=0}}}}az.min=ay;az.max=aw}function aq(aB){var aH=aB.options;var aC;if(typeof aH.ticks=="number"&&aH.ticks>0){aC=aH.ticks}else{if(aB.direction=="x"){aC=0.3*Math.sqrt(ah)}else{aC=0.3*Math.sqrt(s)}}var aO=(aB.max-aB.min)/aC,aJ,aw,aI,aM,aN,aL,aD;if(aH.mode=="time"){var aE={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};var aF=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var ax=0;if(aH.minTickSize!=null){if(typeof aH.tickSize=="number"){ax=aH.tickSize}else{ax=aH.minTickSize[0]*aE[aH.minTickSize[1]]}}for(var aN=0;aN<aF.length-1;++aN){if(aO<(aF[aN][0]*aE[aF[aN][1]]+aF[aN+1][0]*aE[aF[aN+1][1]])/2&&aF[aN][0]*aE[aF[aN][1]]>=ax){break}}aJ=aF[aN][0];aI=aF[aN][1];if(aI=="year"){aL=Math.pow(10,Math.floor(Math.log(aO/aE.year)/Math.LN10));aD=(aO/aE.year)/aL;if(aD<1.5){aJ=1}else{if(aD<3){aJ=2}else{if(aD<7.5){aJ=5}else{aJ=10}}}aJ*=aL}aB.tickSize=aH.tickSize||[aJ,aI];aw=function(aS){var aX=[],aV=aS.tickSize[0],aY=aS.tickSize[1],aW=new Date(aS.min);var aR=aV*aE[aY];if(aY=="second"){aW.setUTCSeconds(a(aW.getUTCSeconds(),aV))}if(aY=="minute"){aW.setUTCMinutes(a(aW.getUTCMinutes(),aV))}if(aY=="hour"){aW.setUTCHours(a(aW.getUTCHours(),aV))}if(aY=="month"){aW.setUTCMonth(a(aW.getUTCMonth(),aV))}if(aY=="year"){aW.setUTCFullYear(a(aW.getUTCFullYear(),aV))}aW.setUTCMilliseconds(0);if(aR>=aE.minute){aW.setUTCSeconds(0)}if(aR>=aE.hour){aW.setUTCMinutes(0)}if(aR>=aE.day){aW.setUTCHours(0)}if(aR>=aE.day*4){aW.setUTCDate(1)}if(aR>=aE.year){aW.setUTCMonth(0)}var a0=0,aZ=Number.NaN,aT;do{aT=aZ;aZ=aW.getTime();aX.push(aZ);if(aY=="month"){if(aV<1){aW.setUTCDate(1);var aQ=aW.getTime();aW.setUTCMonth(aW.getUTCMonth()+1);var aU=aW.getTime();aW.setTime(aZ+a0*aE.hour+(aU-aQ)*aV);a0=aW.getUTCHours();aW.setUTCHours(0)}else{aW.setUTCMonth(aW.getUTCMonth()+aV)}}else{if(aY=="year"){aW.setUTCFullYear(aW.getUTCFullYear()+aV)}else{aW.setTime(aZ+aR)}}}while(aZ<aS.max&&aZ!=aT);return aX};aM=function(aQ,aT){var aV=new Date(aQ);if(aH.timeformat!=null){return c.plot.formatDate(aV,aH.timeformat,aH.monthNames)}var aR=aT.tickSize[0]*aE[aT.tickSize[1]];var aS=aT.max-aT.min;var aU=(aH.twelveHourClock)?" %p":"";if(aR<aE.minute){fmt="%h:%M:%S"+aU}else{if(aR<aE.day){if(aS<2*aE.day){fmt="%h:%M"+aU}else{fmt="%b %d %h:%M"+aU}}else{if(aR<aE.month){fmt="%b %d"}else{if(aR<aE.year){if(aS<aE.year){fmt="%b"}else{fmt="%b %y"}}else{fmt="%y"}}}}return c.plot.formatDate(aV,fmt,aH.monthNames)}}else{var aP=aH.tickDecimals;var aK=-Math.floor(Math.log(aO)/Math.LN10);if(aP!=null&&aK>aP){aK=aP}aL=Math.pow(10,-aK);aD=aO/aL;if(aD<1.5){aJ=1}else{if(aD<3){aJ=2;if(aD>2.25&&(aP==null||aK+1<=aP)){aJ=2.5;++aK}}else{if(aD<7.5){aJ=5}else{aJ=10}}}aJ*=aL;if(aH.minTickSize!=null&&aJ<aH.minTickSize){aJ=aH.minTickSize}aB.tickDecimals=Math.max(0,aP!=null?aP:aK);aB.tickSize=aH.tickSize||aJ;aw=function(aS){var aU=[];var aV=a(aS.min,aS.tickSize),aR=0,aQ=Number.NaN,aT;do{aT=aQ;aQ=aV+aR*aS.tickSize;aU.push(aQ);++aR}while(aQ<aS.max&&aQ!=aT);return aU};aM=function(aQ,aR){return aQ.toFixed(aR.tickDecimals)}}if(aH.alignTicksWithAxis!=null){var aA=(aB.direction=="x"?ao:T)[aH.alignTicksWithAxis-1];if(aA&&aA.used&&aA!=aB){var aG=aw(aB);if(aG.length>0){if(aH.min==null){aB.min=Math.min(aB.min,aG[0])}if(aH.max==null&&aG.length>1){aB.max=Math.max(aB.max,aG[aG.length-1])}}aw=function(aS){var aT=[],aQ,aR;for(aR=0;aR<aA.ticks.length;++aR){aQ=(aA.ticks[aR].v-aA.min)/(aA.max-aA.min);aQ=aS.min+aQ*(aS.max-aS.min);aT.push(aQ)}return aT};if(aB.mode!="time"&&aH.tickDecimals==null){var az=Math.max(0,-Math.floor(Math.log(aO)/Math.LN10)+1),ay=aw(aB);if(!(ay.length>1&&/\..*0$/.test((ay[1]-ay[0]).toFixed(az)))){aB.tickDecimals=az}}}}aB.tickGenerator=aw;if(c.isFunction(aH.tickFormatter)){aB.tickFormatter=function(aQ,aR){return""+aH.tickFormatter(aQ,aR)}}else{aB.tickFormatter=aM}}function S(aA){aA.ticks=[];var aC=aA.options.ticks,aB=null;if(aC==null||(typeof aC=="number"&&aC>0)){aB=aA.tickGenerator(aA)}else{if(aC){if(c.isFunction(aC)){aB=aC({min:aA.min,max:aA.max})}else{aB=aC}}}var az,aw;for(az=0;az<aB.length;++az){var ax=null;var ay=aB[az];if(typeof ay=="object"){aw=ay[0];if(ay.length>1){ax=ay[1]}}else{aw=ay}if(ax==null){ax=aA.tickFormatter(aw,aA)}aA.ticks[az]={v:aw,label:ax}}}function r(aw,ax){if(aw.options.autoscaleMargin!=null&&ax.length>0){if(aw.options.min==null){aw.min=Math.min(aw.min,ax[0].v)}if(aw.options.max==null&&ax.length>1){aw.max=Math.max(aw.max,ax[ax.length-1].v)}}}function at(){B.clearRect(0,0,ah,s);var ax=J.grid;if(ax.show&&!ax.aboveData){u()}for(var aw=0;aw<p.length;++aw){C(m.drawSeries,[B,p[aw]]);aj(p[aw])}C(m.draw,[B]);if(ax.show&&ax.aboveData){u()}}function o(aw,aD){var az,aC,aB,aA,ay;aA=Y();for(i=0;i<aA.length;++i){az=aA[i];if(az.direction==aD){ay=aD+az.n+"axis";if(!aw[ay]&&az.n==1){ay=aD+"axis"}if(aw[ay]){aC=aw[ay].from;aB=aw[ay].to;break}}}if(!aw[ay]){az=aD=="x"?ao[0]:T[0];aC=aw[aD+"1"];aB=aw[aD+"2"]}if(aC!=null&&aB!=null&&aC>aB){var ax=aC;aC=aB;aB=ax}return{from:aC,to:aB,axis:az}}function u(){var aA;B.save();B.translate(H.left,H.top);if(J.grid.backgroundColor){B.fillStyle=t(J.grid.backgroundColor,aa,0,"rgba(255, 255, 255, 0)");B.fillRect(0,0,h,aa)}var aC=J.grid.markings;if(aC){if(c.isFunction(aC)){var aF=f.getAxes();aF.xmin=aF.xaxis.min;aF.xmax=aF.xaxis.max;aF.ymin=aF.yaxis.min;aF.ymax=aF.yaxis.max;aC=aC(aF)}for(aA=0;aA<aC.length;++aA){var ay=aC[aA],ax=o(ay,"x"),aD=o(ay,"y");if(ax.from==null){ax.from=ax.axis.min}if(ax.to==null){ax.to=ax.axis.max}if(aD.from==null){aD.from=aD.axis.min}if(aD.to==null){aD.to=aD.axis.max}if(ax.to<ax.axis.min||ax.from>ax.axis.max||aD.to<aD.axis.min||aD.from>aD.axis.max){continue}ax.from=Math.max(ax.from,ax.axis.min);ax.to=Math.min(ax.to,ax.axis.max);aD.from=Math.max(aD.from,aD.axis.min);aD.to=Math.min(aD.to,aD.axis.max);if(ax.from==ax.to&&aD.from==aD.to){continue}ax.from=ax.axis.p2c(ax.from);ax.to=ax.axis.p2c(ax.to);aD.from=aD.axis.p2c(aD.from);aD.to=aD.axis.p2c(aD.to);if(ax.from==ax.to||aD.from==aD.to){B.beginPath();B.strokeStyle=ay.color||J.grid.markingsColor;B.lineWidth=ay.lineWidth||J.grid.markingsLineWidth;B.moveTo(ax.from,aD.from);B.lineTo(ax.to,aD.to);B.stroke()}else{B.fillStyle=ay.color||J.grid.markingsColor;B.fillRect(ax.from,aD.to,ax.to-ax.from,aD.from-aD.to)}}}var aF=Y(),aH=J.grid.borderWidth;for(var az=0;az<aF.length;++az){var aw=aF[az],aB=aw.box,aL=aw.tickLength,aI,aG,aK,aE;B.strokeStyle=aw.options.tickColor||c.color.parse(aw.options.color).scale("a",0.22).toString();B.lineWidth=1;if(aw.direction=="x"){aI=0;if(aL=="full"){aG=(aw.position=="top"?0:aa)}else{aG=aB.top-H.top+(aw.position=="top"?aB.height:0)}}else{aG=0;if(aL=="full"){aI=(aw.position=="left"?0:h)}else{aI=aB.left-H.left+(aw.position=="left"?aB.width:0)}}if(!aw.innermost){B.beginPath();aK=aE=0;if(aw.direction=="x"){aK=h}else{aE=aa}if(B.lineWidth==1){aI=Math.floor(aI)+0.5;aG=Math.floor(aG)+0.5}B.moveTo(aI,aG);B.lineTo(aI+aK,aG+aE);B.stroke()}B.beginPath();for(aA=0;aA<aw.ticks.length;++aA){var aJ=aw.ticks[aA].v;aK=aE=0;if(aJ<aw.min||aJ>aw.max||(aL=="full"&&aH>0&&(aJ==aw.min||aJ==aw.max))){continue}if(aw.direction=="x"){aI=aw.p2c(aJ);aE=aL=="full"?-aa:aL;if(aw.position=="top"){aE=-aE}}else{aG=aw.p2c(aJ);aK=aL=="full"?-h:aL;if(aw.position=="left"){aK=-aK}}if(B.lineWidth==1){if(aw.direction=="x"){aI=Math.floor(aI)+0.5}else{aG=Math.floor(aG)+0.5}}B.moveTo(aI,aG);B.lineTo(aI+aK,aG+aE)}B.stroke()}if(aH){B.lineWidth=aH;B.strokeStyle=J.grid.borderColor;B.strokeRect(-aH/2,-aH/2,h+aH,aa+aH)}B.restore()}function ae(){N.find(".tickLabels").remove();var aB=['<div class="tickLabels" style="font-size:smaller">'];var aE=Y();for(var ay=0;ay<aE.length;++ay){var ax=aE[ay],aA=ax.box;aB.push('<div class="'+ax.direction+"Axis "+ax.direction+ax.n+'Axis" style="color:'+ax.options.color+'">');for(var az=0;az<ax.ticks.length;++az){var aC=ax.ticks[az];if(!aC.label||aC.v<ax.min||aC.v>ax.max){continue}var aF={},aD;if(ax.direction=="x"){aD="center";aF.left=Math.round(H.left+ax.p2c(aC.v)-ax.labelWidth/2);if(ax.position=="bottom"){aF.top=aA.top+aA.padding}else{aF.bottom=s-(aA.top+aA.height-aA.padding)}}else{aF.top=Math.round(H.top+ax.p2c(aC.v)-ax.labelHeight/2);if(ax.position=="left"){aF.right=ah-(aA.left+aA.width-aA.padding);aD="right"}else{aF.left=aA.left+aA.padding;aD="left"}}aF.width=ax.labelWidth;var aw=["position:absolute","text-align:"+aD];for(var aG in aF){aw.push(aG+":"+aF[aG]+"px")}aB.push('<div class="tickLabel" style="'+aw.join(";")+'">'+aC.label+"</div>")}aB.push("</div>")}aB.push("</div>");N.append(aB.join(""))}function aj(aw){if(aw.lines.show){D(aw)}if(aw.bars.show){Q(aw)}if(aw.points.show){R(aw)}}function D(az){function ay(aK,aL,aD,aP,aO){var aQ=aK.points,aE=aK.pointsize,aI=null,aH=null;B.beginPath();for(var aJ=aE;aJ<aQ.length;aJ+=aE){var aG=aQ[aJ-aE],aN=aQ[aJ-aE+1],aF=aQ[aJ],aM=aQ[aJ+1];if(aG==null||aF==null){continue}if(aN<=aM&&aN<aO.min){if(aM<aO.min){continue}aG=(aO.min-aN)/(aM-aN)*(aF-aG)+aG;aN=aO.min}else{if(aM<=aN&&aM<aO.min){if(aN<aO.min){continue}aF=(aO.min-aN)/(aM-aN)*(aF-aG)+aG;aM=aO.min}}if(aN>=aM&&aN>aO.max){if(aM>aO.max){continue}aG=(aO.max-aN)/(aM-aN)*(aF-aG)+aG;aN=aO.max}else{if(aM>=aN&&aM>aO.max){if(aN>aO.max){continue}aF=(aO.max-aN)/(aM-aN)*(aF-aG)+aG;aM=aO.max}}if(aG<=aF&&aG<aP.min){if(aF<aP.min){continue}aN=(aP.min-aG)/(aF-aG)*(aM-aN)+aN;aG=aP.min}else{if(aF<=aG&&aF<aP.min){if(aG<aP.min){continue}aM=(aP.min-aG)/(aF-aG)*(aM-aN)+aN;aF=aP.min}}if(aG>=aF&&aG>aP.max){if(aF>aP.max){continue}aN=(aP.max-aG)/(aF-aG)*(aM-aN)+aN;aG=aP.max}else{if(aF>=aG&&aF>aP.max){if(aG>aP.max){continue}aM=(aP.max-aG)/(aF-aG)*(aM-aN)+aN;aF=aP.max}}if(aG!=aI||aN!=aH){B.moveTo(aP.p2c(aG)+aL,aO.p2c(aN)+aD)}aI=aF;aH=aM;B.lineTo(aP.p2c(aF)+aL,aO.p2c(aM)+aD)}B.stroke()}function aA(aD,aL,aK){var aR=aD.points,aQ=aD.pointsize,aI=Math.min(Math.max(0,aK.min),aK.max),aS=0,aP,aO=false,aH=1,aG=0,aM=0;while(true){if(aQ>0&&aS>aR.length+aQ){break}aS+=aQ;var aU=aR[aS-aQ],aF=aR[aS-aQ+aH],aT=aR[aS],aE=aR[aS+aH];if(aO){if(aQ>0&&aU!=null&&aT==null){aM=aS;aQ=-aQ;aH=2;continue}if(aQ<0&&aS==aG+aQ){B.fill();aO=false;aQ=-aQ;aH=1;aS=aG=aM+aQ;continue}}if(aU==null||aT==null){continue}if(aU<=aT&&aU<aL.min){if(aT<aL.min){continue}aF=(aL.min-aU)/(aT-aU)*(aE-aF)+aF;aU=aL.min}else{if(aT<=aU&&aT<aL.min){if(aU<aL.min){continue}aE=(aL.min-aU)/(aT-aU)*(aE-aF)+aF;aT=aL.min}}if(aU>=aT&&aU>aL.max){if(aT>aL.max){continue}aF=(aL.max-aU)/(aT-aU)*(aE-aF)+aF;aU=aL.max}else{if(aT>=aU&&aT>aL.max){if(aU>aL.max){continue}aE=(aL.max-aU)/(aT-aU)*(aE-aF)+aF;aT=aL.max}}if(!aO){B.beginPath();B.moveTo(aL.p2c(aU),aK.p2c(aI));aO=true}if(aF>=aK.max&&aE>=aK.max){B.lineTo(aL.p2c(aU),aK.p2c(aK.max));B.lineTo(aL.p2c(aT),aK.p2c(aK.max));continue}else{if(aF<=aK.min&&aE<=aK.min){B.lineTo(aL.p2c(aU),aK.p2c(aK.min));B.lineTo(aL.p2c(aT),aK.p2c(aK.min));continue}}var aJ=aU,aN=aT;if(aF<=aE&&aF<aK.min&&aE>=aK.min){aU=(aK.min-aF)/(aE-aF)*(aT-aU)+aU;aF=aK.min}else{if(aE<=aF&&aE<aK.min&&aF>=aK.min){aT=(aK.min-aF)/(aE-aF)*(aT-aU)+aU;aE=aK.min}}if(aF>=aE&&aF>aK.max&&aE<=aK.max){aU=(aK.max-aF)/(aE-aF)*(aT-aU)+aU;aF=aK.max}else{if(aE>=aF&&aE>aK.max&&aF<=aK.max){aT=(aK.max-aF)/(aE-aF)*(aT-aU)+aU;aE=aK.max}}if(aU!=aJ){B.lineTo(aL.p2c(aJ),aK.p2c(aF))}B.lineTo(aL.p2c(aU),aK.p2c(aF));B.lineTo(aL.p2c(aT),aK.p2c(aE));if(aT!=aN){B.lineTo(aL.p2c(aT),aK.p2c(aE));B.lineTo(aL.p2c(aN),aK.p2c(aE))}}}B.save();B.translate(H.left,H.top);B.lineJoin="round";var aB=az.lines.lineWidth,aw=az.shadowSize;if(aB>0&&aw>0){B.lineWidth=aw;B.strokeStyle="rgba(0,0,0,0.1)";var aC=Math.PI/18;ay(az.datapoints,Math.sin(aC)*(aB/2+aw/2),Math.cos(aC)*(aB/2+aw/2),az.xaxis,az.yaxis);B.lineWidth=aw/2;ay(az.datapoints,Math.sin(aC)*(aB/2+aw/4),Math.cos(aC)*(aB/2+aw/4),az.xaxis,az.yaxis)}B.lineWidth=aB;B.strokeStyle=az.color;var ax=y(az.lines,az.color,0,aa);if(ax){B.fillStyle=ax;aA(az.datapoints,az.xaxis,az.yaxis)}if(aB>0){ay(az.datapoints,0,0,az.xaxis,az.yaxis)}B.restore()}function R(az){function aC(aI,aH,aP,aF,aN,aO,aL,aE){var aM=aI.points,aD=aI.pointsize;for(var aG=0;aG<aM.length;aG+=aD){var aK=aM[aG],aJ=aM[aG+1];if(aK==null||aK<aO.min||aK>aO.max||aJ<aL.min||aJ>aL.max){continue}B.beginPath();aK=aO.p2c(aK);aJ=aL.p2c(aJ)+aF;if(aE=="circle"){B.arc(aK,aJ,aH,0,aN?Math.PI:Math.PI*2,false)}else{aE(B,aK,aJ,aH,aN)}B.closePath();if(aP){B.fillStyle=aP;B.fill()}B.stroke()}}B.save();B.translate(H.left,H.top);var aB=az.points.lineWidth,ax=az.shadowSize,aw=az.points.radius,aA=az.points.symbol;if(aB>0&&ax>0){var ay=ax/2;B.lineWidth=ay;B.strokeStyle="rgba(0,0,0,0.1)";aC(az.datapoints,aw,null,ay+ay/2,true,az.xaxis,az.yaxis,aA);B.strokeStyle="rgba(0,0,0,0.2)";aC(az.datapoints,aw,null,ay/2,true,az.xaxis,az.yaxis,aA)}B.lineWidth=aB;B.strokeStyle=az.color;aC(az.datapoints,aw,y(az.points,az.color),0,false,az.xaxis,az.yaxis,aA);B.restore()}function ak(aI,aH,aQ,aD,aL,aA,ay,aG,aF,aP,aM,ax){var az,aO,aE,aK,aB,aw,aJ,aC,aN;if(aM){aC=aw=aJ=true;aB=false;az=aQ;aO=aI;aK=aH+aD;aE=aH+aL;if(aO<az){aN=aO;aO=az;az=aN;aB=true;aw=false}}else{aB=aw=aJ=true;aC=false;az=aI+aD;aO=aI+aL;aE=aQ;aK=aH;if(aK<aE){aN=aK;aK=aE;aE=aN;aC=true;aJ=false}}if(aO<aG.min||az>aG.max||aK<aF.min||aE>aF.max){return}if(az<aG.min){az=aG.min;aB=false}if(aO>aG.max){aO=aG.max;aw=false}if(aE<aF.min){aE=aF.min;aC=false}if(aK>aF.max){aK=aF.max;aJ=false}az=aG.p2c(az);aE=aF.p2c(aE);aO=aG.p2c(aO);aK=aF.p2c(aK);if(ay){aP.beginPath();aP.moveTo(az,aE);aP.lineTo(az,aK);aP.lineTo(aO,aK);aP.lineTo(aO,aE);aP.fillStyle=ay(aE,aK);aP.fill()}if(ax>0&&(aB||aw||aJ||aC)){aP.beginPath();aP.moveTo(az,aE+aA);if(aB){aP.lineTo(az,aK+aA)}else{aP.moveTo(az,aK+aA)}if(aJ){aP.lineTo(aO,aK+aA)}else{aP.moveTo(aO,aK+aA)}if(aw){aP.lineTo(aO,aE+aA)}else{aP.moveTo(aO,aE+aA)}if(aC){aP.lineTo(az,aE+aA)}else{aP.moveTo(az,aE+aA)}aP.stroke()}}function Q(ay){function ax(aE,aD,aG,aB,aF,aI,aH){var aJ=aE.points,aA=aE.pointsize;for(var aC=0;aC<aJ.length;aC+=aA){if(aJ[aC]==null){continue}ak(aJ[aC],aJ[aC+1],aJ[aC+2],aD,aG,aB,aF,aI,aH,B,ay.bars.horizontal,ay.bars.lineWidth)}}B.save();B.translate(H.left,H.top);B.lineWidth=ay.bars.lineWidth;B.strokeStyle=ay.color;var aw=ay.bars.align=="left"?0:-ay.bars.barWidth/2;var az=ay.bars.fill?function(aA,aB){return y(ay.bars,ay.color,aA,aB)}:null;ax(ay.datapoints,aw,aw+ay.bars.barWidth,0,az,ay.xaxis,ay.yaxis);B.restore()}function y(ay,aw,ax,aA){var az=ay.fill;if(!az){return null}if(ay.fillColor){return t(ay.fillColor,ax,aA,aw)}var aB=c.color.parse(aw);aB.a=typeof az=="number"?az:0.4;aB.normalize();return aB.toString()}function au(){N.find(".legend").remove();if(!J.legend.show){return}var aC=[],aA=false,aI=J.legend.labelFormatter,aH,aE;for(var az=0;az<p.length;++az){aH=p[az];aE=aH.label;if(!aE){continue}if(az%J.legend.noColumns==0){if(aA){aC.push("</tr>")}aC.push("<tr>");aA=true}if(aI){aE=aI(aE,aH)}aC.push('<td class="legendColorBox"><div style="border:1px solid '+J.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+aH.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+aE+"</td>")}if(aA){aC.push("</tr>")}if(aC.length==0){return}var aG='<table style="font-size:smaller;color:'+J.grid.color+'">'+aC.join("")+"</table>";if(J.legend.container!=null){c(J.legend.container).html(aG)}else{var aD="",ax=J.legend.position,ay=J.legend.margin;if(ay[0]==null){ay=[ay,ay]}if(ax.charAt(0)=="n"){aD+="top:"+(ay[1]+H.top)+"px;"}else{if(ax.charAt(0)=="s"){aD+="bottom:"+(ay[1]+H.bottom)+"px;"}}if(ax.charAt(1)=="e"){aD+="right:"+(ay[0]+H.right)+"px;"}else{if(ax.charAt(1)=="w"){aD+="left:"+(ay[0]+H.left)+"px;"}}var aF=c('<div class="legend">'+aG.replace('style="','style="position:absolute;'+aD+";")+"</div>").appendTo(N);if(J.legend.backgroundOpacity!=0){var aB=J.legend.backgroundColor;if(aB==null){aB=J.grid.backgroundColor;if(aB&&typeof aB=="string"){aB=c.color.parse(aB)}else{aB=c.color.extract(aF,"background-color")}aB.a=1;aB=aB.toString()}var aw=aF.children();c('<div style="position:absolute;width:'+aw.width()+"px;height:"+aw.height()+"px;"+aD+"background-color:"+aB+';"> </div>').prependTo(aF).css("opacity",J.legend.backgroundOpacity)}}}var af=[],j=null;function ap(aD,aB,ay){var aJ=J.grid.mouseActiveRadius,aV=aJ*aJ+1,aT=null,aM=false,aR,aP;for(aR=p.length-1;aR>=0;--aR){if(!ay(p[aR])){continue}var aK=p[aR],aC=aK.xaxis,aA=aK.yaxis,aQ=aK.datapoints.points,aO=aK.datapoints.pointsize,aL=aC.c2p(aD),aI=aA.c2p(aB),ax=aJ/aC.scale,aw=aJ/aA.scale;if(aK.lines.show||aK.points.show){for(aP=0;aP<aQ.length;aP+=aO){var aF=aQ[aP],aE=aQ[aP+1];if(aF==null){continue}if(aF-aL>ax||aF-aL<-ax||aE-aI>aw||aE-aI<-aw){continue}var aH=Math.abs(aC.p2c(aF)-aD),aG=Math.abs(aA.p2c(aE)-aB),aN=aH*aH+aG*aG;if(aN<aV){aV=aN;aT=[aR,aP/aO]}}}if(aK.bars.show&&!aT){var az=aK.bars.align=="left"?0:-aK.bars.barWidth/2,aS=az+aK.bars.barWidth;for(aP=0;aP<aQ.length;aP+=aO){var aF=aQ[aP],aE=aQ[aP+1],aU=aQ[aP+2];if(aF==null){continue}if(p[aR].bars.horizontal?(aL<=Math.max(aU,aF)&&aL>=Math.min(aU,aF)&&aI>=aE+az&&aI<=aE+aS):(aL>=aF+az&&aL<=aF+aS&&aI>=Math.min(aU,aE)&&aI<=Math.max(aU,aE))){aT=[aR,aP/aO]}}}}if(aT){aR=aT[0];aP=aT[1];aO=p[aR].datapoints.pointsize;return{datapoint:p[aR].datapoints.points.slice(aP*aO,(aP+1)*aO),dataIndex:aP,series:p[aR],seriesIndex:aR}}return null}function d(aw){if(J.grid.hoverable){g("plothover",aw,function(ax){return ax.hoverable!=false})}}function G(aw){g("plotclick",aw,function(ax){return ax.clickable!=false})}function g(ax,aw,ay){var az=am.offset(),aC=aw.pageX-az.left-H.left,aA=aw.pageY-az.top-H.top,aE=V({left:aC,top:aA});aE.pageX=aw.pageX;aE.pageY=aw.pageY;var aF=ap(aC,aA,ay);if(aF){aF.pageX=parseInt(aF.series.xaxis.p2c(aF.datapoint[0])+az.left+H.left);aF.pageY=parseInt(aF.series.yaxis.p2c(aF.datapoint[1])+az.top+H.top)}if(J.grid.autoHighlight){for(var aB=0;aB<af.length;++aB){var aD=af[aB];if(aD.auto==ax&&!(aF&&aD.series==aF.series&&aD.point==aF.datapoint)){ag(aD.series,aD.point)}}if(aF){an(aF.series,aF.datapoint,ax)}}N.trigger(ax,[aE,aF])}function U(){if(!j){j=setTimeout(ad,30)}}function ad(){j=null;av.save();av.clearRect(0,0,ah,s);av.translate(H.left,H.top);var ax,aw;for(ax=0;ax<af.length;++ax){aw=af[ax];if(aw.series.bars.show){ai(aw.series,aw.point)}else{ac(aw.series,aw.point)}}av.restore();C(m.drawOverlay,[av])}function an(ay,aw,aA){if(typeof ay=="number"){ay=p[ay]}if(typeof aw=="number"){var az=ay.datapoints.pointsize;aw=ay.datapoints.points.slice(az*aw,az*(aw+1))}var ax=L(ay,aw);if(ax==-1){af.push({series:ay,point:aw,auto:aA});U()}else{if(!aA){af[ax].auto=false}}}function ag(ay,aw){if(ay==null&&aw==null){af=[];U()}if(typeof ay=="number"){ay=p[ay]}if(typeof aw=="number"){aw=ay.data[aw]}var ax=L(ay,aw);if(ax!=-1){af.splice(ax,1);U()}}function L(ay,az){for(var aw=0;aw<af.length;++aw){var ax=af[aw];if(ax.series==ay&&ax.point[0]==az[0]&&ax.point[1]==az[1]){return aw}}return -1}function ac(az,ay){var ax=ay[0],aD=ay[1],aC=az.xaxis,aB=az.yaxis;if(ax<aC.min||ax>aC.max||aD<aB.min||aD>aB.max){return}var aA=az.points.radius+az.points.lineWidth/2;av.lineWidth=aA;av.strokeStyle=c.color.parse(az.color).scale("a",0.5).toString();var aw=1.5*aA,ax=aC.p2c(ax),aD=aB.p2c(aD);av.beginPath();if(az.points.symbol=="circle"){av.arc(ax,aD,aw,0,2*Math.PI,false)}else{az.points.symbol(av,ax,aD,aw,false)}av.closePath();av.stroke()}function ai(az,aw){av.lineWidth=az.bars.lineWidth;av.strokeStyle=c.color.parse(az.color).scale("a",0.5).toString();var ay=c.color.parse(az.color).scale("a",0.5).toString();var ax=az.bars.align=="left"?0:-az.bars.barWidth/2;ak(aw[0],aw[1],aw[2]||0,ax,ax+az.bars.barWidth,0,function(){return ay},az.xaxis,az.yaxis,av,az.bars.horizontal,az.bars.lineWidth)}function t(aE,aw,aC,ax){if(typeof aE=="string"){return aE}else{var aD=B.createLinearGradient(0,aC,0,aw);for(var az=0,ay=aE.colors.length;az<ay;++az){var aA=aE.colors[az];if(typeof aA!="string"){var aB=c.color.parse(ax);if(aA.brightness!=null){aB=aB.scale("rgb",aA.brightness)}if(aA.opacity!=null){aB.a*=aA.opacity}aA=aB.toString()}aD.addColorStop(az/(ay-1),aA)}return aD}}}c.plot=function(g,e,d){var f=new b(c(g),e,d,c.plot.plugins);return f};c.plot.plugins=[];c.plot.formatDate=function(l,f,h){var o=function(d){d=""+d;return d.length==1?"0"+d:d};var e=[];var p=false,j=false;var n=l.getUTCHours();var k=n<12;if(h==null){h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(f.search(/%p|%P/)!=-1){if(n>12){n=n-12}else{if(n==0){n=12}}}for(var g=0;g<f.length;++g){var m=f.charAt(g);if(p){switch(m){case"h":m=""+n;break;case"H":m=o(n);break;case"M":m=o(l.getUTCMinutes());break;case"S":m=o(l.getUTCSeconds());break;case"d":m=""+l.getUTCDate();break;case"m":m=""+(l.getUTCMonth()+1);break;case"y":m=""+l.getUTCFullYear();break;case"b":m=""+h[l.getUTCMonth()];break;case"p":m=(k)?("am"):("pm");break;case"P":m=(k)?("AM"):("PM");break;case"0":m="";j=true;break}if(m&&j){m=o(m);j=false}e.push(m);if(!j){p=false}}else{if(m=="%"){p=true}else{e.push(m)}}}return e.join("")};function a(e,d){return d*Math.floor(e/d)}})(jQuery);function InitializeDiffPanes(){var g=$("#diffBox"),k=g.parent(),a=$(".diffPane",g),b=$(".diffTable",a[0]),f=$(".diffTable",a[1]),e=$("td.line",b),j=e.outerHeight()+1;d();c();$(a[0]).scroll(i);$(a[1]).scroll(h);$(window).resizeComplete(function(){d();c()});function c(){var f=e.length,c=f*j+3;a.hide();var d=$(window).height(),b=d-35;a.show();if(c<b)b=c;b>0&&a.height(b)}function d(){var e=$.browser.msie?document.documentElement.clientWidth:window.innerWidth,d=Math.max(Math.floor(e/2),480)-2,c=Math.max(b.height(),f.height());b.height(c);f.height(c);a.width(d)}function i(d){var b=this.scrollLeft,c=this.scrollTop;if(c!=a[1].scrollTop)a[1].scrollTop=c;if(b!=a[1].scrollLeft)a[1].scrollLeft=b}function h(d){var b=this.scrollLeft,c=this.scrollTop;if(c!=a[0].scrollTop)a[0].scrollTop=c;if(b!=a[0].scrollLeft)a[0].scrollLeft=b}}jQuery.fn.resizeComplete=function(d){var a=this,e=a.height(),g=a.width(),b=false,f;function c(){if(!h()){e=a.height();g=a.width();f=setTimeout(function(){c()},500)}else{clearTimeout(f);d();b=false}}function h(){var b=a.height(),c=a.width();return b==e&&c==g}function i(){if(b)return;if(h())return;b=true;c()}if($.browser.mozilla)a.resize(d);else a.resize(i)};var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={}}a.prototype._create=function(){this.queryUIElements();this._enableBrowsingHistory();this.options.syncEnabled=true;this.theSelectorForHeaderOffset=".top_border";this.extraLeftOffsetForScrollbar=-13;this.extraBottomOffsetForScrollbar=0};a.prototype._init=function(){this._enableTheSplitter();this._bindEvents();this._syncView()};a.prototype._bindEvents=function(){var a=this;$(window).bind("resize.browser",$.proxy(function(){this._syncView();this._setBrowseCodeWidth()},this));this.element.delegate(".browserDir","click",function(c){var b=$(c.target);if(b[0].tagName!="A")b=b.parent();a._toggleTreeNode(b);return false});$("#project_title_row img").load(function(b){a._syncView();return false});this.element.delegate("#widthToggleLink","click",function(b){a._toggleBrowseCodeWidth();return false});this.element.delegate(".browseFile","click",function(c){var b=$(c.target);a._loadFile(b,b.attr("fileId"));return false});this.element.delegate("#previousVersions","change",function(c){var b=$(c.target);a._handleDiffSelection(b)});$(document).delegate("a.oldChangeset","click",function(b){a._handleDiffOlder($(b.target).attr("changesetId"))});this.element.delegate(".vsplitbar","mousedown.diff",this,function(a){a.data._handleSplitterMove(true)});this.element.delegate(".vsplitbar","mouseup.diff",this,function(a){a.data._handleSplitterMove(false)})};a.prototype.setupAndAttachFloatingScrollbar=function(){this.attachedScrollSelector=".FileView";this.attachedContentSelector=".Code span, .Code pre";this.attachedHeightSelector="#rightPane";this._attachFloatingScrollbar()};a.prototype._destroy=function(){$(window).unbind(".browser");this.element.browsingHistory("destroy");$("#OlderVersionsPanel",$(document)).remove()};a.prototype._loadRoot=function(){this.fileContentView.html('<h2 id="beginInstructions">Click an item in the panel on the left to view the contents here.</h2>');$("#OlderVersionsPanel",$(document)).remove();$(".sbsf",this.directoryView).removeClass("sbsf")};a.prototype._findFile=function(){var e,b,a,c,d=$("#FilePath",this.fileContentView);if(d.length==0)return;e=d.val().replace(/%2f/g,"/");b=e.split("/");a=b[0];c=1;if(a.length>0){a+="/"+b[1];c=2}this._loadTree(c,a,b)};a.prototype._loadTree=function(b,a,d){var i=this;if(b!=1)a+="/";a+=d[b];if(b<d.length-1){var f=$("a",this.directoryView).filter(function(){return $(this).attr("path")===a});f.length==1&&this._toggleTreeNode(f,function(){i._loadTree(b+1,a,d)})}else{if(a.indexOf("/$")==0)a=a.substring(3);var c=$("a",this.directoryView).filter(function(){return $(this).attr("fileId")===a}),h=c.parent();h.addClass("sbsf");var e=this.directoryView.offset().top,g=c.length>0?c.offset().top:e;this.directoryView.scrollTop(g-e-5)}};a.prototype._toggleTreeNode=function(c,b){var f=this,e=c.attr("id").substring(3),a=$("#dir"+e+"_span",this.element),g=this.options.listUrl.replace(/xXPathXx/,encodeURIComponent(c.attr("path"))).replace(/xXKeyXx/,escape(e)),d=function(){if(b&&a.css("display")=="block")return;c.children("div:first").toggleClass("sbfc").toggleClass("sbfe");a.css("display",a.css("display")=="block"?"none":"block")};if(a.html()&&a.html()!=""){d();b&&b();return}!b&&this._showLoading();$.ajax({url:g,type:"GET",dataType:"html",success:function(c){a.html(c);d();a.scrollTo();if(b)b();else f._hideLoading()}})};a.prototype._loadFile=function(c,d,e){var a=this,b=c&&c.parent();if(b&&b.hasClass("sbsf"))return;$(".sbsf",this.directoryView).removeClass("sbsf");b&&b.addClass("sbsf");this.fileContentView.empty().css("height","");$("#OlderVersionsPanel",$(document)).remove();this._showLoading();$.ajax({url:this.options.fileUrl,type:"POST",data:{fileId:d},success:function(f){a._hideLoading();$(window).scrollTop(0);a.fileContentView.html(f.IsError?$createFileLoadError(d,a.options.contactUsUrl):f.Html);if(!a.justPopped)a.element.browsingHistory("add",{hash:d},null,c?c.attr("href"):document.location.href);else a.justPopped=false;var b=$(".Code",a.fileContentView),g=$('<div id="fileContent">').appendTo(b);b.children().eq(0).remove().appendTo(g);a._enableTheFloatingViewport();a._showAppropriateImage();a._syncView();a.setupAndAttachFloatingScrollbar();$(".floating-scrollbar-container").scrollLeft(0);e&&e()}})};a.prototype._setBrowseCodeWidth=function(){var d=$("#FileInfoHeading"),a=$("#splitView"),b=$(this.splitView).css("position")=="absolute",c=$(window).width()-3;if(b)$(a).css("left",0).css("width",c).trigger("resize");else $(a).css("width","").trigger("resize");$(window).trigger("scroll");d.width(this.rightPane.width());this._showAppropriateImage()};a.prototype._toggleBrowseCodeWidth=function(){var a=$("#splitView"),b=$(this.splitView).css("position")=="absolute";if(b)$(a).css("position","relative");else $(a).css("position","absolute");this._setBrowseCodeWidth()};a.prototype._showAppropriateImage=function(){var a=$("#splitView").css("position")=="absolute";if(a){$("#expandImage").hide();$("#collapseImage").show()}else{$("#expandImage").show();$("#collapseImage").hide()}};a.prototype._handleDiffSelection=function(d){var c=this,a=d[0],b=$("#FileID",this.element).val();if(a.selectedIndex==1)this._openDiffWindow(this.options.diffUrl.replace(/-1/,encodeURIComponent(b)));else if(a.selectedIndex==2){this._showLoading();$.ajax({url:this.options.changesetsUrl.replace(/-1/,encodeURIComponent(b)),dataType:"json",type:"GET",success:function(a){var d="";if(a&&a.length)for(var b=0;b<a.length;b++)d+='<a href="#" class="oldChangeset" changeSetId="'+a[b].Id+'" onclick="return false;">Commit '+a[b].Id+"</a> by "+$encodeIt(a[b].Author)+" on "+a[b].Date+"<br />";else d="There are no older commits for <br /><strong>"+$("#OlderVersionsPanel #Header").html()+"</strong>";$("#OlderVersionsPanel .Body").html(d);OpenDialog("#OlderVersionsPanel",true,"36em");c._hideLoading()}})}a.selectedIndex=0};a.prototype._handleDiffOlder=function(a){var b=$("#FileID",this.element).val();this._openDiffWindow(this.options.oldDiffUrl.replace(/-1/,encodeURIComponent(b)).replace(/-2/,a));OpenDialog("#OlderVersionsPanel",false);$("body").css("overflow-y","")};a.prototype._openDiffWindow=function(b){var a=window.open(b,"name","height=700,width=1000,toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=1");window.focus&&a.focus()};a.prototype._enableBrowsingHistory=function(){var a=this,b={root:true},c=location.pathname;if(location.hash.length>0){b={hash:location.hash};c=location.pathname+location.hash}this.element.browsingHistory({defaultState:b,defaultUrl:c,popped:function(b){if(b&&b.root)a._loadRoot();else if(b&&b.hash!=null)if(b.hash.length==0)a._loadRoot();else{var c=b.hash;if(b.hash.indexOf("#")==0)c=b.hash.substring(1);a.justPopped=true;a._loadFile(null,c,$.proxy(a._findFile,a))}}})};return a}(a.CodeBrowser);a.SourceCodeBrowser=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.sourceCodeBrowser",new codeplex.ui.SourceCodeBrowser);var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);a.BaseEnhancement.registerContentChange(b.enhance)}b._defaults={maxLength:0};b.enhance=function(){$(".MarkdownEditor").enhancedMarkdownBox()};b.prototype._create=function(){var c=this,d=a.BaseEnhancement.getOptions(this.element);this.options=$.extend({},b._defaults,d,this.options);this.$composer=$("textarea",this.element);this.$preview=$(".preview_tab_content",this.element);this.$mdGuide=$(".markdownGuide",this.element);this.$composeTab=$(".tab_control #Compose",this.element);this.$previewTab=$(".tab_control #Preview",this.element);this.$previewIFrame=$("iframe",this.$preview);this._enhanceTextBox();this.$errorMessage=$(".ErrorMessage",this.element);this.$composeTab.click(function(){return c._showComposeTab()});this.$previewTab.click(function(){return c._showPreviewTab()});$(".MarkdownEditorControls",this.element).markdownToolbar(this.$composer);this._sizeMarkdownEditor()};b.prototype._enhanceTextBox=function(){this.$composer.enhancedTextBox({limit:this.options.maxLength,showCounter:"False",rowState:"",showUnsavedDataAlert:"True",isShowErrorMsg:true,overflowMsg:"Content has been shortened to "+this.options.maxLength+" characters."})};b.prototype.postValidationMessage=function(a){this.$errorMessage.html("").append("<span>"+a+"</span>").show()};b.prototype.validate=function(){if(this.$composer.val().length===0){this.postValidationMessage("Content may not be empty");return false}else if(this.$composer.val().length>this.options.maxLength&&this.options.maxLength!=0){this.postValidationMessage("Content length exceeded the limit ("+this.options.maxLength+")");return false}return true};b.prototype._clearPreview=function(){try{this.$previewIFrame.contents().html("")}catch(a){}};b.prototype.content=function(a){if(a!==undefined){this.$composer.val(a);this._clearPreview()}return this.$composer.val()};b.prototype.displayComposeTab=function(){this.$composeTab.click()};b.prototype._showComposeTab=function(){$(".MarkdownEditorControls",this.element).show();$.browser.msie&&parseInt($.browser.version)==9&&this.$previewIFrame.height(0)};b.prototype.displayPreviewTab=function(){this.$previewTab.click()};b.prototype._showPreviewTab=function(){var b=this,c=this.$composer.val();$(".MarkdownEditorControls",this.element).hide();this._sizePreview();CodePlex.UpdateProgress.displayForPaging(500);$.ajax({url:"/site/api/preview/markdown",type:"POST",data:{code:c},success:function(c){CodePlex.UpdateProgress.hide();if(b.$previewIFrame&&b.$previewIFrame.length>0)a.EnhancedMarkdownOutput.forceSetContentForElement(b.$previewIFrame,c.Message,"_blank");else b.$preview.html(c.Message);$.browser.msie&&parseInt($.browser.version)<10&&setTimeout(function(){b.$preview.hide();b.$preview.show()},0);b.$preview},error:function(a){CodePlex.UpdateProgress.hide()}})};b.prototype.toggleGuide=function(b,a){if(b===undefined)b=this.$mdGuide.css("display")==="none";if(a===undefined)a=false;if(b){this._sizeGuide();a?this.$mdGuide.show():this.$mdGuide.slideDown()}else a?this.$mdGuide.hide():this.$mdGuide.slideUp()};b.prototype._sizeMarkdownEditor=function(){this._sizePreview();this._sizeGuide()};b.prototype._sizeGuide=function(){var a=this.$composer.outerWidth(true);a-=parseInt(this.$mdGuide.css("padding-left"))+parseInt(this.$mdGuide.css("padding-right"))+parseInt(this.$mdGuide.css("border-left"))+parseInt(this.$mdGuide.css("border-right"));this.$mdGuide.width(a)};b.prototype._sizePreview=function(){var a=this.$composer.outerHeight(true),b=this.$composer.outerWidth(true);a-=this._getIntCSS(this.$preview,"padding-top")+this._getIntCSS(this.$preview,"padding-bottom")+this._getIntCSS(this.$preview,"border-top")+this._getIntCSS(this.$preview,"border-bottom");b-=this._getIntCSS(this.$preview,"padding-left")+this._getIntCSS(this.$preview,"padding-right")+this._getIntCSS(this.$preview,"border-left")+this._getIntCSS(this.$preview,"border-right");this.$preview.css("min-height",a);this.$preview.width(b);this.$previewIFrame.css("min-height",a);this.$previewIFrame.width(b)};b.prototype._getIntCSS=function(c,b){var a=parseInt(c.css(b));if(isNaN(a))a=0;return a};return b}(a.BaseEnhancement);a.EnhancedMarkdownBox=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedMarkdownBox",new codeplex.ui.EnhancedMarkdownBox);var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(b){var c=function(d){__extends(c,d);function c(){d.call(this);b.BaseEnhancement.registerContentChange(c.enhance)}c.enhance=function(){var a=$("iframe.markDownOutput");a.enhancedMarkdownOutput();setTimeout(function(){c._verifyEnhancement(1)},1);setTimeout(function(){c._verifyEnhancement(2)},50);setTimeout(function(){c._verifyEnhancement(3)},100);setTimeout(function(){c._verifyEnhancement(4)},200)};c._verifyEnhancement=function(f){for(var b=$("iframe.markDownOutput"),e=b.length,d,a=0;a<e;++a)if(b.eq(a).contents().find("head").html().length==0){logError("Pass #"+f+": iFrame #"+a+" was not enhanced! Data is: "+b.eq(a).attr("data-options-content"));d=$(b.eq(a)).attr("data-options-content");c.forceSetContentForElement(b.eq(a),d)}};c.prototype._create=function(){this.$iFrame=$(this.element);this.data=$(this.$iFrame).attr("data-options-content");this.setContent(this.data);c._triggerSetSize(this.$iFrame)};c.prototype.setContent=function(b,a){if(typeof a==="undefined")a="_parent";c.forceSetContentForElement(this.$iFrame,b,a)};c.forceSetContentForElement=function(b,i,d){if(typeof d==="undefined")d="_parent";var h=b.contents().find("html"),e=b.contents().find("head"),f=b.contents().find("body"),g=a.ui.UrlGenerator.cssUrl("Markdown.css");e.html("");e.append('<link rel="stylesheet" type="text/css" href="'+g+'">');e.append('<base target="'+d+'">');f.html(i);f.hide().show();h.attr("class",$("html").attr("class"));c._triggerSetSize(b)};c._triggerSetSize=function(a){if($.browser.mozilla){a[0].onload=function(){return c._setSize(a)};setTimeout(function(){c._setSize(a)},1e3)}else if($.browser.msie&&parseInt($.browser.version)>8){a.unbind("load").bind("load",function(){c._setSize(a);setTimeout(function(){c._setSize(a)},200)});setTimeout(function(){c._setSize(a)},50)}else if($.browser.msie&&parseInt($.browser.version)<=8)var b=a.contents(),d=self.setInterval(function(){if(b.height()>0||b.html()!=null&&b.html().length==0){clearInterval(d);c._setSize(a)}},50);else if($.browser.webkit)var d=self.setInterval(function(){if(a.contents()[0].styleSheets.length==1){clearInterval(d);c._setSize(a);$("img",a.contents().find("body")).load(function(){c._setSize(a)})}},50);else setTimeout(function(){c._setSize(a)},250)};c._setSize=function(b){var h,d,c,g,f,e;h=b.contents().find("html");d=b.contents().find("body");b.height(0);b.width(0);b.width(b.parent().width());if($.browser.msie&&parseInt($.browser.version)>8)c=d.outerHeight();else if($.browser.msie&&parseInt($.browser.version)<=8)c=b.contents().height();else c=h.outerHeight();e=$.browser.webkit?20:0;g=d.width()>b.width();f=g?a.ui.Constants.SCROLL_BAR_WIDTH:0;b.height(c+e+f)};return c}(b.BaseEnhancement);b.EnhancedMarkdownOutput=c})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedMarkdownOutput",new codeplex.ui.EnhancedMarkdownOutput);var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.apply(this,arguments)}a.prototype._create=function(){this.composer=this.options;this.editor=this.options.parents(".MarkdownEditor:first");this.guide=this.options.siblings(".markdownGuide");this._validateElements();this.bind()};a.prototype.destroy=function(){this.unbind()};a.prototype._validateElements=function(){if(!this.composer||this.composer.length==0)throw"Could not find markdown composer.";if(!this.guide||this.guide.length==0)throw"Could not find markdown syntax guide.";if(!this.editor||this.editor.length==0)throw"Could not find markdown editor.";};a.prototype.bind=function(){this.unbind();this._bindClickEvents();this._bindKeyEvents()};a.prototype._bindClickEvents=function(){var a=this,b=this.element;$(".md_bold",b).click(function(){return a._boldHandler()});$(".md_italics",b).click(function(){return a._italicsHandler()});$(".md_olist",b).click(function(){return a._orderedListHandler()});$(".md_ulist",b).click(function(){return a._unorderedListHandler()});$(".md_link",b).click(function(){return a._linkHandler()});$(".md_img",b).click(function(){return a._imageHandler()});$(".md_quote",b).click(function(){return a._quoteHandler()});$(".md_code",b).click(function(){return a._codeHandler()});$(".md_header",b).click(function(){return a._headerHandler()});$(".md_help",b).click(function(){return a._helpHandler()})};a.prototype._bindKeyEvents=function(){var a=this;this.composer.bind("keydown.markdownToolbar",function(b){var f=b.keyCode,d=String.fromCharCode(f).toLowerCase(),c=false,e=document.activeElement===a.composer[0];if(!e)c=false;else if(b.ctrlKey||b.metaKey){c=true;switch(d){case"b":a._boldHandler();break;case"i":a._italicsHandler();break;case"o":a._orderedListHandler();break;case"u":a._unorderedListHandler();break;case"h":a._headerHandler();break;case"k":a._codeHandler();break;case"q":a._quoteHandler();break;case"l":a._linkHandler();break;case"g":a._imageHandler();break;default:c=false;break}}if(c){b.stopPropagation();b.preventDefault();return false}return true})};a.prototype.unbind=function(){$(".control",this.element).unbind();this.composer.unbind(".markdownToolbar")};a.prototype._boldHandler=function(){this.composer.insertTextAtCaret("__","__");return false};a.prototype._italicsHandler=function(){this.composer.insertTextAtCaret("_","_");return false};a.prototype._orderedListHandler=function(){this.composer.insertTextAtStartOfEachLine("1. ");return false};a.prototype._unorderedListHandler=function(){this.composer.insertTextAtStartOfEachLine("* ");return false};a.prototype._linkHandler=function(){var a;a=this.composer.insertTextAtCaret("[","](http://www.example.com)","TEXT");this.composer.highlightText(a+2,a+24);return false};a.prototype._imageHandler=function(){this.composer.insertTextAtCaret("![Image](",")","http://example.com/logo.jpg");return false};a.prototype._quoteHandler=function(){this.composer.insertTextAtLineStart("> ");return false};a.prototype._codeHandler=function(){this.composer.selectEntireSelectedLine();this.composer.insertTextAtCaret("```\n","\n```","",false);return false};a.prototype._headerHandler=function(){this.composer.insertTextAtLineStart("#");return false};a.prototype._helpHandler=function(){this.editor.enhancedMarkdownBox("toggleGuide");return false};return a}(a.BaseEnhancement);a.MarkdownToolbar=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.markdownToolbar",new codeplex.ui.MarkdownToolbar);/*
* jQuery.splitter.js - two-pane splitter window plugin
*
* version 1.51 (2009/01/09) 
* 
* Dual licensed under the MIT and GPL licenses: 
*   http://www.opensource.org/licenses/mit-license.php 
*   http://www.gnu.org/licenses/gpl.html 
*/
(function(a){a.fn.splitter=function(b){b=b||{};return this.each(function(){var l;function p(b){if(c.outline)l=l||e.clone(false).insertAfter(f);i.css("-webkit-user-select","none");e.addClass(c.activeClass);f._posSplit=f[0][c.pxSplit]-b[c.eventPos];a(document).bind("mousemove",n).bind("mouseup",m)}function n(g){a.browser.msie&&parseInt(a.browser.version)==9&&a(splitView).trigger("resize");var b=f._posSplit+g[c.eventPos];if(c.outline){b=Math.max(0,Math.min(b,d._DA-e._DA));e.css(c.origin,b)}else k(b)}function m(d){e.removeClass(c.activeClass);var b=f._posSplit+d[c.eventPos];if(c.outline){l.remove();l=null;k(b)}i.css("-webkit-user-select","text");a(document).unbind("mousemove",n).unbind("mouseup",m);a.browser.msie&&parseInt(a.browser.version)==9&&a(splitView).trigger("resize")}function k(b){b=Math.max(f._min,d._DA-g._max,Math.min(b,f._max,d._DA-e._DA-g._min));if(b==0)b=250;e._DA=e[0][c.pxSplit];e.css(c.origin,b).css(c.fixed,d._DF);f.css(c.origin,0).css(c.split,b).css(c.fixed,d._DF);g.css(c.origin,b+e._DA).css(c.split,d._DA-e._DA-b).css(c.fixed,d._DF);!a.browser.msie&&i.trigger("resize")}function h(c,d){for(var b=0,a=1;a<arguments.length;a++)b+=Math.max(parseInt(c.css(arguments[a]))||0,0);return b}var r=(b.splitHorizontal?"h":b.splitVertical?"v":b.type)||"v",c=a.extend({activeClass:"active",pxPerKey:8,tabIndex:0,accessKey:""},({v:{keyLeft:39,keyRight:37,cursor:"e-resize",splitbarClass:"vsplitbar",outlineClass:"voutline",type:"v",eventPos:"pageX",origin:"left",split:"width",pxSplit:"offsetWidth",side1:"Left",side2:"Right",fixed:"height",pxFixed:"offsetHeight",side3:"Top",side4:"Bottom"},h:{keyTop:40,keyBottom:38,cursor:"n-resize",splitbarClass:"hsplitbar",outlineClass:"houtline",type:"h",eventPos:"pageY",origin:"top",split:"height",pxSplit:"offsetHeight",side1:"Top",side2:"Bottom",fixed:"width",pxFixed:"offsetWidth",side3:"Left",side4:"Right"}})[r],b),d=a(this).css({position:"relative"}),i=a(">*",d[0]).css({position:"absolute","z-index":"1","-moz-outline-style":"none"}),f=a(i[0]),g=a(i[1]),q=a('<a href="javascript:void(0)"></a>').attr({accessKey:c.accessKey,tabIndex:c.tabIndex,title:c.splitbarClass}).bind(a.browser.opera?"click":"focus",function(){this.focus();e.addClass(c.activeClass)}).bind("keydown",function(d){var b=d.which||d.keyCode,a=b==c["key"+c.side1]?1:b==c["key"+c.side2]?-1:0;a&&k(f[0][c.pxSplit]+a*c.pxPerKey,false)}).bind("blur",function(){e.removeClass(c.activeClass)}),e=a(i[2]||"<div></div>").insertAfter(f).css("z-index","100").append(q).attr({"class":c.splitbarClass,unselectable:"on"}).css({position:"absolute","user-select":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none"}).bind("mousedown",p);/^(auto|default|)$/.test(e.css("cursor"))&&e.css("cursor",c.cursor);e._DA=e[0][c.pxSplit];d._PBF=a.boxModel?h(d,"border"+c.side3+"Width","border"+c.side4+"Width"):0;d._PBA=a.boxModel?h(d,"border"+c.side1+"Width","border"+c.side2+"Width"):0;f._pane=c.side1;g._pane=c.side2;a.each([f,g],function(){this._min=c["min"+this._pane]||h(this,"min-"+c.split);this._max=c["max"+this._pane]||h(this,"max-"+c.split)||9999;this._init=c["size"+this._pane]===true?parseInt(a.curCSS(this[0],c.split)):c["size"+this._pane]});var j=f._init;if(!isNaN(g._init))j=d[0][c.pxSplit]-d._PBA-g._init-e._DA;if(c.cookie){!a.cookie&&alert("jQuery.splitter(): jQuery cookie plugin required");var o=parseInt(a.cookie(c.cookie));if(!isNaN(o))j=o;a(window).bind("unload",function(){var b=String(e.css(c.origin));a.cookie(c.cookie,b,{expires:c.cookieExpires||365,path:c.cookiePath||document.location.pathname})})}if(isNaN(j))j=Math.round((d[0][c.pxSplit]-d._PBA-e._DA)/2);if(c.anchorToWindow){d._hadjust=h(d,"borderTopWidth","borderBottomWidth","marginBottom");d._hmin=Math.max(h(d,"minHeight"),20);a(window).bind("resize",function(){var b=d.offset().top,c=a(window).height();d.css("height",Math.max(c-b-d._hadjust,d._hmin)+"px");!a.browser.msie&&d.trigger("resize")}).trigger("resize")}else c.resizeToWidth&&!a.browser.msie&&a(window).bind("resize",function(){d.trigger("resize")});d.bind("resize",function(b,a){if(b.target!=this)return;d._DF=d[0][c.pxFixed]-d._PBF;d._DA=d[0][c.pxSplit]-d._PBA;if(d._DF<=0||d._DA<=0)return;k(!isNaN(a)?a:!(c.sizeRight||c.sizeBottom)?f[0][c.pxSplit]:d._DA-g[0][c.pxSplit]-e._DA)}).trigger("resize",[j])})}})(jQuery);(function(a){a.fn.hoverDelete=function(b){return this.each(function(){new a.hoverDelete($(this),b)})};a.hoverDelete=function(a,b){this.element=a;this.options=b;this.init()};a.hoverDelete.fn=a.hoverDelete.prototype={};a.hoverDelete.fn.extend=a.hoverDelete.extend=a.extend;a.hoverDelete.fn.extend({init:function(){var a=this,b='<div class="remove" />',d='<img src="'+this.options.inactiveImageUrl+'" title="'+this.options.hoverText+'" />',c='<div class="ClearBoth" />';this.element.append(b).append(c);this.removeElement=this.element.children(".remove");this.removeElement.append(d);this.removeImage=this.removeElement.children("img");this.element.hover(function(){a.removeElement.show()},function(){a.removeElement.hide()});this.removeImage.hover(function(){$(this).attr("src",a.options.activeImageUrl)},function(){$(this).attr("src",a.options.inactiveImageUrl)});this.removeImage.bind("click",this,this.options.callback)}})})(jQuery);var MvcValidation_ClientIds=[],MvcValidation_ErrorLocations=[],MvcValidation_ErrorMessagesContainers=[],MvcValidation_CurrentPropertiesWithErrors=[],MvcValidation_ValidationFunctions=[],MvcValidation_ValidatonElements=[];function MvcValidation_GetClientId(b){for(var a=0;a<MvcValidation_ClientIds.length;a++)if(MvcValidation_ClientIds[a].propertyName==b)return MvcValidation_ClientIds[a].clientId;return b}function MvcValidation_GetErrorLocation(b){for(var a=0;a<MvcValidation_ErrorLocations.length;a++)if(MvcValidation_ErrorLocations[a].propertyName===b)return MvcValidation_ErrorLocations[a].locationId;return null}function MvcValidation_SetText(a,b){var c=document.getElementsByTagName("body")[0].innerText!=undefined?true:false;if(c)a.innerText=b;else a.textContent=b}function MvcValidation_CreateErrorMessagesContainer(a,d){var b=null;if(a){var c=document.createElement("span");c.setAttribute("id","MvcValidation_"+d+"ErrorMessage");if(a.type=="checkbox"&&$("label[for='"+a.id+"']").length==1)b=$("label[for='"+a.id+"']").after(c).next().get(0);else if(a.nextSibling&&a.nextSibling.tagName!="IMG"&&a.type!="file")b=a.parentNode.insertBefore(c,a.nextSibling);else if(a.type=="file"&&!$.browser.msie)b=$(a).parents().css("class","file_input")[0].parentNode.appendChild(c);else b=a.parentNode.appendChild(c);MvcValidation_SetupErrorMessageContainer(b,d);MvcValidation_CurrentPropertiesWithErrors.push(MvcValidation_GetClientId(d))}return b}function MvcValidation_SetupErrorMessageContainer(a,b){if(!a.getAttribute("validationPropertyName")){a.setAttribute("validationPropertyName",b);a.className="ErrorMessage";MvcValidation_ErrorMessagesContainers.push(a)}}function MvcValidation_AddErrorMessage(a,c,d){if(a){var b=document.createElement("span");b.setAttribute("clientError",c);b.setAttribute("id","MvcValidation_"+c+"ErrorMessage"+a.childNodes.length);MvcValidation_SetText(b,d);a.appendChild(b);a.style.display=""}}function MvcValidation_ShowGeneralErrorMessage(c,b){var a=$("#MvcValidation_GeneralErrorMessages")[0];a&&MvcValidation_AddErrorMessage(a,c,b)}function MvcValidation_ShowErrorMessage(a,c){var f=$("#"+MvcValidation_GetClientId(a))[0],d=MvcValidation_GetErrorLocation(a);if(!f&&!d)MvcValidation_ShowGeneralErrorMessage(a,c);else if(d){var e=$("#"+d)[0];MvcValidation_SetupErrorMessageContainer(e,a);MvcValidation_AddErrorMessage(e,a,c)}else{var b=$("#MvcValidation_"+a+"ErrorMessage")[0];if(!b)b=MvcValidation_CreateErrorMessagesContainer(f,a);MvcValidation_AddErrorMessage(b,a,c)}}function MvcValidation_Required(b,d){var a=$("#"+MvcValidation_GetClientId(b))[0];if(a==undefined||a==null)return{propertyName:b,isValid:true,errorMessage:d};if(a.tagName!="INPUT"&&a.tagName!="TEXTAREA"&&a.tagName!="SELECT")throw TypeError();var c=true;if(a.type&&a.type=="checkbox")c=a.checked;else{var e=MvcValidation_NormalizeText(jQuery.trim($(a).val()));c=e.length>0}return{propertyName:b,isValid:c,errorMessage:d}}function MvcValidation_SelectionRequired(b,d){var a=$('input[name="'+MvcValidation_GetClientId(b)+'"]');if(a.length===0)return{propertyName:b,isValid:true,errorMessage:d};a.each(function(){if(this.tagName!=="INPUT"&&(this.type!=="radio"||this.type!=="checkbox"))throw TypeError();});for(var e=false,c=0;c<a.length;c++)if(a[c].checked){e=true;break}return{propertyName:b,isValid:e,errorMessage:d}}function MvcValidation_RequiresFormat(b,g,f,d){var a=$("#"+MvcValidation_GetClientId(b))[0];if(a==undefined||a==null)return{propertyName:b,isValid:true,errorMessage:d};if(a.tagName!="INPUT"&&a.tagName!="TEXTAREA")throw TypeError();var c=true;if(a.type=="checkbox")c=false;else if(a.value.length>0){var e=a.value.match(g);if(f&&e||!f&&!e)c=false}return{propertyName:b,isValid:c,errorMessage:d}}function MvcValidation_RequiresConfirmation(b,d,e,f){var c=$("#"+MvcValidation_GetClientId(b.toString().replace("Confirmation","")))[0],a=$("#"+MvcValidation_GetClientId(b))[0];if(c==undefined||c==null)return{propertyName:b,isValid:true,errorMessage:d};if(a==undefined||a==null)return{propertyName:b,isValid:true,errorMessage:d};if(c.tagName!="INPUT")throw TypeError();if(a.tagName!="INPUT")throw TypeError();var g=f&&a.value==""||!e&&c.value==a.value||e&&c.value.toLowerCase()==a.value.toLowerCase();return{propertyName:b,isValid:g,errorMessage:d}}function MvcValidation_Range(c,e,g,h,i){var a=$("#"+MvcValidation_GetClientId(c))[0];if(a==undefined||a==null)return{propertyName:c,isValid:true,errorMessage:e};if(a.tagName!="INPUT"&&a.tagName!="TEXTAREA")throw TypeError();var b=true;if(!i){var d=parseInt(a.value);if(!isNaN(d)){if(d<g||d>h)b=false}else b=false}else{var f=MvcValidation_NormalizeText(jQuery.trim(a.value));if(f.length<g||f.length>h)b=false}return{propertyName:c,isValid:b,errorMessage:e}}function MvcValidation_NormalizeText(a){if(a.indexOf("\r")>-1){if(a.indexOf("\r\n")>-1)a=a.split("\r\n").join("\n");if(a.indexOf("\r")>-1)a=a.split("\r").join("\n")}return a}function MvcValidation_AddErrors(c,d){var b=$("#MvcValidation.Errors."+c)[0];if(b){var a=document.createElement("span");a.setAttribute("clientError",c);a.setAttribute("id","MvcValidation_"+c+"ErrorMessage"+element.childNodes.length);MvcValidation_SetText(a,d);b.appendChild(a);b.style.display=""}}function MvcValidation_RemoveErrors(a,d){if(a&&a.childNodes&&a.childNodes.length>0)for(var b=a.childNodes.length-1;b>-1;b--){var c=a.childNodes[b];if(c.attributes)if(!d&&c.getAttribute("clientError")||d&&d==c.getAttribute("clientError"))a.removeChild(a.childNodes[b]);else{var f=c.getAttribute("propertiesToObserve");if(f)for(var g=f.split(","),e=0;e<g.length;e++)if(g[e]==d){a.removeChild(a.childNodes[b]);break}}}}function MvcValidation_ClearErrors(b){if(b&&b.length>0)for(var a=0;a<MvcValidation_ErrorMessagesContainers.length;a++){var c=MvcValidation_ErrorMessagesContainers[a];if(b==c.getAttribute("validationPropertyName")){MvcValidation_RemoveErrors(c,b);break}}else for(var a=0;a<MvcValidation_ErrorMessagesContainers.length;a++){var c=MvcValidation_ErrorMessagesContainers[a];MvcValidation_RemoveErrors(c,null)}var d=$("#MvcValidation_GeneralErrorMessages")[0];d&&MvcValidation_RemoveErrors(d,b);MvcValidation_CurrentPropertiesWithErrors=[]}function MvcValidation_Validate(a){return MvcValidation_ValidateInternal(null,a)}function MvcValidation_ValidateInternal(b,g){var d=[];MvcValidation_ClearErrors(b);b&&MvcValidation_ClearErrors(b+"Confirmation");var h=[],e=MvcValidation_FindRequiredValidators(b);if(e)for(var a=0;a<e.length;a++)if(g==undefined||e[a].group==g){var c=e[a].validationFunction();if(c&&!c.isValid){MvcValidation_ShowErrorMessage(c.propertyName,c.errorMessage);h.push(c.propertyName)}}for(var a=0;a<MvcValidation_ValidationFunctions.length;a++){var f=MvcValidation_ValidationFunctions[a];if(g==undefined||f.group==g)!MvcValidation_HasFailedRequiredValidation(h,f.clientId)&&(b==null||b.length>0&&f.clientId==b)&&d.push(f.validationFunction(b!=null))}for(var i=h.length==0,a=0;a<d.length;a++)if(!d[a].isValid){i=false;MvcValidation_ShowErrorMessage(d[a].propertyName,d[a].errorMessage)}MvcValidation_FocusFirstError();return i}function MvcValidation_FocusFirstError(){if(MvcValidation_CurrentPropertiesWithErrors.length===0)return;for(var b=$(":input"),a=0;a<b.length;a++){var c=$(b[a]).attr("id");if($.inArray(c,MvcValidation_CurrentPropertiesWithErrors)>=0){$(b[a]).is(":visible")&&b[a].focus();break}}}function MvcValidation_FindRequiredValidators(b){for(var d=[],c=0;c<MvcValidation_ValidationFunctions.length;c++){var a=MvcValidation_ValidationFunctions[c];(!b&&a.validatorName=="required"||b&&b.length>0&&a.clientId==b&&a.validatorName=="required")&&d.push(a)}return d}function MvcValidation_HasFailedRequiredValidation(b,c){for(var a=0;a<b.length;a++)if(b[a]==c)return true}function MvcValidation_HookupEvents(){for(var b=0;b<MvcValidation_ValidatonElements.length;b++){var a=MvcValidation_ValidatonElements[b];if($("#"+MvcValidation_GetClientId(a))[0])eval('$("#" + MvcValidation_GetClientId("'+a+'")).bind("change", function() { MvcValidation_ValidateInternal("'+a+'"); });');else $('input[name="'+MvcValidation_GetClientId(a)+'"]').each(function(){eval('$(this).bind("change", function() { MvcValidation_ValidateInternal("'+a+'"); });')});if($("#"+MvcValidation_GetClientId(a+"Confirmation"))[0])eval('$("#" + MvcValidation_GetClientId("'+a+'Confirmation")).bind("change", function() { MvcValidation_ValidateInternal("'+a+'"); });')}};(function(a){var b={idPrefix:""};a.fn.rating=function(c){c=a.extend({},b,c);return this.each(function(){new a.rating(this,c)})};a.rating=function(a,b){this.element=a;this.options=b;this.init()};a.rating.fn=a.rating.prototype={};a.rating.fn.extend=a.rating.extend=a.extend;a.rating.fn.extend({init:function(){a(this.element).bind("mouseout",this,this.reset);a(this.element).children(".RatingStar").bind("mouseover",this,this.hoverStar).bind("click",this,this.clickStar)},reset:function(b){var c=parseInt(a("#"+b.data.options.idPrefix+"currentRating").val());b.data.update(c)},hoverStar:function(b){var c=parseInt(a(b.target).attr("d:rating"));b.data.update(c)},clickStar:function(b){var c=a(b.target).attr("d:rating");a("#"+b.data.options.idPrefix+"currentRating").val(c)},update:function(a){this.updateStars(a);this.updateText(a)},updateStars:function(c){for(i=0;i<=5;i++){var b=a("#"+this.options.idPrefix+"Rating_Star_"+(i-1));if(i<=c)b.attr("class","RatingStar FilledRatingStarUser");else b.attr("class","RatingStar EmptyRatingStar")}},updateText:function(b){a("#"+this.options.idPrefix+"ratingName").text(this.getRatingText(b))},getRatingText:function(b){var a;switch(b){case 1:a="Very poor";break;case 2:a="Poor";break;case 3:a="Fair";break;case 4:a="Good";break;case 5:a="Excellent";break;default:a="";break}return a}})})(jQuery);(function(a){a.fn.voting=function(b){return this.each(function(){new a.voting(this,b)})};a.voting=function(a,b){this.element=a;this.workItemId=$(a).attr("d:workItemId");this.options=b;this.init()};a.voting.fn=a.voting.prototype={};a.voting.fn.extend=a.voting.extend=a.extend;a.voting.fn.extend({init:function(){$(this.element).find(".vote").bind("click",this,this.vote);$(this.element).find(".vote_loggedout").bind("click",this,this.login)},vote:function(c){var b=c.data.workItemId;if($("#VotedLabel_WorkItemId"+b).is(":visible"))return false;a.post(c.data.options.voteUrl,{workItemId:b},function(f){if(f.success){var c="#VoteCountLabel_WorkItemId"+b,e="#VoteLink"+b,d="#VotedLabel_WorkItemId"+b,g=parseInt($(c).html());a(c).html(++g);a(d).show();a(e).hide()}});return false},login:function(a){window.location=a.data.options.loginUrl.replace("=-1","="+a.data.workItemId);return false}})})(jQuery);function InitializePullRequestControls(c,b,a,d,f,e){$("input#CancelRequestButton").click(function(){$("#Title").val("");$("#PullRequestDescriptionError").hide();$("#PullRequestTitleError").hide();$("#PullRequestSubMessage").hide();$("#PullRequestForkBranchError").hide();$("#PullRequestProjectBranchError").hide()});$("#ClosePullRequestPanel #CloseOk").click(function(){ClosePullRequest(b,true)});$(".ClosePullRequest").click(function(){$("#NetworkError").hide();$("#PullRequestError").hide();$("#PullRequestForkBranchRow").hide();$("#PullRequestProjectBranchRow").hide();$("#PullRequestTitleRow").hide();$("PullRequestAction").val("close");$("#PullRequestType").val($(this).attr("d:type"));$("#PullRequestName").val($(this).attr("d:name"));$("#PullRequestUser").val($(this).attr("d:user"));$("#PullRequestId").val($(this).attr("d:pullRequestId"));var a=$(this).attr("d:status");$("#PullRequestStatus").val(a);if(a==="4")OpenDialog("#ClosePullRequestPanel",true,"41em");else{if(a==="2"){$("#PullRequestSubMessage").show();$("h2 .Title","#PullRequest").text("Accept Pull Request")}else if(a==="3"){$("#PullRequestSubMessage").hide();$("h2 .Title","#PullRequest").text("Decline Pull Request")}OpenDialog("#PullRequest",true,"50em");if(CodePlex.UI.isIE)setTimeout('$("#Title").select()',100);else $("#Title").select()}return false});$(".UpdatePullRequest").click(function(){var g=$(this).attr("d:type"),f=$(this).attr("d:name"),e=$(this).attr("d:user"),b=$(this).attr("d:pullRequestId");a=a.replace("-1",b);function d(){OpenDialog("#UpdatePullRequestDialog",false);$("#NetworkError").hide();$("#PullRequestError").hide();$("#PullRequestStatus").val(status);$("#PullRequestSubMessage").hide();CodePlex.UpdateProgress.show();$.ajax({type:"POST",url:a,data:{type:g,repo:f,owner:e,pullRequestId:b},success:function(a){if(a.IsError){CodePlex.UpdateProgress.hide();alert(a.Message)}else location.href=a.RedirectUrl}})}function c(){OpenDialog("#UpdatePullRequestDialog",false)}CodePlex.UpdateProgress.show();$.ajaxSetup({cache:false});$("#UpdatePullRequest").load(a,function(){$("#UpdatePullRequestButton").click(d);$("#CancelPullRequestButton").click(c);CodePlex.UpdateProgress.hide();OpenDialog("#UpdatePullRequestDialog",true,"50em")});return false});$(".DeleteNetwork").bind("click",function(){var e=$(this).attr("d:type"),c=$(this).attr("d:name"),b=$(this).attr("d:user"),a=0;if($("#AllNetworkToggle").val()==="UserSocialNetworks")a=1;$("#NetworkError").hide();OpenDialog("#deleteNetworkDialog",true,"30em");$("#deleteNetworkDialog #CloseOk").unbind("click").bind("click",function(){CodePlex.UpdateProgress.show();$.ajax({url:d,data:{type:e,repositoryName:c,owner:b,filterView:a},dataType:"json",type:"DELETE",success:function(a){if(a.IsError){$("#NetworkError").text(a.Message).show();CodePlex.UpdateProgress.hide()}else location.href=a.RedirectUrl}})});return false});$(".SendPullRequest").bind("click",function(){var b,a;b=$(this).attr("href");a=$("#SelectedBranch").val();if(a)window.location.href=b+"?branch="+a;else window.location.href=b;return false});$("#SendRequestButton").bind("click",function(){if($("#PullRequestAction").val()==="send")return SendPullRequest(c,true);else return ClosePullRequest(b,false)});$("#CancelRequestButton").bind("click",function(){OpenDialog("#PullRequest",false);$("#inputText").val("");$("#PullRequestError").hide()});$("#ForkBranch").change(function(){var a=$(this).val(),b=$("#ProjectBranch");if(a=="")return;b.val(a);b.val()!=a&&b.val(["master","default"])})}function Validate(b){var a=true;if(!b&&$("#PullRequestForkBranchRow").is(":visible")&&$("#ForkBranch").val().length==0){$("#PullRequestForkBranchError").text("Please select a branch from your fork.").show();$("#ForkBranch").change(function(){$("#PullRequestForkBranchError").hide();$("#PullRequestProjectBranchError").hide()});a=false}if(!b&&$("#PullRequestProjectBranchRow").is(":visible")&&$("#ProjectBranch").val().length==0){$("#PullRequestProjectBranchError").text("Please select a branch from the project.").show();$("#ProjectBranch").change(function(){$("#PullRequestProjectBranchError").hide()});a=false}if(!b&&$normalizeText($("#inputText").val()).length==0){$("#PullRequestDescriptionError").text("Please enter a comment.").show();$("#inputText").bind("keypress",function(){$("#PullRequestDescriptionError").hide()});a=false}if(!b&&$("#PullRequestTitleRow").is(":visible")&&$normalizeText($("#Title").val()).length==0){$("#PullRequestTitleError").text("Please enter a title.").show();$("#Title").bind("keypress",function(){$("#PullRequestTitleError").hide()});a=false}return a}function ClosePullRequest(b,a){if(!Validate(a))return false;CodePlex.UpdateProgress.show();$.ajax({url:b,data:{type:$("#PullRequestType").val(),repositoryName:$("#PullRequestName").val(),pullRequestId:$("#PullRequestId").val(),owner:$("#PullRequestUser").val(),status:$("#PullRequestStatus").val(),comment:$("#inputText").val(),filterView:$("#FilterView").val()},dataType:"json",type:"DELETE",success:function(b){if(b.IsError){if(a)$("#NetworkError").text(b.Message).show();else $("#ClosePullRequestError").text(b.Message).show();CodePlex.UpdateProgress.hide()}else location.reload(true)}})}function SendPullRequest(a,b){if(!Validate(false))return;CodePlex.UpdateProgress.show();$.post(a,{type:$("#PullRequestType").val(),owner:$("#PullRequestOwner").val(),repositoryName:$("#PullRequestName").val(),title:$("#Title").val(),description:$("#inputText").val(),filterView:$("#FilterView").val(),forkBranch:$("#ForkBranch").val(),projectBranch:$("#ProjectBranch").val()},function(a){if(a.IsError){$("#PullRequestError").text(a.Message).show();CodePlex.UpdateProgress.hide()}else if(b)location.href=a.RedirectUrl;else location.reload(true)},"json")};$(function(){$("a.SignInLink, a#signOutLink").click(function(){var b=$(this).attr("href"),a=window.location.hash.replace(/#/g,"%23");a.length>0&&$(this).attr("href",b+a);return true})});jQuery.fn.visible=function(a){if(a)this.show();else this.hide()};var codeplex;(function(a){(function(b){var a=function(){function a(){}a.addQueryString=function(b,c){var a=b;if(b.indexOf("?")===-1)a+="?";else a+="&";a+=$.param(c);return a};a.redirect=function(a){window.location.href=a};return a}();b.UrlHelper=a})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));var codeplex;(function(a){(function(b){var a=function(){function a(){}a.baseUrl=function(){return location.protocol+"//"+location.hostname};a.cssUrl=function(d){var a,b,c=$("#MasterCss");if(c.length==0)return"";a=c.attr("href").replace("StyleSheet.ashx",d);if($.browser.msie&&a.charAt(0)==="/"){b=a.split("/");a=document.location.protocol+"//"+document.location.host+"/"+b[1]+"/"+b[2]+"/"+b[4]}return a};a.errorReportingUrl=function(){return this.baseUrl()+"/site/api/log/error"};return a}();b.UrlGenerator=a})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));var codeplex;(function(a){(function(a){var b=function(){function b(){}b.TOKEN_NAME="__RequestVerificationToken";b.BACKUP_TOKEN_NAME="__RequestVerificationToken2";b.resetCache=function(){b._antiForgeryToken=undefined;b._backupAntiForgeryTokenName=undefined};b.addTokenToForm=function(a){a.find("input[name="+b.TOKEN_NAME+"]").length===0&&a.append(b._getAntiForgeryTokenFormElements())};b.addTokenToData=function(a){var d=b._getAntiForgeryTokenValue(),c=b._getBackupAntiForgeryTokenNameValue();if(a===null||a===undefined)a={};if(d)a.__RequestVerificationToken=d;if(c)a.__RequestVerificationToken2=c;return a};b.addTokenToUrl=function(e){var d={},c;d[b.TOKEN_NAME]=b._getAntiForgeryTokenValue();c=b._getBackupAntiForgeryTokenNameValue();if(c)d[b.BACKUP_TOKEN_NAME]=c;return a.UrlHelper.addQueryString(e,d)};b._getAntiForgeryTokenValue=function(){if(!b._antiForgeryToken)b._antiForgeryToken=$("input[name="+b.TOKEN_NAME+"]").val();return b._antiForgeryToken};b._getBackupAntiForgeryTokenNameValue=function(){if(!b._backupAntiForgeryTokenName)b._backupAntiForgeryTokenName=$("input[name="+b.BACKUP_TOKEN_NAME+"]").val();return b._backupAntiForgeryTokenName};b._getAntiForgeryTokenFormElements=function(){var a,c;a=$("<input />").attr("type","hidden").attr("name",b.TOKEN_NAME).val(b._getAntiForgeryTokenValue());c=b._getBackupAntiForgeryTokenNameValue();if(c)a=a.add($("<input />").attr("type","hidden").attr("name",b.BACKUP_TOKEN_NAME).val(c));return a};return b}();a.AntiForgery=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));(function(a){var c=a.ajax;a.ajax=function(e,a){var b,d;if(typeof e==="object"){a=e;d=a.url}else d=e;b=a.type?a.type.toLowerCase():"";if(b==="post"||b==="put"||b==="patch"||b==="delete")if(typeof a.data!=="string")a.data=codeplex.ui.AntiForgery.addTokenToData(a.data);else a.url=codeplex.ui.AntiForgery.addTokenToUrl(d);c.call(this,a)};a.fn.addAntiForgeryToken=function(){return this.each(function(){var a=$(this);codeplex.ui.AntiForgery.addTokenToForm(a)})};function b(){$("form").addAntiForgeryToken()}codeplex.ui.BaseEnhancement.registerContentChange(function(){b()});b()})(jQuery);var helpJustClosed=false;$(function(){$.widget("codeplex.keyboardShortcuts",{options:{previousNextItemSuffix:""},_create:function(){this.initialized=false;this._prepareDocumentation()},_init:function(){if(this.initialized)return;$(document).bind("keydown",this,function(a){a.data._handleShortcut(a)}).bind("shortcuts",this,function(a){a.data.open()});this.initialized=true},_handleShortcut:function(a){if($("#ShortcutHelp").is(":visible"))return true;var c=$keyCode(a),e=String.fromCharCode(c).toLowerCase(),b=this.options,d=false,f=a.target.tagName==="INPUT"||a.target.tagName==="TEXTAREA";if((a.ctrlKey||a.metaKey)&&e==="s"&&b.save){b.save();d=true}else if(!a.metaKey&&(e==="o"||c===13)&&b.edit&&!f){b.edit();d=true}else if((e==="j"||!a.metaKey&&e==="p"||!a.altKey&&c===37||!a.altKey&&c===100)&&b.previousItem&&!f){b.previousItem();d=true}else if((!a.metaKey&&e==="k"||!a.metaKey&&e==="n"||!a.altKey&&c===39||!a.altKey&&c===102)&&b.nextItem&&!f){b.nextItem();d=true}else if((e==="i"||a.altKey&&c===38||a.altKey&&c===104)&&b.previousBlock&&!f){b.previousBlock();d=true}else if((e==="m"||a.altKey&&c===40||a.altKey&&c===98)&&b.nextBlock&&!f){b.nextBlock();d=true}else if(c===27&&b.cancel){if(helpJustClosed)helpJustClosed=false;else b.cancel();d=true}else if(!a.metaKey&&e==="r"&&b.addComment&&!f&&!CodePlex.UI.isOpera){b.addComment();d=true}else if(!(a.ctrlKey||a.metaKey)&&e==="c"&&b.createItem&&!f){b.createItem();d=true}else if(a.shiftKey&&c===191&&!f){this.open();d=true}if(d){a.cancelBubble=true;a.returnValue=false;if(a.stopPropagation){a.stopPropagation();a.preventDefault()}return false}return true},_prepareDocumentation:function(){var a="";if(this.options.previousItem)a+='<div id="PreviousItemHelp" class="StandardPaddingBottom">previous'+this.options.previousNextItemSuffix+': <span class="Bold">\u2190</span>, <span class="Bold">j</span>, or <span class="Bold">p</span></div>';if(this.options.nextItem)a+='<div id="NextItemHelp" class="StandardPaddingBottom">next'+this.options.previousNextItemSuffix+': <span class="Bold">\u2192</span>, <span class="Bold">k</span>, or <span class="Bold">n</span></div>';if(this.options.previousBlock)a+='<div id="PreviousBlockHelp" class="StandardPaddingBottom">previous diff block: <span class="Bold">alt + \u2191</span> or <span class="Bold">i</span></div>';if(this.options.nextBlock)a+='<div id="NextBlockHelp" class="StandardPaddingBottom">next diff block: <span class="Bold">alt + \u2193</span> or <span class="Bold">m</span></div>';if(this.options.createItem)a+='<div id="CreateItemHelp" class="StandardPaddingBottom">create new item: <span class="Bold">c</span></div>';if(this.options.edit)a+='<div id="EditItemHelp" class="StandardPaddingBottom">edit: <span class="Bold">o</span> or <span class="Bold">enter</span></div>';if(this.options.addComment)a+='<div id="AddCommentItemHelp" class="StandardPaddingBottom">add a comment: <span class="Bold">r</span></div>';if(this.options.save)a+='<div id="SaveItemHelp" class="StandardPaddingBottom">save: <span class="Bold">ctrl + s</span></div>';if(this.options.cancel)a+='<div id="CancelItemHelp" class="StandardPaddingBottom">cancel: <span class="Bold">esc</span></div>';a+='<div id="HelpItemHelp">show this help dialog: <span class="Bold">?</span></div>';var b=$('<div id="ShortcutHelp" class="modal" style="display:none;"><div class="row"><h2>Keyboard Shortcuts <a class="close" style="cursor:pointer">X</a></h2></div></div>');$('<div class="modal_info" />').appendTo(b).append(a);$("body").append(b)},open:function(){$("#ShortcutHelp").length==0&&this._prepareDocumentation();OpenDialog("#ShortcutHelp",true,"240px")},destroy:function(){$(document).unbind("keydown").unbind("shortcuts");$("#ShortcutHelp").remove();this.initialized=false}})});/*
* imgAreaSelect jQuery plugin
* version 0.9.3
*
* Note:  Microsoft Corporation is not the author of this file.  Microsoft obtained this file from http://odyniec.net/projects/imgareaselect/ under the license which is reproduced below for informational purposes only. Microsoft grants you the right to use this file for the sole purpose of interacting with the www.codeplex.com web site using your web browser, subject to the terms of use at http://www.codeplex.com/Legal/Terms.aspx.  Microsoft reserves all other rights, none of which are granted by implication, estoppel or otherwise. 
*
* Copyright (c) 2008-2010 Michal Wojciechowski (odyniec.net)
*
*
* http://odyniec.net/projects/imgareaselect/
*
*
*
* Copyright 2010, Copyright (c) 2008-2010 Michal Wojciechowski (odyniec.net) http://odyniec.net/projects/imgareaselect/)
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function($){var abs=Math.abs,max=Math.max,min=Math.min,round=Math.round;function div(){return $('<div/>')}$.imgAreaSelect=function(img,options){var $img=$(img),imgLoaded,$box=div(),$area=div(),$border=div().add(div()).add(div()).add(div()),$outer=div().add(div()).add(div()).add(div()),$handles=$([]),$areaOpera,left,top,imgOfs,imgWidth,imgHeight,$parent,parOfs,zIndex=0,position='absolute',startX,startY,scaleX,scaleY,resizeMargin=10,resize,minWidth,minHeight,maxWidth,maxHeight,aspectRatio,shown,x1,y1,x2,y2,selection={x1:0,y1:0,x2:0,y2:0,width:0,height:0},docElem=document.documentElement,$p,d,i,o,w,h,adjusted;function viewX(x){return x+imgOfs.left-parOfs.left}function viewY(y){return y+imgOfs.top-parOfs.top}function selX(x){return x-imgOfs.left+parOfs.left}function selY(y){return y-imgOfs.top+parOfs.top}function evX(event){return event.pageX-parOfs.left}function evY(event){return event.pageY-parOfs.top}function getSelection(noScale){var sx=noScale||scaleX,sy=noScale||scaleY;return{x1:round(selection.x1*sx),y1:round(selection.y1*sy),x2:round(selection.x2*sx),y2:round(selection.y2*sy),width:round(selection.x2*sx)-round(selection.x1*sx),height:round(selection.y2*sy)-round(selection.y1*sy)}}function setSelection(x1,y1,x2,y2,noScale){var sx=noScale||scaleX,sy=noScale||scaleY;selection={x1:round(x1/sx),y1:round(y1/sy),x2:round(x2/sx),y2:round(y2/sy)};selection.width=selection.x2-selection.x1;selection.height=selection.y2-selection.y1}function adjust(){if(!$img.width())return;imgOfs={left:round($img.offset().left),top:round($img.offset().top)};imgWidth=$img.width();imgHeight=$img.height();minWidth=options.minWidth||0;minHeight=options.minHeight||0;maxWidth=min(options.maxWidth||1<<24,imgWidth);maxHeight=min(options.maxHeight||1<<24,imgHeight);if($().jquery=='1.3.2'&&position=='fixed'&&!docElem['getBoundingClientRect']){imgOfs.top+=max(document.body.scrollTop,docElem.scrollTop);imgOfs.left+=max(document.body.scrollLeft,docElem.scrollLeft)}parOfs=$.inArray($parent.css('position'),['absolute','relative'])+1?{left:round($parent.offset().left)-$parent.scrollLeft(),top:round($parent.offset().top)-$parent.scrollTop()}:position=='fixed'?{left:$(document).scrollLeft(),top:$(document).scrollTop()}:{left:0,top:0};left=viewX(0);top=viewY(0);if(selection.x2>imgWidth||selection.y2>imgHeight)doResize()}function update(resetKeyPress){if(!shown)return;$box.css({left:viewX(selection.x1),top:viewY(selection.y1)}).add($area).width(w=selection.width).height(h=selection.height);$area.add($border).add($handles).css({left:0,top:0});$border.width(max(w-$border.outerWidth()+$border.innerWidth(),0)).height(max(h-$border.outerHeight()+$border.innerHeight(),0));$($outer[0]).css({left:left,top:top,width:selection.x1,height:imgHeight});$($outer[1]).css({left:left+selection.x1,top:top,width:w,height:selection.y1});$($outer[2]).css({left:left+selection.x2,top:top,width:imgWidth-selection.x2,height:imgHeight});$($outer[3]).css({left:left+selection.x1,top:top+selection.y2,width:w,height:imgHeight-selection.y2});w-=$handles.outerWidth();h-=$handles.outerHeight();switch($handles.length){case 8:$($handles[4]).css({left:w/2});$($handles[5]).css({left:w,top:h/2});$($handles[6]).css({left:w/2,top:h});$($handles[7]).css({top:h/2});case 4:$handles.slice(1,3).css({left:w});$handles.slice(2,4).css({top:h})}if(resetKeyPress!==false){if($.imgAreaSelect.keyPress!=docKeyPress)$(document).unbind($.imgAreaSelect.keyPress,$.imgAreaSelect.onKeyPress);if(options.keys)$(document)[$.imgAreaSelect.keyPress]($.imgAreaSelect.onKeyPress=docKeyPress)}if($.browser.msie&&$border.outerWidth()-$border.innerWidth()==2){$border.css('margin',0);setTimeout(function(){$border.css('margin','auto')},0)}}function doUpdate(resetKeyPress){adjust();update(resetKeyPress);x1=viewX(selection.x1);y1=viewY(selection.y1);x2=viewX(selection.x2);y2=viewY(selection.y2)}function hide($elem,fn){options.fadeSpeed?$elem.fadeOut(options.fadeSpeed,fn):$elem.hide()}function areaMouseMove(event){var x=selX(evX(event))-selection.x1,y=selY(evY(event))-selection.y1;if(!adjusted){adjust();adjusted=true;$box.one('mouseout',function(){adjusted=false})}resize='';if(options.resizable){if(y<=resizeMargin)resize='n';else if(y>=selection.height-resizeMargin)resize='s';if(x<=resizeMargin)resize+='w';else if(x>=selection.width-resizeMargin)resize+='e'}$box.css('cursor',resize?resize+'-resize':options.movable?'move':'');if($areaOpera)$areaOpera.toggle()}function docMouseUp(event){$('body').css('cursor','');if(options.autoHide||selection.width*selection.height==0)hide($box.add($outer),function(){$(this).hide()});options.onSelectEnd(img,getSelection());$(document).unbind('mousemove',selectingMouseMove);$box.mousemove(areaMouseMove)}function areaMouseDown(event){if(event.which!=1)return false;adjust();if(resize){$('body').css('cursor',resize+'-resize');x1=viewX(selection[/w/.test(resize)?'x2':'x1']);y1=viewY(selection[/n/.test(resize)?'y2':'y1']);$(document).mousemove(selectingMouseMove).one('mouseup',docMouseUp);$box.unbind('mousemove',areaMouseMove)}else if(options.movable){startX=left+selection.x1-evX(event);startY=top+selection.y1-evY(event);$box.unbind('mousemove',areaMouseMove);$(document).mousemove(movingMouseMove).one('mouseup',function(){options.onSelectEnd(img,getSelection());$(document).unbind('mousemove',movingMouseMove);$box.mousemove(areaMouseMove)})}else $img.mousedown(event);return false}function fixAspectRatio(xFirst){if(aspectRatio)if(xFirst){x2=max(left,min(left+imgWidth,x1+abs(y2-y1)*aspectRatio*(x2>x1||-1)));y2=round(max(top,min(top+imgHeight,y1+abs(x2-x1)/aspectRatio*(y2>y1||-1))));x2=round(x2)}else{y2=max(top,min(top+imgHeight,y1+abs(x2-x1)/aspectRatio*(y2>y1||-1)));x2=round(max(left,min(left+imgWidth,x1+abs(y2-y1)*aspectRatio*(x2>x1||-1))));y2=round(y2)}}function doResize(){x1=min(x1,left+imgWidth);y1=min(y1,top+imgHeight);if(abs(x2-x1)<minWidth){x2=x1-minWidth*(x2<x1||-1);if(x2<left)x1=left+minWidth;else if(x2>left+imgWidth)x1=left+imgWidth-minWidth}if(abs(y2-y1)<minHeight){y2=y1-minHeight*(y2<y1||-1);if(y2<top)y1=top+minHeight;else if(y2>top+imgHeight)y1=top+imgHeight-minHeight}x2=max(left,min(x2,left+imgWidth));y2=max(top,min(y2,top+imgHeight));fixAspectRatio(abs(x2-x1)<abs(y2-y1)*aspectRatio);if(abs(x2-x1)>maxWidth){x2=x1-maxWidth*(x2<x1||-1);fixAspectRatio()}if(abs(y2-y1)>maxHeight){y2=y1-maxHeight*(y2<y1||-1);fixAspectRatio(true)}selection={x1:selX(min(x1,x2)),x2:selX(max(x1,x2)),y1:selY(min(y1,y2)),y2:selY(max(y1,y2)),width:abs(x2-x1),height:abs(y2-y1)};update();options.onSelectChange(img,getSelection())}function selectingMouseMove(event){x2=resize==''||/w|e/.test(resize)||aspectRatio?evX(event):viewX(selection.x2);y2=resize==''||/n|s/.test(resize)||aspectRatio?evY(event):viewY(selection.y2);doResize();return false}function doMove(newX1,newY1){x2=(x1=newX1)+selection.width;y2=(y1=newY1)+selection.height;$.extend(selection,{x1:selX(x1),y1:selY(y1),x2:selX(x2),y2:selY(y2)});update();options.onSelectChange(img,getSelection())}function movingMouseMove(event){x1=max(left,min(startX+evX(event),left+imgWidth-selection.width));y1=max(top,min(startY+evY(event),top+imgHeight-selection.height));doMove(x1,y1);event.preventDefault();return false}function startSelection(){adjust();x2=x1;y2=y1;doResize();resize='';if($outer.is(':not(:visible)'))$box.add($outer).hide().fadeIn(options.fadeSpeed||0);shown=true;$(document).unbind('mouseup',cancelSelection).mousemove(selectingMouseMove).one('mouseup',docMouseUp);$box.unbind('mousemove',areaMouseMove);options.onSelectStart(img,getSelection())}function cancelSelection(){$(document).unbind('mousemove',startSelection);hide($box.add($outer));selection={x1:selX(x1),y1:selY(y1),x2:selX(x1),y2:selY(y1),width:0,height:0};options.onSelectChange(img,getSelection());options.onSelectEnd(img,getSelection())}function imgMouseDown(event){if(event.which!=1||$outer.is(':animated'))return false;adjust();startX=x1=evX(event);startY=y1=evY(event);$(document).one('mousemove',startSelection).one('mouseup',cancelSelection);return false}function windowResize(){doUpdate(false)}function imgLoad(){imgLoaded=true;setOptions(options=$.extend({classPrefix:'imgareaselect',movable:true,resizable:true,parent:'body',onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},options));$box.add($outer).css({visibility:''});if(options.show){shown=true;adjust();update();$box.add($outer).hide().fadeIn(options.fadeSpeed||0)}setTimeout(function(){options.onInit(img,getSelection())},0)}var docKeyPress=function(event){var k=options.keys,d,t,key=event.keyCode;d=!isNaN(k.alt)&&(event.altKey||event.originalEvent.altKey)?k.alt:!isNaN(k.ctrl)&&event.ctrlKey?k.ctrl:!isNaN(k.shift)&&event.shiftKey?k.shift:!isNaN(k.arrows)?k.arrows:10;if(k.arrows=='resize'||(k.shift=='resize'&&event.shiftKey)||(k.ctrl=='resize'&&event.ctrlKey)||(k.alt=='resize'&&(event.altKey||event.originalEvent.altKey))){switch(key){case 37:d=-d;case 39:t=max(x1,x2);x1=min(x1,x2);x2=max(t+d,x1);fixAspectRatio();break;case 38:d=-d;case 40:t=max(y1,y2);y1=min(y1,y2);y2=max(t+d,y1);fixAspectRatio(true);break;default:return}doResize()}else{x1=min(x1,x2);y1=min(y1,y2);switch(key){case 37:doMove(max(x1-d,left),y1);break;case 38:doMove(x1,max(y1-d,top));break;case 39:doMove(x1+min(d,imgWidth-selX(x2)),y1);break;case 40:doMove(x1,y1+min(d,imgHeight-selY(y2)));break;default:return}}return false};function styleOptions($elem,props){for(option in props)if(options[option]!==undefined)$elem.css(props[option],options[option])}function setOptions(newOptions){if(newOptions.parent)($parent=$(newOptions.parent)).append($box.add($outer));$.extend(options,newOptions);adjust();if(newOptions.handles!=null){$handles.remove();$handles=$([]);i=newOptions.handles?newOptions.handles=='corners'?4:8:0;while(i--)$handles=$handles.add(div());$handles.addClass(options.classPrefix+'-handle').css({position:'absolute',fontSize:0,zIndex:zIndex+1||1});if(!parseInt($handles.css('width'))>=0)$handles.width(5).height(5);if(o=options.borderWidth)$handles.css({borderWidth:o,borderStyle:'solid'});styleOptions($handles,{borderColor1:'border-color',borderColor2:'background-color',borderOpacity:'opacity'})}scaleX=options.imageWidth/imgWidth||1;scaleY=options.imageHeight/imgHeight||1;if(newOptions.x1!=null){setSelection(newOptions.x1,newOptions.y1,newOptions.x2,newOptions.y2);newOptions.show=!newOptions.hide}if(newOptions.keys)options.keys=$.extend({shift:1,ctrl:'resize'},newOptions.keys);$outer.addClass(options.classPrefix+'-outer');$area.addClass(options.classPrefix+'-selection');for(i=0;i++<4;)$($border[i-1]).addClass(options.classPrefix+'-border'+i);styleOptions($area,{selectionColor:'background-color',selectionOpacity:'opacity'});styleOptions($border,{borderOpacity:'opacity',borderWidth:'border-width'});styleOptions($outer,{outerColor:'background-color',outerOpacity:'opacity'});if(o=options.borderColor1)$($border[0]).css({borderStyle:'solid',borderColor:o});if(o=options.borderColor2)$($border[1]).css({borderStyle:'dashed',borderColor:o});$box.append($area.add($border).add($handles).add($areaOpera));if($.browser.msie){if(o=$outer.css('filter').match(/opacity=([0-9]+)/))$outer.css('opacity',o[1]/100);if(o=$border.css('filter').match(/opacity=([0-9]+)/))$border.css('opacity',o[1]/100)}if(newOptions.hide)hide($box.add($outer));else if(newOptions.show&&imgLoaded){shown=true;$box.add($outer).fadeIn(options.fadeSpeed||0);doUpdate()}aspectRatio=(d=(options.aspectRatio||'').split(/:/))[0]/d[1];$img.add($outer).unbind('mousedown',imgMouseDown);if(options.disable||options.enable===false){$box.unbind('mousemove',areaMouseMove).unbind('mousedown',areaMouseDown);$(window).unbind('resize',windowResize)}else{if(options.enable||options.disable===false){if(options.resizable||options.movable)$box.mousemove(areaMouseMove).mousedown(areaMouseDown);$(window).resize(windowResize)}if(!options.persistent)$img.add($outer).mousedown(imgMouseDown)}options.enable=options.disable=undefined}this.remove=function(){$img.unbind('mousedown',imgMouseDown);$box.add($outer).remove()};this.getOptions=function(){return options};this.setOptions=setOptions;this.getSelection=getSelection;this.setSelection=setSelection;this.update=doUpdate;$p=$img;while($p.length){zIndex=max(zIndex,!isNaN($p.css('z-index'))?$p.css('z-index'):zIndex);if($p.css('position')=='fixed')position='fixed';$p=$p.parent(':not(body)')}zIndex=options.zIndex||zIndex;if($.browser.msie)$img.attr('unselectable','on');$.imgAreaSelect.keyPress=$.browser.msie||$.browser.safari?'keydown':'keypress';if($.browser.opera)$areaOpera=div().css({width:'100%',height:'100%',position:'absolute',zIndex:zIndex+2||2});$box.add($outer).css({visibility:'hidden',position:position,overflow:'hidden',zIndex:zIndex||'0'});$box.css({zIndex:zIndex+2||2});$area.add($border).css({position:'absolute',fontSize:0});img.complete||img.readyState=='complete'||!$img.is('img')?imgLoad():$img.one('load',imgLoad)};$.fn.imgAreaSelect=function(options){options=options||{};this.each(function(){if($(this).data('imgAreaSelect')){if(options.remove){$(this).data('imgAreaSelect').remove();$(this).removeData('imgAreaSelect')}else $(this).data('imgAreaSelect').setOptions(options)}else if(!options.remove){if(options.enable===undefined&&options.disable===undefined)options.enable=true;$(this).data('imgAreaSelect',new $.imgAreaSelect(this,options))}});if(options.instance)return $(this).data('imgAreaSelect');return this}})(jQuery);(function(a){var b={timeoutHandler:null,baseUrl:null,listUrl:null,workItemUrl:null,closeUrl:null,updateUrl:null,onImageUrl:null,offImageUrl:null,statuses:["Proposed","Active","Closed"],types:["Feature","Issue","Task"],impacts:["Unassigned","Low","Medium","High"],releases:["Unassigned"],assignedTo:["Unassigned"],components:["Unassigned"],reasonsClosed:["Unassigned","Fixed"],sortField:null,sortDirection:null};a.fn.advancedList=function(c){c=a.extend({},b,c);return this.each(function(){new a.advancedList(this,c)})};a.advancedList=function(b,a){this.options=a;this.init()};a.advancedList.fn=a.advancedList.prototype={};a.advancedList.fn.extend=a.advancedList.extend=a.extend;a.advancedList.fn.extend({init:function(){a(document).bind("sort",this,function(c,b,a){c.data._sort(b,a)});a(".FilterItem").bind("focus",this,function(a){a.data.options.currentFocus=this});a("select.FilterItem").bind("change",this,function(a){a.data._changeFilter(false)}).bind("keypress",function(a){if($keyCode(a)===13)return false});a("#CreatedByMeCheckBox").bind("change",this,function(a){a.data._changeFilter(false)});a("#RefreshButton").bind("click",this,function(a){a.data._changeFilter(false);return false});a("#KeywordTextBox").bind("keypress",this,function(a){if($keyCode(a)===13){a.data._addKeyword();return false}});a("#KeywordSearchButton").bind("click",this,function(a){a.data._addKeyword()});a("#ResetButton").bind("click",this,function(a){a.data._resetFilter();return false});a("#GoButton").bind("mouseover",this,function(a){a.data._setGoImage(a.data.options.onImageUrl)}).bind("mouseout",this,function(a){a.data._setGoImage(a.data.options.offImageUrl)}).bind("click",this,function(a){a.data._gotoWorkItem();return false});a("#workItemId").bind("keypress",this,function(a){if($keyCode(a)===13){a.data._gotoWorkItem();return false}});a("#ChangeOk").bind("click",this,function(a){a.data._changeItems()});a("#ChangeCancel").bind("click",this,function(a){a.data._cancelChangeItems()});this._bindCheckboxes();this._bindStateObjects()},_sort:function(b,a){var c={page:0,sortField:b,sortDirection:a};this.options.sortField=b;this.options.sortDirection=a;this._postData(c)},_checkMultiFilters:function(){a("#KeywordListBox").val()===null&&a("#KeywordListBox").val("");a("#StatusListBox").val()===null&&a("#StatusListBox").val("Open (not closed)");a("#TypeListBox").val()===null&&a("#TypeListBox").val("All");a("#ImpactListBox").val()===null&&a("#ImpactListBox").val("All");a("#PlannedReleaseListBox").val()===null&&a("#PlannedReleaseListBox").val("All");a("#AssignedToListBox").val()===null&&a("#AssignedToListBox").val("All");a("#ComponentListBox").val()===null&&a("#ComponentListBox").val("All");a("#ReasonClosedListBox").val()===null&&a("#ReasonClosedListBox").val("All")},_changeFilter:function(c){this._checkMultiFilters();var b={page:0,keyword:this._convertArray(a("#KeywordListBox").val()),status:this._convertArray(a("#StatusListBox").val()),type:this._convertArray(a("#TypeListBox").val()),priority:this._convertArray(a("#ImpactListBox").val()),release:this._convertArray(a("#PlannedReleaseListBox").val()),assignedTo:this._convertArray(a("#AssignedToListBox").val()),component:this._convertArray(a("#ComponentListBox").val()),resetHistory:c,onlyMyItems:a("#CreatedByMeCheckBox").is(":checked")};if(a("#ReasonClosedListBox").length==1)b.reasonClosed=this._convertArray(a("#ReasonClosedListBox").val());this._postData(b)},_convertArray:function(c){for(var b=[],a=0;a<c.length;a++)b.push(encodeURIComponent(c[a]));return b.join("|")},_postData:function(d){var b=this,c;a(".FilterItem").attr("disabled","disabled");c=window.setTimeout(b._displayTimeout,2e3);a("#WorkItemsContainer").load(b.options.listUrl,d,function(){a(".FilterItem").removeAttr("disabled");if(c!=null){window.clearTimeout(c);c=null;CodePlex.UpdateProgress.hide();b._bindCheckboxes();b._bindStateObjects();b._updateDirectUrl();if(b.options.currentFocus!=null){a(b.options.currentFocus).focus();b.options.currentFocus=null}}})},_displayTimeout:function(){CodePlex.UpdateProgress.show()},_bindCheckboxes:function(){a("#masterCheckbox").change(function(c){var b=a(this).is(":checked");a(".CheckboxCell:enabled").attr("checked",b).trigger("change")});a(".CheckboxCell").change(function(){var b=a(this),c=b.parent().parent();if(b.is(":checked")){c.addClass("selected_row");b.check();a(".CheckboxCell:enabled").length===a(".CheckboxCell:checked").length&&a("#masterCheckbox").check()}else{b.uncheck();c.removeClass("selected_row");a("#masterCheckbox").uncheck()}if(a(".CheckboxCell:checked").length>0)a(".StateControl").removeAttr("disabled");else a(".StateControl").attr("disabled","disabled")})},_bindStateObjects:function(){a(".StateList").change(function(){a(".StateList").val(a(this).val())});a(".ChangeButton").bind("click",this,function(a){a.data._displayChangeItems()})},_addKeyword:function(){var c=a("#KeywordTextBox").val(),f=a("#KeywordListBox");if(c.length>0){var e=a("#KeywordListBox option"),d=[];d.push(e[0]);d.push(a("<option />").attr("value",c).text(c));for(var b=1;b<5;b++)a(e[b]).val()!==c&&d.push(e[b]);f.empty();for(var b=0;b<d.length;b++)f.append(d[b]);f.val(c);var g={page:0,keyword:c};this._postData(g)}},_resetFilter:function(){a("#KeywordListBox").empty().append(a('<option value="">-- None --</option>')).val("");a("#KeywordTextBox").val("");a("#StatusListBox").val("Open (not closed)");a("#TypeListBox").val("All");a("#ImpactListBox").val("All");a("#PlannedReleaseListBox").val("All");a("#AssignedToListBox").val("All");a("#ComponentListBox").val("All");a("#ReasonClosedListBox").val("All");a("#CreatedByMeCheckBox").attr("checked",false);this._changeFilter(true)},_setGoImage:function(b){a("#GoButton").attr("src",b)},_gotoWorkItem:function(){var b=a("#workItemId").val(),c=a("#goToError").hide();if(b.length===0){c.html("Value required").show();return false}if(!b.match(/\s*[1-9][0-9]*\s*/)){c.html("Please enter a valid work item ID").show();return false}a.get(this.options.workItemUrl.replace(/-1/,a.trim(b)),function(a){if(!a.IsError)return window.location=a.RedirectUrl;else c.html("<br />"+a.Message).show()})},_getCheckedIds:function(){for(var c=a(".CheckboxCell:checked"),d=[],b=0;b<c.length;b++)d.push(a(c[b]).val());return d.join(",")},_displayChangeItems:function(){var e=a(a(".StateList option:selected")[0]).text();a("#ChangeHeaderLabel").text("Change "+e+" to:");a("#ChangeError").hide();var c=a(".StateList").val(),b=[];if(c==="status")b=this.options.statuses;else if(c==="type")b=this.options.types;else if(c==="priority")b=this.options.impacts;else if(c==="release")b=this.options.releases;else if(c==="assignedto")b=this.options.assignedTo;else if(c==="component")b=this.options.components;else if(c==="reasonClosed")b=this.options.reasonsClosed;a("#ClosedCommentArea").remove().appendTo(a("#ClosedCommentAreaContainer"));a("#ChangeContent").empty();for(var f=a("<ul />").addClass("button_wrap modal_content").appendTo(a("#ChangeContent")),d=0;d<b.length;d++)a("<li />").append(a('<input type="radio" name="valueOption" />').attr("id","value_"+d).attr("value",b[d])).append(a("<label />").attr("for","value_"+d).text(b[d])).appendTo(f);a("#ChangeContent input").change(function(){if(a(this).val()=="Closed"&&a(this).is(":checked")){a("#ClosedCommentArea").remove().appendTo(a(this).parent());a("#ChangeValuePanel .modal_content").height("auto");a("#ClosedCommentArea textarea").val("")}else{a("#ClosedCommentArea").remove().appendTo(a("#ClosedCommentAreaContainer"));a("#ChangeValuePanel .modal_content").height("10em")}}).trigger("change");a(document).checkContent();OpenDialog("#ChangeValuePanel",true,"30em");a("#ChangeValuePanel h2 span").text("Change "+e);a("div.ui-dialog").css("overflow","visible");a("body").css("overflow","hidden")},_changeItems:function(){a("#ChangeError").hide();var d=a(".StateList").val(),f=this._getCheckedIds(),e=this,b=a("#ChangeContent input:checked").val();if(b===undefined||b.length===0){a("#ChangeError").show();return}this._cancelChangeItems();CodePlex.UpdateProgress.show();if(d=="status"&&b=="Closed"){var c="";if(a("#workItemReasonClosedDropDown").length>0)c=a("#workItemReasonClosedDropDown").val();a.post(this.options.closeUrl,{workItemId:f,comment:a("#ClosedCommentArea textarea").val(),reasonClosed:c},function(a){e._changeFilter()})}else a.post(this.options.updateUrl.replace(/-1/,d),{workItemIds:f,value:b},function(a){e._changeFilter()})},_cancelChangeItems:function(){OpenDialog("#ChangeValuePanel",false);a("body").css("overflow","visible")},_updateDirectUrl:function(){var b=this.options.baseUrl;b+="?keyword="+this._convertArray(a("#KeywordListBox").val());b+="&status="+this._convertArray(a("#StatusListBox").val());b+="&type="+this._convertArray(a("#TypeListBox").val());b+="&priority="+this._convertArray(a("#ImpactListBox").val());b+="&release="+this._convertArray(a("#PlannedReleaseListBox").val());b+="&assignedTo="+this._convertArray(a("#AssignedToListBox").val());b+="&component="+this._convertArray(a("#ComponentListBox").val());b+="&sortField="+encodeURIComponent(this.options.sortField);b+="&sortDirection="+encodeURIComponent(this.options.sortDirection);b+="&page=0";if(a("#ReasonClosedListBox").length==1)b+="&reasonClosed="+this._convertArray(a("#ReasonClosedListBox").val());a("#DirectSearch").attr("href",b)}})})(jQuery);var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={}}a.prototype._create=function(){this.queryUIElements();this._queryDiffUIElements();this.theSelectorForHeaderOffset=".page_title";this.extraLeftOffsetForScrollbar=0;this.extraBottomOffsetForScrollbar=0;this._populateDirectoryView()};a.prototype._queryDiffUIElements=function(){this.collapseElements=$(".CollapseHorizontal, .CollapseVertical",this.element);this.diffActions=$("#DiffActions",this.element)};a.prototype.setupAndAttachFloatingScrollbar=function(){this.attachedScrollSelector=".FileView .diffPane";this.attachedContentSelector="table.diffTable";this.attachedHeightSelector="#FileContentView";this._attachFloatingScrollbar()};a.prototype._init=function(){this._enableTheSplitter();this._bindEvents();this._syncView();$(this.splitView).css("position","");$(this.fileList).css("position","")};a.prototype._bindEvents=function(){var a=this;this.element.delegate("a.DiffLink","click",this,function(a){a.data._showDiff($(this),true);return false});this.element.delegate("a.SegmentDiffLink","click",this,function(c){var b=a._getFileLink($(this).data("fileId"));c.data._showDiff(b,true);return false});this.element.delegate("#CloseDiff","click",this,function(a){a.data.close();return false});this.element.delegate("#nextDiffImage","click",this,function(a){a.data._goToNextDiff()});this.element.bind("next-diff",this,function(a){a.data._goToNextDiff()});this.element.delegate("#previousDiffImage","click",this,function(a){a.data._goToPreviousDiff()});this.element.bind("previous-diff",this,function(a){a.data._goToPreviousDiff()});this.element.bind("next-file",this,function(a){a.data._goToNextFile()});this.element.bind("previous-file",this,function(a){a.data._goToPreviousFile()});$(window).bind("resize.diff",this,function(a){a.data._syncView()});$(window).bind("hashchanged",this,function(b,a){b.data._handleHashChanged(a)});$(window).bind("scroll.diff",this,function(a){a.data._syncView()});this.element.delegate(".vsplitbar","mousedown.diff",this,function(a){a.data._handleSplitterMove(true)});this.element.delegate(".vsplitbar","mouseup.diff",this,function(a){a.data._handleSplitterMove(false)})};a.prototype._showDiff=function(a,b){this._setupShortcuts();b&&this._addViewToHistory(a);this._makeDiffRequest(a,a.data("fileId"),a.data("branch"),a.data("lineIndex"))};a.prototype.close=function(){this._changeLayout(false);$(document).keyboardShortcuts("destroy");$(document).floatingViewport("destroy");this.options.closed&&this.options.closed()};a.prototype._setupShortcuts=function(){var a=this;$(document).keyboardShortcuts({previousNextItemSuffix:" file",previousItem:function(){a._goToPreviousFile()},nextItem:function(){a._goToNextFile()},previousBlock:function(){a._goToPreviousDiff()},nextBlock:function(){a._goToNextDiff()}})};a.prototype._makeDiffRequest=function(e,c,d,b){var a=this;this._showLoading();$.ajax({url:a.options.diffUrl,type:"POST",data:{fileId:c,branch:d},success:function(d){a._hideLoading();a.options.currentDiffIndex=-1;a.fileContentView.html(d.IsError?'<div id="inlineDiff"><div id="FileView" class="FileView">'+$createFileLoadError(c,a.options.contactUsUrl)+"</div></div>":d.Html);a.splitView.show();a._toggleNextDiffLink();a._togglePreviousDiffLink();a._changeLayout(true);a._selectFile(e);a._enableTheSplitter();a._enableTheFloatingViewport();a.setupAndAttachFloatingScrollbar();if($.browser.msie)setTimeout(function(){a._syncView()},500);else a._syncView();if(b)a._scrollToLine(b);else a._goToNextDiff()}})};a.prototype._selectFile=function(a){$(".sbsf",this.element).removeClass("sbsf");this._getFileLink(a.data("fileId")).parent().addClass("sbsf")};a.prototype._scrollToLine=function(a){if(!a){$(window).scrollTop(0);return}var b=$('tr[data-lineIndex="'+a+'"]',this.fileContentView),c=$("div.FileView",this.element);if(b.length==0||c.length==0)return;$(document).floatingViewport("syncView",b.offset().top)};a.prototype._goToNextDiff=function(){var a=$(".changeStartBlock",this.fileContentView);if(this.options.currentDiffIndex==undefined)this.options.currentDiffIndex=-1;if(this.options.currentDiffIndex+1>a.length-1)return;this.options.currentDiffIndex++;this._updateDiffMarker()};a.prototype._goToPreviousDiff=function(){if(this.options.currentDiffIndex==undefined)this.options.currentDiffIndex=-1;if(this.options.currentDiffIndex-1<0)return;this.options.currentDiffIndex--;this._updateDiffMarker()};a.prototype._updateDiffMarker=function(){var g=$(".changeStartBlock",this.fileContentView),a=g.eq(this.options.currentDiffIndex).parent(),f=$(document);$(".line",this.fileContentView).removeClass("insertedSelected deletedSelected");$(".lineNumber",this.fileContentView).removeClass("insertedLineNumberSelected deletedLineNumberSelected");while(true){var e=$(".lineNumber",a),b=$(".line",a),c=b.hasClass("InsertedLine");e.addClass(c?"insertedLineNumberSelected":"deletedLineNumberSelected");b.addClass(c?"insertedSelected":"deletedSelected");if(b.hasClass("changeEndBlock"))break;a=a.next()}var d=$(".insertedLineNumberSelected, .deletedLineNumberSelected",this.fileContentView);d.length>=1&&f.floatingViewport("syncView",$(d[0]).offset().top);this._toggleNextDiffLink();this._togglePreviousDiffLink();$(document).floatingScrollbar("resetPosition")};a.prototype._toggleNextDiffLink=function(){var b=$(".changeStartBlock",this.fileContentView),a=$("#nextDiffImage",this.element);a.length>0&&this._toggleDiffLink(a,this.options.currentDiffIndex<b.length-1)};a.prototype._togglePreviousDiffLink=function(){var a=$("#previousDiffImage",this.element);a.length>0&&this._toggleDiffLink(a,this.options.currentDiffIndex>0)};a.prototype._toggleDiffLink=function(a,b){a.attr("src",b?a.attr("d:enabledImage"):a.attr("d:disabledImage")).css("cursor",b?"pointer":"default")};a.prototype._goToNextFile=function(){this._goToFile(1)};a.prototype._goToPreviousFile=function(){this._goToFile(-1)};a.prototype._goToFile=function(d){var c=$(".sbsf a.DiffLink",this.fileListView),b=c.data("fileindex"),a=$('a.DiffLink[data-fileindex="'+(b+d)+'"]',this.fileListView);if(a.length==0)return;a.click()};a.prototype._addViewToHistory=function(a){var c=a.attr("href"),b=a.data("lineIndex");if(b!==undefined)c+="+"+b;$(window).browsingHistory("add",{title:document.title,fileId:a.data("fileId")},null,c)};a.prototype._handleHashChanged=function(a){if(!a)return;if(a.fileId){var b=this._getFileLink(a.fileId);this._showDiff(b,false)}};a.prototype._changeLayout=function(a){if(a&&this.options.syncEnabled)return;if(a){this.options.syncEnabled=true;this.collapseElements.hide();this.splitView.show();this.diffActions.show();this.fileList.addClass("leftPane").attr("id","leftPane");this.fileListView.attr("id","DirectoryView").addClass("DirectoryView");this.splitView.parent().attr("id","sourceBrowserContainer");this.splitView.css("position","relative");this.queryUIElements();this._queryDiffUIElements();this._syncView()}else{this.options.syncEnabled=false;this.collapseElements.show();this.splitView.hide();this.diffActions.hide();if($.browser.msie&&parseFloat($.browser.version)<9)this.fileList.removeClass("leftPane").attr("id","").css("position","static").css("width","").css("z-index","");else this.fileList.removeClass("leftPane").attr("id","").removeAttr("style");this.fileListView.attr("id","").removeClass("DirectoryView").removeAttr("style");this.splitView.parent().attr("id","").removeAttr("style");$(".vsplitbar",this.element).remove();$(".sbsf",this.element).removeClass("sbsf");this.element.floatingScrollbar("hide")}};a.prototype._populateDirectoryView=function(){var a=this.directoryView;$(".DiffLink").each(function(){var b=$(this).clone();b.html(b.data("name"));a.append($("<div>").append(b));return b})};a.prototype._getFileLink=function(a){return $("a.DiffLink",this.directoryView).filter(function(){return $(this).data("fileId")===a})};return a}(a.CodeBrowser);a.InlineDiff=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.inlineDiff",new codeplex.ui.InlineDiff);/*
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},i=0,c=0,l=[];function g(g,d,h,e){var c={data:e||(e===0||e===false)?e:d?d.data:{},_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};g&&a.extend(c,g,{nodes:[],parent:d});if(h){c.tmpl=h;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++i;(l.length?f:b)[i]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a(i[h])[d](k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(d,m,k){if(d[0]&&a.isArray(d[0])){var g=a.makeArray(arguments),h=d[0],j=h.length,i=0,f;while(i<j&&!(f=a.data(h[i++],"tmplItem")));if(f&&c)g[2]=function(b){a.tmpl.afterManip(this,b,k)};r.apply(this,g)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var i,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(j(c,null,c.tmpl(a,c)))}if(!d)return[];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);i=a.isArray(h)?a.map(h,function(a){return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(j(c,null,i)):i},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c==="string"?(a.template[c]=b):b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function j(e,g,f){var b,c=f?a.map(f,function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:j(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=k(c).concat(b);if(d)b=b.concat(k(d))});return b?b:k(c)}function k(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,k,g,b,c,d){var j=a.tmpl.tag[k],i,e,f;if(!j)throw"Unknown template tag: "+k;i=j._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=h(b);d=d?","+h(d)+")":c?")":"";e=c?b.indexOf(".")>-1?b+h(c):"("+b+").call($item"+d:b;f=c?e:"(typeof("+b+")==='function'?("+b+").call($item):("+b+"))"}else f=e=i.$1||"null";g=h(g);return"');"+j[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(f).split("$1").join(e).split("$2").join(g||i.$2||"")+"__.push('"})+"');}return __;")}function n(c,b){c._wrap=j(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function h(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,h;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(h=j.length-1;h>=0;h--)m(j[h]);m(k)}function m(j){var p,h=j,k,e,m;if(m=j.getAttribute(d)){while(h.parentNode&&(h=h.parentNode).nodeType===1&&!(p=h.getAttribute(d)));if(p!==m){h=h.parentNode?h.nodeType===11?0:h.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];e=g(e,b[h]||f[h]);e.key=++i;b[i]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;h=a.data(j.parentNode,"tmplItem");h=h?h.key:0}if(e){k=e;while(k&&k.key!=h){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery);var loadingActivityStream=false;CodePlex.ActivityStream=function(){};CodePlex.ActivityStream.init=function(a){this._options=a;$("#loadMore").click(function(){CodePlex.ActivityStream.nextPage();return false});$("#initialloader").hide();$("#loaderMoreActivities").hide()};CodePlex.ActivityStream.showFullComment=function(b){var c=$(b).attr("data-activityId"),a=$("#activity"+c);$(b).hide();$(a).find(".activityShortComment").hide();$(a).find(".activityFullComment").show()};CodePlex.ActivityStream.getActivities=function(a){!loadingActivityStream&&$.ajax({type:"GET",cache:false,url:this._options.activityUrl,data:{page:a,maxActivityId:$("#maxActivityId").val()},beforeSend:function(){loadingActivityStream=true;if(a===1)$("#initialloader").show();else $("#loaderMoreActivities").show()},complete:function(){$("#initialloader").hide();$("#loaderMoreActivities").hide()},success:function(b){$.each(b.UserActivities,function(b,a){a.Comment=a.Comment||"";a.ShortComment=a.ShortComment||""});CodePlex.ActivityStream.loadActivities(b,a);loadingActivityStream=false}})};CodePlex.ActivityStream.loadActivities=function(c,b){var a=parseInt(c.TotalItemCount,10);if(a===0)$("#activityStreamEmptyText").show();else{$("#activityStreamEmptyText").hide();$("#activityTemplate").tmpl(c).appendTo("#activityStreamList");$("#activityStreamList li:first-child").addClass("firstActivity");CodePlex.ActivityStream.incrementPageNum(b)}if(b*this._options.pageSize>=a)$("#loadMore").hide();else $("#loadMore").show().css("display","block");$(".moreCommentLink").click(function(){CodePlex.ActivityStream.showFullComment($(this))})};CodePlex.ActivityStream.nextPage=function(){var a=CodePlex.ActivityStream.getPageNum();CodePlex.ActivityStream.getActivities(a)};CodePlex.ActivityStream.getPageNum=function(){return parseInt($("#loadMore").attr("data-nextPage"),10)};CodePlex.ActivityStream.incrementPageNum=function(a){$("#loadMore").attr("data-nextPage",a+1)};var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.apply(this,arguments);this._$inputControl=null;this._baseClassName=null;this._currentLabelClass=null}a._INSTANCE_DATA_NAME="enhanced-input-instance";a.prototype._init=function(b,c){this._$inputControl=b;this._baseClassName=c;this.element.data(a._INSTANCE_DATA_NAME,this);b.data(a._INSTANCE_DATA_NAME,this);this._$inputControl.focusin($.proxy(this._updateImage,this)).focusout($.proxy(this._updateImage,this));this._updateImage()};a.prototype._updateImage=function(){var a=this._baseClassName;if(this._$inputControl.is(":checked"))a+="_checked";else a+="_unchecked";if(document.activeElement===this._$inputControl[0])a+="_focused";this._currentLabelClass&&this.element.removeClass(this._currentLabelClass);this._currentLabelClass=a;this.element.addClass(a);if(this._$inputControl.is(":disabled"))this.element.addClass(this._baseClassName+"_disabled");else this.element.removeClass(this._baseClassName+"_disabled");return this};a.prototype._updateDependentImages=function(){return this};a.tryGetInstance=function(b){return b.data(a._INSTANCE_DATA_NAME)};return a}(a.BaseEnhancement);a.EnhancedInputBase=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){$.fn.check=function(){return this.each(function(){var a=$(this),b=codeplex.ui.EnhancedInputBase.tryGetInstance(a);a.attr("checked","checked");b._updateImage()._updateDependentImages()})};$.fn.uncheck=function(){return this.each(function(){var a=$(this),b=codeplex.ui.EnhancedInputBase.tryGetInstance(a);a.removeAttr("checked");b._updateImage()._updateDependentImages()})};$.fn.disable=function(){return this.each(function(){var a=$(this),b=codeplex.ui.EnhancedInputBase.tryGetInstance(a);a.attr("disabled","disabled");b._updateImage()._updateDependentImages()})};$.fn.enable=function(){return this.each(function(){var a=$(this),b=codeplex.ui.EnhancedInputBase.tryGetInstance(a);a.removeAttr("disabled");b._updateImage()._updateDependentImages()})}});var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);a.BaseEnhancement.registerContentChange(b.enhance)}b.CHANGED_EVENT_NAME="enhancedRadioButtonChanged";b.prototype._init=function(){if(a.EnhancedInputBase.tryGetInstance(this.element))return;this._$radioButton=this.element.prev("input[type=radio]");if(this._$radioButton.length===0)return;this._groupName=this._$radioButton.attr("name");this._$radioButton.bind(b.CHANGED_EVENT_NAME,$.proxy(this._updateImage,this));this._$radioButton.click($.proxy(this._updateDependentImages,this));c.prototype._init.call(this,this._$radioButton,"radio")};b.prototype._updateDependentImages=function(){$("input[name="+this._groupName+"][type=radio]").trigger(b.CHANGED_EVENT_NAME);return this};b.enhance=function(){$("input[type=radio] + label").enhancedRadioButton()};return b}(a.EnhancedInputBase);a.EnhancedRadioButton=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedRadioButton",new codeplex.ui.EnhancedRadioButton);var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(b){var c=function(d){__extends(c,d);function c(){d.call(this);b.BaseEnhancement.registerContentChange(c.enhance)}c.prototype._init=function(){if(a.ui.EnhancedInputBase.tryGetInstance(this.element))return;this._$checkbox=this.element.prev("input[type=checkbox]");if(this._$checkbox.length===0)return;this._$checkbox.click($.proxy(this._updateImage,this));d.prototype._init.call(this,this._$checkbox,"checkbox")};c.enhance=function(){$("input[type=checkbox] + label").enhancedCheckbox()};return c}(b.EnhancedInputBase);b.EnhancedCheckbox=c})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.enhancedCheckbox",new codeplex.ui.EnhancedCheckbox);(function(a){function b(a){this._$tabControl=a;this._initialize()}a.TabControl=b;b.fn=b.prototype={};b.fn.extend=b.extend=a.extend;b.extend({SELECTED_CLASS_NAME:"selected",CUSTOM_HEADER_ID_DATA_NAME:"custom-header-id",TAB_CONTENTS_ID_DATA_NAME:"tab-contents-id",TAB_CONTENT_ELEMENT_DATA_NAME:"tab-content-element",TAB_SELECTION_CHANGED_EVENT:"tab-selection-changed"});b.fn.extend({_$tabControl:null,_$tabs:null,_initialize:function(){var b=this;this._$tabs=this._$tabControl.find(".tab");this._displayCustomHeaders();this._initializeSelectedTab();this._$tabs.bind("click",function(){b._selectTab(a(this))})},_displayCustomHeaders:function(){this._$tabs.each(function(){var e=a(this),d=e.data(b.CUSTOM_HEADER_ID_DATA_NAME),c;if(d){c=a("#"+d);e.empty().append(c);c.css("display","inline-block")}})},_initializeSelectedTab:function(){var a=this._$tabs.filter(".selected:first");if(a.length===0&&this._$tabs.length!=0)a=this._$tabs.eq(0);this._selectTab(a,true)},_selectTab:function(c,d){if(!c.hasClass(b.SELECTED_CLASS_NAME)){this._$tabs.removeClass(b.SELECTED_CLASS_NAME);var e=a(this._$tabs).css("background-color");a("div.custom_tab_header",this._$tabs).css("background-color",e);c.addClass(b.SELECTED_CLASS_NAME);var f=a(c).css("background-color");a("div.custom_tab_header",c).css("background-color",f);this._displayContentFor(c);this._$tabControl.trigger(b.TAB_SELECTION_CHANGED_EVENT,{selectedTab:c});a(document).checkContent()}else d&&this._displayContentFor(c)},_displayContentFor:function(c){var d=this,b=this._getContentForTab(c);this._$tabs.each(function(){var b=a(this);d._getContentForTab(b).hide()});b.show()},_getContentForTab:function(d){var e,c;c=d.data(b.TAB_CONTENT_ELEMENT_DATA_NAME);if(!c){e=d.data(b.TAB_CONTENTS_ID_DATA_NAME),c=a("#"+e);d.data(b.TAB_CONTENT_ELEMENT_DATA_NAME,c)}return c}});a.fn.enhanceTabs=function(){return this.each(function(){new b(a(this))})};a.fn.bindTabSelectionChanged=function(d){var c=a(this);c.bind(b.TAB_SELECTION_CHANGED_EVENT,d);return this};a(function(){a(".tab_control").enhanceTabs()})})(jQuery);var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);this._loadingContent=false;a.BaseEnhancement.registerContentChange(b.enhance)}b.LAZY_LOAD_CLASS_NAME="lazy_load";b.LAZY_LOAD_CONTENT_CLASS_NAME="lazy_load_content";b.LAZY_CONTENT_LOADED="lazy_content_loaded";b._DEFAULT_BATCH_SIZE=10;b._DEFAULT_BUFFER_SIZE=2;b._DEFAULT_TOLERENCE=0;b._CONTENT_LOADED_CLASS_NAME="lazy_load_content_loaded";b._BUFFER_LOAD_CLASS_NAME="lazy_load_buffered";b._FIRST_ON_SCREEN_CLASS_NAME="first_on_screen_lazy_item";b._LAST_ON_SCREEN_CLASS_NAME="last_on_screen_lazy_item";b.prototype._init=function(){if(!this._options){this._options=a.BaseEnhancement.getOptions(this.element)||{serviceUrl:""};this._batchSize=this._options.batchSize!=undefined?this._options.batchSize:b._DEFAULT_BATCH_SIZE,this._bufferSize=this._options.bufferSize!=undefined?this._options.bufferSize:b._DEFAULT_BUFFER_SIZE,this._tolerence=this._options.tolerence!=undefined?this._options.tolerence:b._DEFAULT_TOLERENCE,$(window).bind("scrollstop",$.proxy(this.loadLazyContent,this));this.element.parents().bind("scrollstop",$.proxy(this.loadLazyContent,this))}this.loadLazyContent()};b.prototype.loadLazyContent=function(){var a=this,c=$.extend({},this._options.options);if(this._loadingContent)return;var b=function(){var d=a._getOnScreenSectionOptions();if(d.length!=0){a._loadingContent=true;c.sectionData=d.splice(0,a._batchSize);$.ajax({type:"POST",url:a._options.serviceUrl,data:JSON.stringify(c),contentType:"application/json",success:function(c){if(c.IsError)alert(c.Message);else a._beginDisplaySectionContent(c.Content,function(){b()})}})}else a._loadingContent=false};setTimeout(function(){b()},1)};b.prototype._getOnScreenSectionOptions=function(){var b=[],c=this._getOnScreenSections();$.each(c,function(e,d){var c;c=a.BaseEnhancement.getOptions(d);c&&b.push(c)});return b};b.prototype._getOnScreenSections=function(){var e,d=[],k=this._batchSize,j=this._bufferSize,g=[],c=$("."+b.LAZY_LOAD_CONTENT_CLASS_NAME,this.element),f=this._getOnScreenIndexes(c);if(f.first!==undefined){for(var a=f.first,i=f.last;a<=i&&d.length!=k;a++){e=c.eq(a);!this._isContentLoaded(e)&&this._addOnScreenResultItem(d,e)}for(var h=0,i=c.length;h<j&&a<i;a++,h++)g.push(c.eq(a))}this._addBufferedItems(d,g);return d};b.prototype._getOnScreenIndexes=function(d){for(var j,a,f,h=-1,g=0,c,e=0,i=d.length;e<i;e++){var c=d.eq(e);if((c.hasClass(b._FIRST_ON_SCREEN_CLASS_NAME)||c.hasClass(b._LAST_ON_SCREEN_CLASS_NAME))&&c.isOnScreen(this._tolerence)){a=e;f=e;h=e;g=e+1;break}}d.removeClass(b._FIRST_ON_SCREEN_CLASS_NAME+" "+b._LAST_ON_SCREEN_CLASS_NAME);for(;h>-1;h--){c=d.eq(h);if(c.isOnScreen(this._tolerence))a=h;else if(a!==undefined)break}for(;g<i;g++){c=d.eq(g);if(c.isOnScreen(this._tolerence)){f=g;if(a===undefined)a=f}else if(f!==undefined)break}if(a){d.eq(a).addClass(b._FIRST_ON_SCREEN_CLASS_NAME);d.eq(f).addClass(b._LAST_ON_SCREEN_CLASS_NAME)}return{first:a,last:f}};b.prototype._addOnScreenResultItem=function(c,a){c.push(a);a.removeClass(b._BUFFER_LOAD_CLASS_NAME)};b.prototype._isContentLoaded=function(a){return a.hasClass(b._CONTENT_LOADED_CLASS_NAME)};b.prototype._addBufferedItems=function(a,f){for(var d=this._batchSize,j=a.length,e=0,i=f.length;e<i;e++){var c=f[e];if(!this._isContentLoaded(c))if(a.length!=d)this._addOnScreenResultItem(a,c);else c.addClass(b._BUFFER_LOAD_CLASS_NAME)}if(a.length<d){var h=this,g=$("."+b._BUFFER_LOAD_CLASS_NAME,this.element);$.each(g,function(){var b=$(this);h._addOnScreenResultItem(a,b);return a.length!==d})}};b.prototype._beginDisplaySectionContent=function(f,d){var g=this,c=0,h=f.length,a,e=function(){if(c<h)window.setTimeout(function(){a=f[c];var d=$("#"+a.ContentId).empty().addClass(b._CONTENT_LOADED_CLASS_NAME);d.html(a.ResultHtml);d.trigger(b.LAZY_CONTENT_LOADED,d);g.triggerContentChange();c+=1;e()},100);else d&&d()};e()};b.enhance=function(){jQuery("."+b.LAZY_LOAD_CLASS_NAME).loadLazyContent()};return b}(a.BaseEnhancement);a.LazyContentLoaderWidget=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));jQuery.widget("CodePlex.loadLazyContent",new codeplex.ui.LazyContentLoaderWidget);(function(a){var b={useDownloadPage:false,_fileUrl:null,_fileId:null,_postUrl:null,_link:null,_redirectToAds:true,_clickOncePath:null};a.fn.release=function(c){c=a.extend({},b,c);return this.each(function(){new a.release(this,c)})};a.release=function(b,a){this.options=a;this.init()};a.release.fn=a.release.prototype={};a.release.fn.extend=a.release.extend=a.extend;a.release.fn.extend({init:function(){},downloadFile:function(b){var a=this;a._link=b;a._parseDownloadData();return a._performDownloadCall()},_parseDownloadData:function(){var b=this,c;if(!b._link)throw"Error: Function must be provided a link object.";b._fileId=a(b._link).attr("d:fileId");b._clickOncePath=a(b._link).attr("d:clickOncePath");b._postUrl=a(b._link).attr("d:postUrl");c=a(b._link).attr("d:redirectToAds");if(!c||c=="true")b._redirectToAds=true;else if(c=="false")b._redirectToAds=false;else throw"Invalid value for ad redirect";if(!b._fileId||!b._postUrl)throw"Error: Download link must be encoded with download attributes.";},_performDownloadCall:function(){var a=this;if(a.UseDownloadPage){window.location=a._fileUrl.replace("downloads/get/0","downloads/get/"+a.fileId);return false}else return a._postDownload()},_postDownload:function(){var b=this,c=false;a.ajax({type:"POST",url:b._postUrl,data:{fileId:b._fileId,clickOncePath:b._clickOncePath,allowRedirectToAds:b._redirectToAds},success:function(d){if(d.IsClickOnce){a(b._link).attr("href",d.RedirectUrl.replace(/'/g,""));c=true}else window.location=d.RedirectUrl},async:false});return c}})})(jQuery);$(function(){function b(c){var a=$(c).parents(".diffPane:first"),b;if(a.length!==0)b=codeplex.ui.BaseEnhancement.getOptions(a);return b}function a(c){var a=$(c).parents(".codeComment:first"),b;if(a.length!==0)b=codeplex.ui.BaseEnhancement.getOptions(a);return b}$.widget("codeplex.pullRequestComments",{options:{watermark:"Add a comment...",canAnnotate:false,repaint:null},_init:function(){this.comments=$("#Comments",this.element);this.commentCount=$(".CommentCount",this.element);this.commentBox=$("#comment_body",this.element);this.commentError=$("#CommentError",this.element);this.isProcessingComment=false;$("#AddComment",this.element).bind("click",this,function(a){a.data._addComment()});this.commentBox.bind("focus",this,function(a){a.data._commentBoxFocus()}).bind("blur",this,function(a){a.data._commentBoxBlur()});this.element.delegate(".diff-comment a","click",this,function(b){var a=$(this).parents(".diff-comment");b.data._showNestedCommentForm(a);return false});this.element.delegate(".diff-comment input[class=ok]","click",this,function(b){var a=$(this).parents(".diff-comment");b.data._addNestedComment(a)});this.element.delegate(".diff-comment input[class=cancel]","click",this,function(b){var a=$(this).parents(".diff-comment");b.data._hideNestedCommentForm(a)});if(this.options.canAnnotate){this.element.delegate(".diff-segment .diff_line, .FileView .diff_line","mouseover",this,function(a){a.data._lineMouseOver($(this))});this.element.delegate(".diff-segment .diff_line, .FileView .diff_line","mouseout",this,function(a){a.data._lineMouseOut($(this))});this.element.delegate(".diff-segment .diff_line td, .FileView .diff_line td","click",this,function(a){a.data._showNoteBox($(this).parent("tr"))});this.element.delegate(".notesRow input.noteButton","click",this,function(d){var a=$(this),b=a.parents("table.diffTable"),c=$("tr.diff_line[data-lineindex="+a.attr("for-index")+"]",b);d.data._showNoteBox(c)});this.element.delegate(".notesRow .noteButtons input.ok","click",this,function(a){a.data._addInlineComment($(this).parents("div.notesEntry"))});this.element.delegate(".notesRow .noteButtons input.cancel","click",this,function(a){a.data._closeNoteBox($(this).parents("tr"))});this.element.delegate(".notesRow .notesEntry textarea","keyup",function(){var a=$(this).parent(),b=$("div.Error",a);$.trim($(this).val()).length>0&&b.hide()})}this._commentBoxBlur();this.element.bind("load",this,function(b,a){b.data._loadComments(a)})},_loadComments:function(c){var b=this,d=c&&c.commentId?c.commentId:null;$.ajax({type:"GET",cache:false,url:this.options.commentsUrl,success:function(e){if(typeof e.Message!="undefined")b.comments.html('<span class="Error">There was an error loading the comments</span>');else{b.comments.html(e);$(".AnnotationLink",b.comments).each(function(){var b=$(this);b.unbind();b.bind("click",function(d){var c=a(b);lineIndex=c.lineIndex,$link=$('.FileList a[id*="viewDiff"]').filter(function(){return $(this).data("fileId")===c.fileId});$link.data("lineIndex",lineIndex);showChanges();$link.trigger("click");$link.removeData("lineIndex");return false})});if(d!=null){var c=$("div[data-activity='"+d+"']",b.comments);c.length==1&&c[0].scrollIntoView()}}b._countComments()}})},_countComments:function(){var b=$("div.activityOuter",this.comments).length,a=$("div.activity_child",this.comments).length;this.commentCount.text(b+a)},_commentBoxFocus:function(){if(this.commentBox.val()!=this.options.watermark)return;this.commentBox.val("").css("color","")},_commentBoxBlur:function(){if(this.commentBox.length==0)return;var a=this.commentBox.val();if(a.length>0&&a!=this.options.watermark)return;this.commentBox.val(this.options.watermark).css("color","#666666")},_addComment:function(){this.commentBox.val()==this.options.watermark&&this.commentBox.val("");if(!MvcValidation_Validate()){this._commentBoxBlur();return}var a=this,b=this.commentBox.val();$.ajax({type:"POST",url:this.options.commentsUrl,data:{body:b},success:function(){a.comments.append(a._buildCommentActivity("activityOuter",b));a._countComments();a.commentBox.val("");a._commentBoxBlur();a.commentError.hide()},error:function(){a.commentError.html('<span class="Error">There was an error trying to save your comment</span>').show()}})},_buildCommentActivity:function(b,c){var a=$('<div class="'+b+'">    <div style="float:left;"><img class="avatar" src="'+this.options.avatarUrl+'" alt="Avatar" title="Avatar" /></div>    <div style="margin-left:75px;word-wrap:break-word;">        <p>            <a href="'+this.options.profileUrl+'" class="UserAvatarLink Bold"></a>            <br /><span style="color: #c0c0c0;">less than a minute ago</span>        </p>        <p class="comment-destination"></p>    </div>    <div class="clear"></div></div>');$(".UserAvatarLink",a).text(this.options.userName);$(".comment-destination",a).html($replaceNewLines($encodeIt(c)));return a},_showNestedCommentForm:function(a){$("a",a).hide();$("fieldset",a).show();$("textarea",a).focus()},_hideNestedCommentForm:function(a){$("a",a).show();$("fieldset",a).hide();$("textarea",a).val("")},_addNestedComment:function(b){if(this.isProcessingComment)return;else this.isProcessingComment=true;var c=this,e=a(b),f=$(".comment-error",b),d=$.extend({container:$("#"+b.data("container"),b.parent()),comment:$("textarea",b).val()},e);this._annotateFile({annotation:d,success:function(){d.container.append(c._buildCommentActivity("activity_child",d.comment));c._hideNestedCommentForm(b);c._countComments();c.append(d);b.css({marginLeft:"75px"});c.isProcessingComment=false},validationError:function(){f.text("Please enter a comment.").show();c.isProcessingComment=false}})},_addInlineComment:function(a){if(this.isProcessingComment)return;else this.isProcessingComment=true;var c=this,f=$("div.Error",a),e=b(a),d=$.extend({comment:$("textarea",a).val(),lineIndex:a.attr("note-box-for")},e);this._annotateFile({annotation:d,success:function(){c._loadComments(null);c.append(d);c._closeNoteBox(a.parents("tr.notesRow"));c.isProcessingComment=false},validationError:function(){f.show();c.isProcessingComment=false}})},_annotateFile:function(b){var a=b.annotation;if(b.validationError&&$.trim(a.comment).length==0){b.validationError();return}CodePlex.UpdateProgress.show();$.ajax({type:"POST",url:this.options.annotationUrl,data:{note:a.comment,lineIndex:a.lineIndex,fileId:a.fileId,primaryId:this.options.pullRequestId,branchName:a.branch},success:function(){CodePlex.UpdateProgress.hide();b.success()}})},append:function(a){var b=this;$("div.diff-segment table.diffTable, div.FileView table.diffTable",this.element).each(function(){var c=$(this);if(c.data("fileId")!==a.fileId||c.data("branch")!==a.branch)return;var d=$("tr[data-lineindex="+a.lineIndex+"]",c);if(d.length==0)return;b._getNotesContainer(c,d,a.lineIndex).append(b._buildCommentActivity("activityOuter pull_request_comments",a.comment))});this._triggerRepaint()},_getNotesRow:function(d,e,a){var b=$("tr[notes-for="+a+"]",d);if(b.length==1)return b;var c=$('<tr class="notesRow" notes-for="'+a+'">  <td class="notesCell"></td>  <td class="notesCell">    <div class="notes" />    <div class="notesEntry" note-box-for="'+a+'" style="display:none;">      <textarea class="noteText" />      <div class="Error" style="display:none;">Comment is required</div>      <div class="noteButtons">        <input type="button" class="ok" value="Add Note" />        <input type="button" class="cancel" value="Cancel" />      </div>    </div>    <input type="button" class="noteButton ok" for-index="'+a+'" value="Add a note" />  </td></tr>');e.after(c);return c},_getNotesContainer:function(b,c,a){return $("div.notes",this._getNotesRow(b,c,a))},_lineMouseOver:function(b){var e=$(".line",b),a=$(".lineNumber",b),d=$(".diffLineNumber",a),c=$("img",a);if(!b.data("lineIndex"))return;b.css("cursor","pointer");if(c.length==0)c=$("<img />").attr("src",this.options.addNoteIconUrl).appendTo(a);d.hide();c.show();a.addClass("lineNumberActive");e.attr("title","Click to add a note for this line").addClass("lineActive")},_lineMouseOut:function(a){var d=$(".line",a),b=$(".lineNumber",a),c=$(".diffLineNumber",b),e=$("img",b);if(!a.data("lineIndex"))return;a.css("cursor","default");c.show();e.hide();b.removeClass("lineNumberActive");d.removeAttr("title").removeClass("lineActive")},_showNoteBox:function(d){var b=d.data("lineIndex");if(!b)return;var e=d.parents("table.diffTable"),i=e.parents(codeplex.ui.FloatingScrollbar.DIFF_SEGMENT_SELECTOR),a=this._getNotesRow(e,d,b),c=$("div[note-box-for="+b+"]",a),g=$("textarea.noteText",c),h=$("div.Error",c),f=$("input.noteButton",a);a.show();c.show();h.hide();f.hide();g.val("").focus();i.floatingScrollbar("resetPosition");this._triggerRepaint()},_closeNoteBox:function(a){var d=$("div.notes",a),c=$("div.notesEntry",a),b=$("input.noteButton",a);c.hide();if(d.is(":empty"))a.hide();else b.show();this._triggerRepaint()},_triggerRepaint:function(){this.options.repaint&&this.options.repaint()}});$(document.body).bind(codeplex.ui.LazyContentLoaderWidget.LAZY_CONTENT_LOADED,function(f,b){var e=$(b),d=$(b).parents(".codeComment:first"),c;if(d.length!==0){c=a(e);$(b).find("tr[data-lineindex="+c.lineIndex+"]").addClass("selectedLine")}})});var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={popped:function(){}}}a._INSTANCE_DATA_NAME="browsing-history";a.prototype._init=function(){var d=this,b=$(window);if(b.data(a._INSTANCE_DATA_NAME))return;b.bind("popstate.history",$.proxy(function(a){var b=a.originalEvent?a.originalEvent.state:null;d._triggerPop(b)},this));this._isUnsupportedInternetExplorer()&&b.bind("hashchange.history",$.proxy(this._handleLegacy,this));var c=window.location.hash;this.options.defaultState&&this.replace(this.options.defaultState,null,this.options.defaultUrl);c.length>0&&this._triggerPop({hash:c});b.data(a._INSTANCE_DATA_NAME,this)};a.prototype._handleLegacy=function(){if(this.lastHash==null||this.lastHash!=null&&window.location.hash!=this.lastHash){this.lastHash=window.location.hash;this._triggerPop({hash:this.lastHash})}};a.prototype._isUnsupportedInternetExplorer=function(){return $.browser.msie&&parseInt($.browser.version)<10};a.prototype._triggerPop=function(a){this.options.popped(a);$(window).trigger("hashchanged",a)};a.prototype.add=function(c,d,a){if(window.history&&window.history.pushState)window.history.pushState(c,d,a);else if(this._isUnsupportedInternetExplorer()){var b=a.indexOf("#");if(b>=0)window.location.hash=this.lastHash=a.substring(b)}};a.prototype.replace=function(a,b,c){window.history&&window.history.replaceState&&window.history.replaceState(a,b,c)};a.prototype.destroy=function(){$(window).unbind(".history").data(a._INSTANCE_DATA_NAME,null)};return a}(a.BaseEnhancement);a.BrowsingHistory=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.browsingHistory",new codeplex.ui.BrowsingHistory);$(function(){$.widget("codeplex.floatingViewport",{options:{splitter:null,floatingElements:[],selectorForHeaderOffset:".page_title",repaint:null,disableSync:false},_create:function(){this.window=$(window);this.header=$(".floating_header",this.element);this.fakeHeaderBackground=$("<div />").addClass("floating_header_background").css("background","white").css("width","100%").css("left",0).css("position","fixed").css("z-index",147).hide().insertAfter(this.header);this.fakeHeader=$("<div />").addClass("floating_header_fake").hide().insertAfter(this.header);this.fakeSplitter=$("<div />").addClass("floating_splitter_fake").css("width","3px").css("background","#AAA").css("z-index",0).css("position","fixed").hide().appendTo("body")},_init:function(){if(this.initialized)return;this.headerOriginalPosition=this.header.offset();this.headerOriginalWidth=this.header.width();this.headerOriginalHeight=this.header.height();this.topMargin=parseInt($(this.options.selectorForHeaderOffset,this.header).css("margin-top"))||0;this.window.bind("scroll.floating",this,function(a){a.data.syncView()});this.window.bind("resize.floating",this,function(a){a.data.syncView()});if(this.options.splitter){this.options.splitter.bind("mousedown.floating",this,function(a){a.data._handleSplitter(true)});this.options.splitter.bind("mouseup.floating",this,function(a){a.data._handleSplitter(false)})}this.fakeHeader.length>0&&this._setupFakeHeader();this.initialized=true},syncView:function(b){if(this.options.disableSync)return;var h=this.window.scrollTop(),i=Math.max(h,b?b:0),j=this.headerOriginalPosition!=null?this.headerOriginalPosition.top:0,k=this.headerOriginalWidth,d="relative",e="auto",c="auto",g=0;if(h>0&&j-this.topMargin<i){d="fixed";e=0;c=this.headerOriginalHeight+this.topMargin;this.fakeHeader.show();this.fakeHeaderBackground.css("top",e).height(this.headerOriginalHeight+this.topMargin).show();this.options.splitter&&this.fakeSplitter.show()}else{this.fakeHeader.hide();this.fakeHeaderBackground.hide();this.options.splitter&&this.fakeSplitter.hide()}this.header.css("position",d).css("top",e).css("width",k);for(var f=0;f<this.options.floatingElements.length;f++){var a=this.options.floatingElements[f];a.element.css("position",d).css("top",c).css("width",a.getWidth());if(a.height)g+=a.height;a.height&&this.options.splitter&&this.fakeSplitter.css("top",c).css("left",a.element.offset().left-2).css("height",a.height)}if(b){this.options.disableSync=true;this.window.scrollTop(b-this.headerOriginalHeight-this.topMargin-g*2);this.options.disableSync=false}this.options.repaint&&this.options.repaint()},_handleSplitter:function(a){if(a){$(this.window).bind("mousemove.dragging",this,function(a){a.data.syncView()});$(this.window).bind("mouseup.diff",this,function(a){a.data._handleSplitter(false)})}else{$(this.window).unbind("mousemove.dragging");$(this.window).unbind("mouseup.dragging")}},_setupFakeHeader:function(){for(var b=this.headerOriginalHeight,a=0;a<this.options.floatingElements.length;a++){var c=this.options.floatingElements[a];if(c.height)b+=c.height}this.fakeHeader.width(this.headerOriginalWidth).height(b+this.topMargin)},destroy:function(){this.window.unbind(".floating");this.fakeHeader.hide();this.fakeHeaderBackground.hide();this.header.css("position","relative").css("top","auto");if(this.options.splitter){this.options.splitter.unbind(".floating");this.window.unbind(".dragging");this.fakeSplitter.hide()}this.initialized=false}})});$.fn.isOnScreen=function(a){var d=$(this),b=d.offset(),c=$(window),f=c.scrollTop(),e=c.scrollLeft();a=a===undefined?0:a;return b!=undefined&&b.top+d.height()>=f-a&&b.top<=f+c.height()+a&&b.left+d.width()>=e-a&&b.left<=e+c.width()+a};$.extend($.expr[":"],{"on-screen":function(a){return $(a).isOnScreen()}});var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);this._initialized=false;a.BaseEnhancement.registerContentChange(b.enhance)}b.ACTION_BAR_CLASS_NAME="action_bar";b.ACTION_BAR_ITEM_CLASS_NAME="actionBar_sublinks";b.ACTION_BAR_ITEM_LINK_CLASS_NAME="action_bar_item_link";b.ACTION_BAR_ITEM_CUSTOM_CONTENT_CLASS_NAME="actionBar_custom_content";b.ACTION_BAR_ACTION_ID_DATA_NAME="action-id";b.ACTION_BAR_ACTION_TYPE_DATA_NAME="action-type";b._action_item_clicked_handlers=[];b.prototype._init=function(){if(!this._initialized){this._initialized=true;$("."+b.ACTION_BAR_ITEM_LINK_CLASS_NAME,this.element).click($.proxy(this.action_clicked,this));$("#actionBar_ul").applyLastClassToList("actionBar_sublinks")}};b.prototype.action_clicked=function(d){var c=$(d.target).parents("li:first"),e={actionId:c.data(b.ACTION_BAR_ACTION_ID_DATA_NAME),$actionElement:c,event:d,actionType:c.data(b.ACTION_BAR_ACTION_TYPE_DATA_NAME),data:a.BaseEnhancement.getOptions(c)};b.raiseActionItemClicked(e);return false};b.registerActionItemClicked=function(a){b._action_item_clicked_handlers.push(a)};b.raiseActionItemClicked=function(c){for(var a=0;a<b._action_item_clicked_handlers.length;a++)b._action_item_clicked_handlers[a]($.extend({},c))};b.enhance=function(){jQuery("."+b.ACTION_BAR_CLASS_NAME).actionBar()};return b}(a.BaseEnhancement);a.ActionBarWidget=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));jQuery.widget("CodePlex.actionBar",new codeplex.ui.ActionBarWidget);var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(b){var c=function(){function a(b,a){this.id=b;this.handler=a}return a}();b.CallbackSet=c;var d=function(d){__extends(b,d);function b(){var b=this;d.call(this);this._callbacks=[];a.ui.ActionBarWidget.registerActionItemClicked(function(c){for(var d=0;d<b._callbacks.length;d++){var a=b._callbacks[d];if(a.id==c.actionId||a.id==c.actionType){a.handler(c);return}}return})}b.prototype._registerCallback=function(b,a){this._callbacks.push(new c(b,a))};return b}(b.BaseEnhancement);b.BaseActionBarHandler=d})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){codeplex.ui.ActionBarWidget.registerActionItemClicked(sourceCode_actionBar_itemClicked);$("#cloneHoverDiv").popupDisplayed(actionBar_clonePopupDisplayed);$("#forkCollabDiv").popupDisplayed(actionBar_ForkCollaboratorsPopupDisplayed);$("#vsconnectDiv").popupDisplayed(actionBar_VSConnectPopupDisplayed)});function sourceCode_actionBar_itemClicked(a){switch(a.actionId){case"actionbar_deletefork":actionBar_ClickDeleteFork(a.data);return;case"actionbar_download":actionBar_downloadChangeset(a.data);return}}function actionBar_ClickDeleteFork(a){if(a.loggedinUser==null)return;OpenDialog("#deleteNetworkDialog",true,"30em");$("#deleteNetworkDialog #CloseOk").unbind("click.submit").bind("click.submit",function(){CodePlex.UpdateProgress.show();$.ajax({url:a.deleteForkUrl,data:{type:"Fork",repositoryName:a.repositoryName,owner:a.owner,filterView:0},dataType:"json",type:"DELETE",success:function(a){if(a.IsError){$("#NetworkError").text(a.Message).show();CodePlex.UpdateProgress.hide()}else location.href=a.RedirectUrl}})})}function actionBar_downloadChangeset(a){suppressUnsavedData();$.post(a.downloadUrl,{changeSetId:a.changesetId,repositoryName:a.repositoryName,ownerName:a.owner},function(a){window.location=a.RedirectUrl})}function actionBar_clonePopupDisplayed(){var a=$("#cloneHoverDiv"),c=$("#clonetext1"),f=$("#sub_heading"),g=2*$("#cloneHoverDiv").css("padding").replace("px",""),d=f.offset().left+f.width(),e=actionBar_GetContentWidth(c.val()+"/t");c.css("width",e);a.css("width",Math.max($("#clonehead1").width(),e+$("#cloneline1").width(),$("#cloneline2").width()));var b=a.width()+g,h=$("."+codeplex.ui.PopupActionHandler.POPUP_ARROW_CLASS_NAME).offset();a.css({left:h.left-b/4+"px"});a.offset().left+b>d&&a.css({left:d-b+"px"});c.select()}function actionBar_VSConnectPopupDisplayed(){var a=$("#vsconnectDiv"),c=$("#connecttext1"),g=$("#connecttext2"),f=$("#sub_heading"),i=2*$("#vsconnectDiv").css("padding").replace("px",""),e=f.offset().left+f.width(),d=actionBar_GetContentWidth(c.val()+"/t");c.css("width",d);var h=actionBar_GetContentWidth(g.val()+"/t");g.css("width",h);a.css("width",Math.max($("#connecthead1").width(),d,h,$("#connectline3").width()));var b=a.width()+i,j=$("."+codeplex.ui.PopupActionHandler.POPUP_ARROW_CLASS_NAME).offset();a.css({left:j.left-b/4+"px"});a.offset().left+b>e&&a.css({left:e-b+"px"});c.select()}function actionBar_ForkCollaboratorsPopupDisplayed(){var d=$("#sub_heading"),a=$("#forkCollabDiv"),c=d.offset().left+d.width(),b=2*$("#forkCollabDiv").css("padding").replace("px","");a.offset().left+a.width()+b>c&&a.css({left:c-(a.width()+b)+"px"})}function actionBar_GetContentWidth(b){var a=$("#divWidthCalc");if(a.length===0)$("body").append('<div id="divWidthCalc" style="position: absolute; visibility: hidden; height: auto; width: auto;"></div>');else $("#divWidthCalc").text("");$("#divWidthCalc").text(b);return $("#divWidthCalc").width()};var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this);this.options={}}a.prototype._init=function(){this.element.delegate("div.application_reject input.ok","click",this,function(a){a.data._toggleTokenState($(this))})};a.prototype._toggleTokenState=function(b){var e=b.data("id"),c=b.data("state"),a=c==2?3:2,d={id:e,state:a};$.post(this.options.manageAppsUrl,d,function(c){if(c.IsError)return;b.val(a==3?"Undo":"Revoke Access").data("state",a)},"json")};return a}(a.BaseEnhancement);a.UserProfileWidget=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.userProfile",new codeplex.ui.UserProfileWidget);var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){c.call(this);a.BaseEnhancement.registerContentChange(b.enhance)}b._uniqueId=0;b.DIFF_SEGMENT_SELECTOR=".diff-segment .diffPane";b.prototype._create=function(){this.myUniqueId=b._uniqueId++;this.element.data("scrollbar",this.myUniqueId)};b.prototype._init=function(){this.syncView()};b.prototype.destroy=function(){if(this.scrollbarContainer!=null){this.scrollbarContainer.unbind("scroll.float-scrollbar");this.scrollbarContainer.remove()}$(window).unbind("scrollstart.float-scrollbar").unbind("scrollstop.float-scrollbar").unbind("resize.float-scrollbar");this.element.removeData("scrollbar")};b.prototype.width=function(a){if(!this._ensureContainersCreated())return;var b=a.container;this.scrollbarContainer.width()!=b&&this.scrollbarContainer.width(b);this.scrollbar.width()!=a.scrollbar&&this.scrollbar.width(a.scrollbar)};b.prototype.height=function(a){if(!this._ensureContainersCreated())return 0;if(a==null)return this.scrollbarContainer.is(":visible")?this.scrollbarContainer.height():0;this.scrollbarContainer.height(a)};b.prototype.hide=function(){if(!this._ensureContainersCreated())return;this.scrollbarContainer.hide()};b.prototype.show=function(){if(!this._ensureContainersCreated())return;this.scrollbarContainer.show()};b.prototype.fixAt=function(a){if(!this._ensureContainersCreated())return;this.scrollbarContainer.css("position","fixed").css("left",a.left).css("bottom",a.bottom)};b.prototype.resetPosition=function(){if(!this._ensureContainersCreated())return;this.scrollbarContainer.scrollLeft(0);this._handleScroll()};b.prototype.syncView=function(){if($.browser.msie)setTimeout($.proxy(this._reallySyncView,this),1);else this._reallySyncView()};b.prototype._reallySyncView=function(){if(!this._ensureContainersCreated())return;var a=this.options.attachedScrollSelector!=null?$(this.options.attachedScrollSelector):this.element,d=$(this.options.attachedContentSelector,a),b=this.options.attachedHeightSelector!=null?$(this.options.attachedHeightSelector):this.element,m=a.offset()!=undefined?a.offset().top:0,e=a.width(),f=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")),g=d.width(),j=g>e,h=$(window),l=b.offset().top+b.height()+parseInt(b.css("padding-bottom")),c=h.scrollTop()+h.height(),k=Math.max(c-l,0),i=c-m-this.scrollbarContainer.height();if(!a.is(":visible")||!a.isOnScreen()||!j||i<0){this.hide();return}this.width({container:e+f,scrollbar:g+f});this.fixAt({left:d.offset().left+a.scrollLeft()+this.options.extraLeftOffset,bottom:k});this.show();this._handleScrollInverse()};b.prototype._ensureContainersCreated=function(){if(this.scrollbarContainer!=null)return true;var a=this.options.attachedScrollSelector!=null?$(this.options.attachedScrollSelector):this.element,b=$(this.options.attachedContentSelector,a),d=a.width(),e=b.width(),c=e>d;if(!a.is(":visible")||!c)return false;this.scrollbarContainer=$('<div class="floating-scrollbar-container" />').data("uniqueId",this.myUniqueId).appendTo("body");this.scrollbar=$('<div class="floating-scrollbar" />').appendTo(this.scrollbarContainer);this.options.allowBottomPadding&&a.css("padding-bottom",this.scrollbarContainer.height());this.scrollbarContainer.bind("scroll.float-scrollbar",$.proxy(this._handleScroll,this));this.options.syncOnScroll&&$(window).bind("scrollstart.float-scrollbar",$.proxy(this.hide,this)).bind("scrollstop.float-scrollbar",$.proxy(this.syncView,this)).bind("resize.float-scrollbar",$.proxy(this.syncView,this));return true};b.prototype._handleScroll=function(){var a=this.options.attachedScrollSelector!=null?$(this.options.attachedScrollSelector):this.element;a.scrollLeft(this.scrollbarContainer.scrollLeft())};b.prototype._handleScrollInverse=function(){var a=this.options.attachedScrollSelector!=null?$(this.options.attachedScrollSelector):this.element,b=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;!b&&this.scrollbarContainer.scrollLeft(a.scrollLeft())};b.enhance=function(){$(b.DIFF_SEGMENT_SELECTOR).floatingScrollbar({attachedContentSelector:"table.diffTable",syncOnScroll:true,allowBottomPadding:true,extraLeftOffset:0,extraBottomOffset:0})};return b}(a.BaseEnhancement);a.FloatingScrollbar=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.floatingScrollbar",new codeplex.ui.FloatingScrollbar);var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){var a=this;b.call(this);this._registerCallback("Navigate",function(b){return a._navigate(b)})}a.NAVIGATE_URL_KEY="navigate-url";a.prototype._navigate=function(b){try{window.location=b.data[a.NAVIGATE_URL_KEY]}catch(c){}};return a}(a.BaseActionBarHandler);a.NavigateActionHandler=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){new codeplex.ui.NavigateActionHandler});var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(b){var c=function(c){__extends(a,c);function a(){var a=this;c.call(this);this._registerCallback("PopUp",function(b){return a._showPopup(b)})}a._EVENT_NAMESPACE=".PopupActionHandler";a.POPUP_ACTIVE_CLASS_NAME="popup-active";a.POPUP_ARROW_CLASS_NAME="action_bar_popup_arrow";a.POPUP_DISPLAYED_EVENT_NAME="pop-displayed";a.prototype._showPopup=function(c){var f=c.$actionElement.hasClass(a.POPUP_ACTIVE_CLASS_NAME);this._hideActivePopup();if(!f){var d=$("."+b.ActionBarWidget.ACTION_BAR_ITEM_CUSTOM_CONTENT_CLASS_NAME,c.$actionElement),e=$("<div class='"+a.POPUP_ARROW_CLASS_NAME+"' />");c.$actionElement.append(e);d.children().toggle(true);this._positionPopup(e,d);d.children().popupDisplayed();c.$actionElement.toggleClass(a.POPUP_ACTIVE_CLASS_NAME,true);c.event.stopPropagation();this._setupCloseHandler(e,d)}};a.prototype._positionPopup=function(b,a){a.children().position({my:"left top",at:"left bottom",of:b,offset:"-20 0",collision:"fit"});a.children().position({my:"left top",at:"left bottom",of:b,offset:"-20 0",collision:"fit"})};a.prototype._isFloatable=function(a){return $(".HoverPanel",a).hasClass("Floatable")};a.prototype._setFloatedPosition=function(f,b){var a=$(".HoverPanel",b),c=$(window).scrollTop(),e,d;this._positionPopup(f,b);e=a.offset().top;d=a.offset().left;e-c<0&&a.offset({top:c,left:d})};a.prototype._setupCloseHandler=function(d,b){var c=this,e=$("html");e.bind("click"+a._EVENT_NAMESPACE,function(a){!$.contains(b.get(0),a.target)&&c._hidePopup(d,b)});$(window).bind("scroll"+a._EVENT_NAMESPACE,function(){if(c._isFloatable(b))c._setFloatedPosition(d,b);else c._hidePopup(d,b)});$(document).bind("keyup"+a._EVENT_NAMESPACE,function(a){a.which==27&&c._hidePopup(d,b)})};a.prototype._hideActivePopup=function(){var c=$("."+a.POPUP_ACTIVE_CLASS_NAME);if(c.length===1){var e=$("."+a.POPUP_ARROW_CLASS_NAME,c),d=$("."+b.ActionBarWidget.ACTION_BAR_ITEM_CUSTOM_CONTENT_CLASS_NAME,c);this._hidePopup(e,d)}};a.prototype._hidePopup=function(d,c){d.remove();c.children().toggle(false);c.parents("."+b.ActionBarWidget.ACTION_BAR_ITEM_CLASS_NAME+":first").toggleClass(a.POPUP_ACTIVE_CLASS_NAME,false);$("html").unbind(a._EVENT_NAMESPACE);$(window).unbind(a._EVENT_NAMESPACE)};return a}(b.BaseActionBarHandler);b.PopupActionHandler=c;$(function(){new a.ui.PopupActionHandler})})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.fn.popupDisplayed=function(a){if(!a)return this.each(function(){$(this).trigger(codeplex.ui.PopupActionHandler.POPUP_DISPLAYED_EVENT_NAME)});else return this.each(function(){$(this).bind(codeplex.ui.PopupActionHandler.POPUP_DISPLAYED_EVENT_NAME,a)})};var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){b.call(this)}a.prototype._init=function(){var a=this;this.options.redirect=this.options.redirect?this.options.redirect:function(a){window.location.href=a};this.element.delegate("#BriefPublishSteps","click",function(){$("#PublishSteps",a.element).slideToggle(250);return false});this.element.delegate("#DeleteProject","click",function(){a._deleteShow()});$("#deleteProjectDialog").delegate("#DeleteProjectButton","click",function(){a._deleteSubmit()});this.element.delegate("#PublishProject","click",function(){a._publish()});this._correctDate()};a.prototype._correctDate=function(){var a=$(".smartDate",this.element);a.each(function(){var a=$(this);if(a.text().toLowerCase()=="today")a.text("today");else a.text("on "+a.text());return a})};a.prototype._deleteShow=function(){OpenDialog("#deleteProjectDialog",true,"37em")};a.prototype._deleteSubmit=function(){var a=this;CodePlex.UpdateProgress.show();$.ajax({url:this.options.deleteUrl,type:"DELETE",success:function(b){if(!b.IsError){a.options.redirect(b.RedirectUrl);return}CodePlex.UpdateProgress.hide()}})};a.prototype._publish=function(){var a=this;CodePlex.UpdateProgress.show();$.ajax({url:this.options.publishUrl,type:"POST",success:function(b){if(b.IsError)a.options.redirect(b.RedirectUrl);else{var c='<div class="HeaderPanel Header">    <h1 id="PublishConfirmation">Your project has been published!</h1></div>';a.element.empty().append(c);CodePlex.UpdateProgress.hide()}}})};return a}(a.BaseEnhancement);a.ProjectCountdown=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.projectCountdown",new codeplex.ui.ProjectCountdown);$(function(){codeplex.ui.ActionBarWidget.registerActionItemClicked(homePage_actionBar_itemClicked)});function homePage_actionBar_itemClicked(a){switch(a.actionId){case"actionbar_deletepage":actionBar_ClickDeletePage(a.data);return}}function actionBar_ClickDeletePage(a){var b=$("#deleteWikiDialog");if(b.length==0){$('<div id="deleteWikiDialog" class="modal" style="display:none"><div class="row"><h2>Delete Page <a href="javascript:return false;" class="close">X</a></h2></div><div class="modal_info"><p>Are you sure you want to delete "'+a.wikiPageTitle+'"?</p><p>All history, comments and attachments for this page will be deleted and cannot be restored.</p><p class="modal_buttons"><input type="button" id="CloseCancel" value="Cancel" class="cancel" /><input type="button" id="CloseOk" value="Delete" class="ok" /></p><div class="ClearBoth"></div></div></div>').appendTo("body");$("#deleteWikiDialog #CloseOk").bind("click",actionBar_ExecuteDeletePage)}OpenDialog("#deleteWikiDialog",true,"30em")}function actionBar_ExecuteDeletePage(a){CodePlex.UpdateProgress.show();$.ajax({type:"DELETE",url:a.deletePageUrl,data:{title:$("#WikiTitle").val()},success:function(a){CodePlex.UpdateProgress.hide();window.location=a},error:function(a){CodePlex.UpdateProgress.hide()}})};$(function(){codeplex.ui.ActionBarWidget.registerActionItemClicked(project_action_itemClicked);actionBar_toggleFavoriteProject(codeplex.ui.BaseEnhancement.getOptions($("#li_actionbar_followproject")),false)});function project_action_itemClicked(a){switch(a.actionId){case"actionbar_followproject":actionBar_toggleFavoriteProject(a.data,true);return}}function actionBar_toggleFavoriteProject(a,b){if(a==null)return;if(a.loggedInUser==""&&b){window.location=a.returnUrl;return}var c="/site/api/projects/"+a.projectName+"/followProject";if(b)$.post(c,function(a){actionBar_loadToggleFavoriteProject(a)},"json");else $.getJSON(c,function(a){actionBar_loadToggleFavoriteProject(a)})}function actionBar_loadToggleFavoriteProject(c){var g="Follow",e="Follow this project to get updates in your activity stream.",f="Un-follow",d="You are already following this project. You can un-follow this project to stop receiving updates.",b="",a=$("#actionbar_followproject"),h=a.children();a.text("");a.append(h);if(c.IsFollowing){a.append(" "+f);b=d}else{a.append(" "+g);b=e}a.append(" ("+c.TotalFollowers+")");a.attr("title",b)};var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(b){__extends(a,b);function a(){var a=this;b.call(this);this._registerCallback("actionbar_deleteapplication_ok",function(b){return a._deleteApplication(b)})}a.prototype._deleteApplication=function(a){CodePlex.UpdateProgress.show();$.ajax({type:"DELETE",url:"/site/api/developers/apps/"+a.data.id,success:function(a){CodePlex.UpdateProgress.hide();if(!a.IsError)window.location=a.RedirectUrl},error:function(){CodePlex.UpdateProgress.hide()}})};return a}(a.BaseActionBarHandler);a.DeveloperHandlers=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){new codeplex.ui.DeveloperHandlers});var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){var b=function(c){__extends(b,c);function b(){var a=this;c.call(this);this._registerCallback("Confirm",function(b){return a._showConfirm(b)})}b.prototype._showConfirm=function(b){var d="#"+b.actionId+"_popup",c=$("input[class=ok]",d);OpenDialog(d,true,"36em");c.data("click_init")!=true&&c.click(function(){b.actionId+="_ok";b.actionType="None";a.ActionBarWidget.raiseActionItemClicked(b)}).data("click_init",true)};return b}(a.BaseActionBarHandler);a.ConfirmActionHandler=b})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){new codeplex.ui.ConfirmActionHandler});$(function(){codeplex.ui.ActionBarWidget.registerActionItemClicked(workItem_actionBar_itemClicked)});function workItem_actionBar_itemClicked(a){switch(a.actionId){case"actionbar_addcomment":actionBar_AddComment();return;case"actionbar_closeitem":actionBar_CloseItem(a.data);return;case"actionbar_edititem":actionBar_EditItem(a.data);return;case"actionbar_deleteissue":actionBar_ClickDeleteIssue(a.data);return;case"actionbar_issueNotification":actionBar_IssueNotifications(a.data);return}}function actionBar_EditItem(b){var a=b.editItemUrl,c=b.retainCommentUrl;if($("#Comment").val().length>0)$.post(c,{comment:$("#Comment").val()},function(){window.location=a});else window.location=a;return false}function actionBar_ClickDeleteIssue(a){var b=$("#deleteWorkItemDialog");if(b.length==0){$('<div id="deleteWorkItemDialog" class="modal" style="display:none"><div class="row"><h2>Delete Work Item <a href="javascript:return false;" class="close">X</a></h2></div><div class="modal_info"><p>Do you want to delete this work item?</p><p class="modal_buttons"><input type="button" id="CloseCancel" value="Cancel" class="cancel" /><input type="button" id="CloseOk" value="Delete" class="ok" /></p><div class="ClearBoth"></div></div></div>').appendTo("body");$("#deleteWorkItemDialog #CloseOk").bind("click",function(b){CodePlex.UpdateProgress.show();$.ajax({url:a.deletePageUrl,type:"DELETE",success:function(a){location.href=a.RedirectUrl}})})}OpenDialog("#deleteWorkItemDialog",true,"30em")}function actionBar_CloseItem(a){changeStatus();return false}function actionBar_AddComment(){$("#Comment").focus();return false}function actionBar_IssueNotifications(a){if(a.loggedInUser==""){window.location=a.returnUrl;return}$("#subscriptionSettings #callingComponent").val("workitem");OpenDialog("#subscriptionSettings",true,"37em");return false};var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(b){var c=function(c){__extends(b,c);function b(){var a=this;c.call(this);this._currentWidth=null;this._registerCallback("actionbar_deleterelease",function(b){return a._deleteRelease(b)});this._$reassignDialog=$("#reassignWorkItems");this._$list=$("#ReassignWorkItemsReleaseList",this._$reassignDialog);this._$checkbox=$("#reassignWorkItemsCheckbox",this._$reassignDialog);this._$reassignDelete=$("#ReassignWorkItemsOkButton",this._$reassignDialog);this._$confirmDialog=$("#deleteReleasePopup");this._$confirmOk=$("#deleteReleaseOk",this._$confirmDialog);this._$checkbox.click(function(){return a._displayReleases()});this._$reassignDelete.click(function(){return a._reallyDeleteRelease(a._$reassignDialog.data("handler-data"))});this._$confirmOk.click(function(){return a._reallyDeleteRelease(a._$confirmDialog.data("handler-data"))})}b.prototype._deleteRelease=function(b){var a=b.data;if(a.allowReassignment)this._showReassignment(a);else this._confirmDelete(a)};b.prototype._showReassignment=function(a){var b=this;this._$reassignDialog.data("handler-data",a);$.ajax({type:"POST",url:a.reassignmentListUrl,data:{releaseId:a.id},dataType:"json",success:function(c){for(var d="",a=0;a<c.length;a++)d+='<option value="'+c[a].Name+'">'+c[a].DisplayName+"</option>";b._$list.html(d);OpenDialog("#reassignWorkItems",true,"36em")}})};b.prototype._displayReleases=function(){if(this._$checkbox.is(":checked"))this._$list.show();else{this._$list.hide();$("option",this._$list).eq(0).attr("selected","selected")}};b.prototype._confirmDelete=function(a){this._$confirmDialog.data("handler-data",a);OpenDialog("#deleteReleasePopup",true,"36em")};b.prototype._reallyDeleteRelease=function(c){CodePlex.UpdateProgress.show();var b=this._$list.val();$.ajax({url:c.deleteUrl,type:"DELETE",dataType:"json",data:{reassignmentReleaseName:b},success:function(b){CodePlex.UpdateProgress.hide();a.ui.UrlHelper.redirect(b.RedirectUrl)}})};return b}(b.BaseActionBarHandler);b.ReleaseHandlers=c})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$(function(){new codeplex.ui.ReleaseHandlers});var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){(function(b){(function(b){var c=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.REPLY_WITH_QUOTE_MARKDOWN_TEMPLATE="**[$AUTHOR$] wrote:**\n[$CONTENT$]\n";b.prototype._create=function(){var c=this,b=a.BaseEnhancement.getOptions(this.element);this.options=$.extend({},b,this.options);this.threadUrl=this.options.threadUrl;this.$editor=$("#Editor",this.element);this.$markdownEditor=$(".MarkdownEditor",this.$editor);this.$cancelButton=$("#CancelButton",this.element);this.$saveButton=$("#SaveButton",this.element);this.$replyButton=$("#ReplyButton",this.element);this._bindEvents();setupUnsavedData();this.options.showEditor&&setTimeout(function(){c.$replyButton.trigger("click")},200)};b.prototype._bindEvents=function(){var b=this,a=this;$("#ReplyButton").click(function(){b._prepareForReply("")});$(".ReplyLink").click(function(){b._prepareForReply("")});$(".ReplyWithQuoteLink").click(function(){var b=a._getThreadPostId(this);a._replyWithQuote(b)});$(".DeletePostLink").click(function(){var b=a._getThreadPostId(this);a._deletePost(b)});$(".EditPostLink").click(function(){var b=a._getThreadPostId(this);a.prepareForEditPost(b)})};b.prototype._resetEditor=function(){if(this.$editor.is(":visible")){disableUnsavedData();this.$editor.detach();this.$cancelButton.trigger("click");this.$markdownEditor.enhancedMarkdownBox("content","");this.$markdownEditor.enhancedMarkdownBox("displayComposeTab");this.$markdownEditor.enhancedMarkdownBox("toggleGuide",false,true);this.$saveButton.attr("disabled",false);this.$saveButton.unbind("click");this.$cancelButton.unbind("click");MvcValidation_ClearErrors()}};b.prototype._prepareForReply=function(b){var a=this;this._resetEditor();this.$markdownEditor.enhancedMarkdownBox("content",b);setupUnsavedData();this.$saveButton.click(function(){if($isFormValid(true)&&a.$markdownEditor.enhancedMarkdownBox("validate")){a.$saveButton.attr("disabled",true);disableUnsavedData();a.$saveButton.get(0).form.submit()}});this.$cancelButton.click(function(){a._resetEditor();a.$replyButton.show()});this.$editor.appendTo("#PostEditorContainer");this.$editor.show();this.$replyButton.hide();setTimeout(function(){$("textarea",this.$editor).focus().val("").val(b)},50)};b.prototype.prepareForEditPost=function(f){var b=this,a=$("#PostContent_"+f),g=$("#Editor",a).length==1,e,d,c=a.hasClass("markDownOutput");if(g)return;this._resetEditor();setupUnsavedData();e=a.html();d=a.data("markdown");this._displayPostEditor(a,d);$("textarea",this.$editor).focus();this.$saveButton.click(function(){if($isFormValid(true)&&b.$markdownEditor.enhancedMarkdownBox("validate")){b.$saveButton.attr("disabled",true);var d=b.$markdownEditor.enhancedMarkdownBox("content");$.ajax({url:b._getThreadPostUrl(f),data:{content:d},type:"PUT",success:function(e){!e.IsError&&b._updatePost(a,e.Message,c,d)}})}});this.$cancelButton.click(function(){b._updatePost(a,e,c);disableUnsavedData()});this.$replyButton.hide()};b.prototype._displayPostEditor=function(a,b){a.html("");a.removeClass("markDownOutput");this.$editor.appendTo(a);this.$editor.show();this.$markdownEditor.enhancedMarkdownBox("content",b)};b.prototype._updatePost=function(a,d,c,b){this._resetEditor();this.$replyButton.show();a.html(d);if(b!==undefined||c){a.addClass("markDownOutput");if($.browser.mozilla||$.browser.msie)$("iframe",a).bind("load.initial",function(){$(this).unbind("load.initial");$(this).enhancedMarkdownOutput()});else setTimeout(function(){$("iframe",a).enhancedMarkdownOutput()},50)}b!==undefined&&a.data("markdown",b)};b.prototype._replyWithQuote=function(a){var d=this._blockQuote($("#PostContent_"+a).data("markdown")),e=$(".UserProfileLink","#PostDetailsCell_"+a).text(),c=b.REPLY_WITH_QUOTE_MARKDOWN_TEMPLATE.replace("[$AUTHOR$]",e).replace("[$CONTENT$]",d);this._prepareForReply(c)};b.prototype._deletePost=function(a){var b=this._getThreadPostUrl(a);OpenDialog("#DeletePostPanel",true,"41em");$("#DeletePostPanel #ClosePostOk").unbind("click.ajax").bind("click.ajax",function(){$.ajax({url:b,type:"DELETE",success:function(a){location.href=a.RedirectUrl}})})};b.prototype._blockQuote=function(e){var a,d,c=$normalizeText(e).split("\n"),b="";for(a=0,d=c.length;a<d;a++)b+="> "+c[a]+"\n";return b};b.prototype._getThreadPostId=function(a){var b=$($(a).parents("tr").get(0)).attr("d:forid");return b};b.prototype._getThreadPostUrl=function(b){var a=this.threadUrl+"/"+b;return a};return b}(a.BaseEnhancement);b.PostList=c})(b.discussions||(b.discussions={}));var c=b.discussions})(a.views||(a.views={}));var b=a.views})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.discussionsPostList",new codeplex.ui.views.discussions.PostList);$(function(){$("#discussionsPostList").discussionsPostList()});var __extends=this.__extends||function(b,c){function a(){this.constructor=b}a.prototype=c.prototype;b.prototype=new a},codeplex;(function(a){(function(a){(function(b){(function(b){var c=function(c){__extends(b,c);function b(){c.apply(this,arguments)}b.REPLY_WITH_QUOTE_MARKDOWN_TEMPLATE="**[$AUTHOR$] wrote:**\n[$CONTENT$]\n";b.prototype._create=function(){var c=this,b=a.BaseEnhancement.getOptions(this.element);this.options=$.extend({},b,this.options);this.threadUrl=this.options.threadUrl;this.$editor=$("#Editor",this.element);this.$markdownEditor=$(".MarkdownEditor",this.$editor);this.$cancelButton=$("#CancelButton",this.element);this.$saveButton=$("#SaveButton",this.element);this.$replyButton=$("#ReplyButton",this.element);this._bindEvents();setupUnsavedData();this.options.showEditor&&setTimeout(function(){c.$replyButton.trigger("click")},200)};b.prototype._bindEvents=function(){var b=this,a=this;$("#ReplyButton").click(function(){b._prepareForReply("")});$(".ReplyLink").click(function(){b._prepareForReply("")});$(".ReplyWithQuoteLink").click(function(){var b=a._getThreadPostId(this);a._replyWithQuote(b)});$(".DeletePostLink").click(function(){var b=a._getThreadPostId(this);a._deletePost(b)});$(".EditPostLink").click(function(){var b=a._getThreadPostId(this);a.prepareForEditPost(b)})};b.prototype._resetEditor=function(){if(this.$editor.is(":visible")){disableUnsavedData();this.$editor.detach();this.$cancelButton.trigger("click");this.$markdownEditor.enhancedMarkdownBox("content","");this.$markdownEditor.enhancedMarkdownBox("displayComposeTab");this.$markdownEditor.enhancedMarkdownBox("toggleGuide",false,true);this.$saveButton.attr("disabled",false);this.$saveButton.unbind("click");this.$cancelButton.unbind("click");MvcValidation_ClearErrors()}};b.prototype._prepareForReply=function(b){var a=this;this._resetEditor();this.$markdownEditor.enhancedMarkdownBox("content",b);setupUnsavedData();this.$saveButton.click(function(){if($isFormValid(true)&&a.$markdownEditor.enhancedMarkdownBox("validate")){a.$saveButton.attr("disabled",true);disableUnsavedData();a.$saveButton.get(0).form.submit()}});this.$cancelButton.click(function(){a._resetEditor();a.$replyButton.show()});this.$editor.appendTo("#PostEditorContainer");this.$editor.show();this.$replyButton.hide();setTimeout(function(){$("textarea",this.$editor).focus().val("").val(b)},50)};b.prototype.prepareForEditPost=function(f){var b=this,a=$("#PostContent_"+f),g=$("#Editor",a).length==1,e,d,c=a.hasClass("markDownOutput");if(g)return;this._resetEditor();setupUnsavedData();e=a.html();d=a.data("markdown");this._displayPostEditor(a,d);$("textarea",this.$editor).focus();this.$saveButton.click(function(){if($isFormValid(true)&&b.$markdownEditor.enhancedMarkdownBox("validate")){b.$saveButton.attr("disabled",true);var d=b.$markdownEditor.enhancedMarkdownBox("content");$.ajax({url:b._getThreadPostUrl(f),data:{content:d},type:"PUT",success:function(e){!e.IsError&&b._updatePost(a,e.Message,c,d)}})}});this.$cancelButton.click(function(){b._updatePost(a,e,c);disableUnsavedData()});this.$replyButton.hide()};b.prototype._displayPostEditor=function(a,b){a.html("");a.removeClass("markDownOutput");this.$editor.appendTo(a);this.$editor.show();this.$markdownEditor.enhancedMarkdownBox("content",b)};b.prototype._updatePost=function(a,d,c,b){this._resetEditor();this.$replyButton.show();a.html(d);if(b!==undefined||c){a.addClass("markDownOutput");if($.browser.mozilla||$.browser.msie)$("iframe",a).bind("load.initial",function(){$(this).unbind("load.initial");$(this).enhancedMarkdownOutput()});else setTimeout(function(){$("iframe",a).enhancedMarkdownOutput()},50)}b!==undefined&&a.data("markdown",b)};b.prototype._replyWithQuote=function(a){var d=this._blockQuote($("#PostContent_"+a).data("markdown")),e=$(".UserProfileLink","#PostDetailsCell_"+a).text(),c=b.REPLY_WITH_QUOTE_MARKDOWN_TEMPLATE.replace("[$AUTHOR$]",e).replace("[$CONTENT$]",d);this._prepareForReply(c)};b.prototype._deletePost=function(a){var b=this._getThreadPostUrl(a);OpenDialog("#DeletePostPanel",true,"41em");$("#DeletePostPanel #ClosePostOk").unbind("click.ajax").bind("click.ajax",function(){$.ajax({url:b,type:"DELETE",success:function(a){location.href=a.RedirectUrl}})})};b.prototype._blockQuote=function(e){var a,d,c=$normalizeText(e).split("\n"),b="";for(a=0,d=c.length;a<d;a++)b+="> "+c[a]+"\n";return b};b.prototype._getThreadPostId=function(a){var b=$($(a).parents("tr").get(0)).attr("d:forid");return b};b.prototype._getThreadPostUrl=function(b){var a=this.threadUrl+"/"+b;return a};return b}(a.BaseEnhancement);b.PostList=c})(b.discussions||(b.discussions={}));var c=b.discussions})(a.views||(a.views={}));var b=a.views})(a.ui||(a.ui={}));var b=a.ui})(codeplex||(codeplex={}));$.widget("codeplex.discussionsPostList",new codeplex.ui.views.discussions.PostList);$(function(){$("#discussionsPostList").discussionsPostList()});var s_account="msstocodeplex",omniGuidPath="://www.codeplex.com/site/analyticsid.aspx";if(window.location.hostname.toLowerCase().indexOf("codeplex.com")==-1||window.location.hostname.toLowerCase().indexOf("www.ppe")>-1){for(var s2=s_account.split(","),i=0;i<s2.length;i++)if(s2[i].search(/dev$/)==-1)s2[i]+="dev";s_account=s2.join(",")};function omniGetCookie(c){var d=document.cookie.indexOf(c+"=");if(d!=-1){var b=d+c.length+1,a=document.cookie.indexOf(";",b);if(a==-1)a=document.cookie.length;return unescape(document.cookie.substring(b,a))}return null}var gAnalyticsId=omniGetCookie("omniID"),gAnalyticsIdStatus=gAnalyticsId?"fpc":"guid";!gAnalyticsId&&document.write("<SCRIPT TYPE='text/javascript' SRC='http"+(window.location.protocol.indexOf("https:")==0?"s":"")+omniGuidPath+"'></SCRIPT>");function omni_S4(){return((1+Math.random())*65536|0).toString(16).substring(1)}function createRandomOmniId(a){return a+"_"+omni_S4()+"_"+omni_S4()+"_"+omni_S4()+"_"+omni_S4()+omni_S4()+omni_S4()}function setOmniID(){if(!gAnalyticsId)gAnalyticsIdStatus="fallback";else gAnalyticsId=gAnalyticsId.replace(/\-/g,"_");var a=new Date,b=a.getTime();tempID=gAnalyticsId?gAnalyticsId:createRandomOmniId(b);a.setTime(b+366*24*60*60*1e3);s.c_w("omniID",tempID,a);return tempID}function normalizePagename(a){if(a==""||a=="default.aspx"||a=="default.mspx")a="homepage";return a}function getOmniMetaTagData(c){for(var b=document.getElementsByTagName("META"),a=0;a<b.length;a++){var d=b[a].getAttribute("NAME");if(d)if(d.toLowerCase()==c)return b[a].getAttribute("CONTENT")}if(window[c])return window[c];return false}function checkMeta(){for(var b=document.getElementsByTagName("META"),a=0;a<b.length;a++){var c=b[a].getAttribute("NAME");if(c)if(c.indexOf("t_omni_")>=0)window[c.toLowerCase()]=b[a].getAttribute("CONTENT")}}function findsprops(){if(window.t_omni_sprops){t_omni_spropsArr=t_omni_sprops.split(",");for(i=0;i<t_omni_spropsArr.length;i++){var a=t_omni_spropsArr[i].split("|");s[a[0].toLowerCase()]=a[1].toLowerCase()}}}function findevars(){if(window.t_omni_evars){t_omni_evarsArr=t_omni_evars.split(",");for(i=0;i<t_omni_evarsArr.length;i++){var a=t_omni_evarsArr[i].split("|");s[a[0]]=a[1].toLowerCase()}}}function findqueryparams(){if(window.t_omni_queryparams){var b=t_omni_queryparams.split(",");for(i=0;i<b.length;i++)try{var a=b[i].split("|"),c=a[0],e=a[1],d=a[2];if(d)if(queryString(c)!="false")s[d]=e+queryString(c)}catch(f){}}}function getOmniPath(d,f,c){if(c>0)d+="o";var b=d.split("/"),e=b.length-c,a="";for(i=f;i<e;i++){a+=b[i];i<e-1?(a+=": "):""}return a}function PageQuery(b){if(b.length>1)this.q=b.substring(1,b.length);else this.q=null;this.keyValuePairs=[];if(b)for(var a=0;a<this.q.split("&").length;a++)this.keyValuePairs[a]=this.q.split("&")[a];this.getKeyValuePairs=function(){return this.keyValuePairs};this.getValue=function(b){for(var a=0;a<this.keyValuePairs.length;a++)if(this.keyValuePairs[a].split("=")[0]==b)return this.keyValuePairs[a].split("=")[1];return false};this.getParameters=function(){for(var b=new Array(this.getLength()),a=0;a<this.keyValuePairs.length;a++)b[a]=this.keyValuePairs[a].split("=")[0];return b};this.getLength=function(){return this.keyValuePairs.length}}function queryString(b){var a=new PageQuery(window.location.search);return unescape(a.getValue(b))}function omni_StripProtocol(a){for(var c=["http://","https://"],b=0;b<c.length;b++)a=a.replace(c[b],"");return a}function omni_StripQS(a){if(a.indexOf("?")!=-1)a=a.substring(0,a.indexOf("?"));return a}function findevents(){if(window.t_omni_events)if(s.events)s.events+=window.t_omni_events;else s.events=window.t_omni_events}function omniAddPVEvent(){if(!s.linkType){s.eVar17=s.pageName;s.events=s.apl(s.events,"event1",",",2)}}var t_omni_hname=window.location.hostname.toLowerCase(),extraRsids=getOmniMetaTagData("t_omni_rsids");if(extraRsids)s_account=s_account+","+extraRsids;var s=s_gi(s_account);s.events="";checkMeta();findsprops();findevars();findqueryparams();findevents();s.currencyCode="USD";s.trackDownloadLinks=true;s.trackExternalLinks=true;s.trackInlineStats=true;s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx,asx";s.linkInternalFilters="javascript:,microsoft.com/windows";s.linkLeaveQueryString=false;s.linkTrackVars="None";s.linkTrackEvents="None";s.siteID="";s.defaultPage="";s.queryVarsList="";s.pathExcludeDelim=";";s.pathConcatDelim="";s.pathExcludeList="";s.usePlugins=true;function s_doPlugins(a){if(getOmniMetaTagData("t_omni_errorpage"))a.pageType="errorPage";var b="";b=getOmniMetaTagData("t_omni_pagename");if(b)a.pageName=b;b=getOmniMetaTagData("t_omni_channel");if(b)a.channel=b;b=getOmniMetaTagData("t_omni_pagetitle");if(b)a.prop3=b;omniAddPVEvent();if(!a.campaign)a.campaign=a.getQueryParam("mc_id");if(!a.campaign)a.campaign=a.getQueryParam("cmxid");if(!a.campaign)a.campaign=a.getQueryParam("ocid");a.campaign=a.getValOnce(a.campaign,"s_campaign",0);a.prop29=window.location.hostname.toLowerCase()+window.location.pathname.toLowerCase();if(!a.pageType&&!a.pageName)a.pageName=a.getPageName();var e=a.exitLinkHandler();if(e){var c=omni_StripProtocol(e.toLowerCase());if(c.indexOf("atdmt.com")>-1)c=omni_StripQS(c);a.prop43=a.pageName+" _ "+c;a.linkTrackVars=a.apl(a.linkTrackVars,"prop43",",",2)}var d=a.downloadLinkHandler();if(d){var c=omni_StripProtocol(d.toLowerCase());if(c.indexOf("atdmt.com")>-1)c=omni_StripQS(c);a.prop43=a.pageName+" _ "+c;a.linkTrackVars=a.apl(a.linkTrackVars,"prop43",",",2)}a.prop45=gAnalyticsIdStatus;if(gAnalyticsIdStatus=="fallback")a.events=a.apl(a.events,"event10",",",2);if(a.prop1)a.eVar1=a.prop1;if(a.prop2)a.eVar2=a.prop2;if(a.prop3)a.eVar3=a.prop3;if(a.prop4)a.eVar4=a.prop4;if(a.prop5)a.eVar5=a.prop5;a.linkTrackVars=a.apl(a.linkTrackVars,"eVar44",",",2)}s.doPlugins=s_doPlugins;s.getQueryParam=new Function("p","d","u","var s=this,v='',i,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:s.wd.location);if(u=='f')u=s.gtfs().location;while(p){i=p.indexOf(',');i=i<0?p.length:i;t=s.p_gpv(p.substring(0,i),u+'');if(t)v+=v?d+t:t;p=p.substring(i==p.length?i:i+1)}return v");s.p_gpv=new Function("k","u","var s=this,v='',i=u.indexOf('?'),q;if(k&&i>-1){q=u.substring(i+1);v=s.pt(q,'&','p_gvf',k)}return v");s.p_gvf=new Function("t","k","if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'True':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s.epa(v)}return ''");s.getValOnce=new Function("v","c","e","var s=this,k=s.c_r(c),a=new Date;e=e?e:0;if(v){a.setTime(a.getTime()+e*86400000);s.c_w(c,v,e?a:0);}return v==k?'':v");s.exitLinkHandler=new Function("p","var s=this,h=s.p_gh(),n='linkInternalFilters',i,t;if(!h||(s.linkType&&(h||s.linkName)))return '';i=h.indexOf('?');t=s[n];s[n]=p?p:t;h=s.linkLeaveQueryString||i<0?h:h.substring(0,i);if(s.lt(h)=='e')s.linkType='e';else h='';s[n]=t;return h;");s.downloadLinkHandler=new Function("p","var s=this,h=s.p_gh(),n='linkDownloadFileTypes',i,t;if(!h||(s.linkType&&(h||s.linkName)))return '';i=h.indexOf('?');t=s[n];s[n]=p?p:t;if(s.lt(h)=='d')s.linkType='d';else h='';s[n]=t;return h;");s.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l");s.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a");s.detectSilverlight=new Function("smv","return 'silverlight not detected.';");if(s.apv>=4.1){s.detectSilverlight=null;s.detectSilverlight=new Function("svr","scn","smv","smv=smv?smv:2;var s=this,sk=s.c_r(scn),k=s.c_w('s_cc','true',0)?'Y':'N';if(k=='Y'&&!sk){var ap=null,sv='';try{ap=new ActiveXObject('AgControl.AgControl');for(var i=smv;i>0;i--){for(var j=9;j>=0;j--){if(ap.isVersionSupported(i+'.'+j)){sv=i+'.'+j;break;}}if(sv){break;}}}catch(e){try{ap=navigator.plugins['Silverlight Plug-In'];sv=ap.description.substring(0,ap.description.indexOf('.')+2)}catch(e){}}if(sv){sv='silverlight '+sv;}else{sv='silverlight not detected.';}s.c_w(scn,sv,0);s[svr]=sv;}")}s.p_gh=new Function("var s=this;if(!s.eo&&!s.lnk)return '';var o=s.eo?s.eo:s.lnk,y=s.ot(o),n=s.oid(o),x=o.s_oidt;if(s.eo&&o==s.eo){while(o&&!n&&y!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(!o)return '';y=s.ot(o);n=s.oid(o);x=o.s_oidt}}return o.href?o.href:'';");s.p_gh_windows_new=new Function("var s=this;if(!s.eo&&!s.lnk)return '';var o=s.eo?s.eo:s.lnk,y=s.ot(o),n=s.oid(o),x=o.s_oidt;if(s.eo&&o==s.eo){while(o&&!n&&y!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(!o)return '';y=s.ot(o);n=s.oid(o);x=o.s_oidt}}return o.href?o:'';");s.detectFlash=new Function("cn","mfv","vr","var s=this,fv=-1,dwi=0,r,w,mt=s.n.mimeTypes,fk=s.c_r(cn),k=s.c_w('s_cc','true',0)?'Y':'N';if(k=='Y'&&!fk){if(s.pl&&s.pl.length){if(s.pl['Shockwave Flash 2.0'])fv=2;x=s.pl['Shockwave Flash'];if(x){fv=0;z=x.description;if(z)fv=z.substring(16,z.indexOf('.'));}}else if(mt&&mt.length){x=mt['application/x-shockwave-flash'];if(x&&x.enabledPlugin)fv=0;}if(fv<=0)dwi=1;w=s.u.indexOf('Win')!=-1?1:0;if(dwi&&s.isie&&w&&execScript){result=false;for(var i=mfv;i>=3&&result!=true;i--){execScript('on error resume next: result = IsObject(CreateObject(\"ShockwaveFlash.ShockwaveFlash.'+i+'\"))','VBScript');fv=i;}}r=fv==-1?'flash not detected':fv==0?'flash enabled (no version)':'flash '+fv;s.c_w(cn,r,0);return 'true';}else return '';");s.getFlash=new Function("cn","var s=this;if(cn&&s.c_r(cn))return s.c_r(cn);");s.returnFlash=new Function("cn","vr","to","setTimeout(\"var cn,vr,to,s_dfv=s_gi(s_account);s_dfv.linkTrackVars=vr,s_dfv.vr=s.getFlash();s_dfv.tl(this,'o','Flash Version Detection')\",to);");s.getNewRepeat=new Function("var s=this,e=new Date(),cval,ct=e.getTime(),y=e.getYear();e.setTime(ct+30*24*60*60*1000);cval=s.c_r('s_nr');if(cval.length==0){s.c_w('s_nr',ct,e);return 'New';}if(cval.length!=0&&ct-cval<30*60*1000){s.c_w('s_nr',ct,e);return 'New';}if(cval<1123916400001){e.setTime(cval+30*24*60*60*1000);s.c_w('s_nr',ct,e);return 'Repeat';}else return 'Repeat';");s.getPageName=new Function("u","var s=this,v=u?u:''+s.wd.location,x=v.indexOf(':'),y=v.indexOf('/',x+4),z=v.indexOf('?'),c=s.pathConcatDelim,e=s.pathExcludeDelim,g=s.queryVarsList,d=s.siteID,n=d?d:'',q=z<0?'':v.substring(z+1),p=v.substring(y+1,q?z:v.length);z=p.indexOf('#');p=z<0?p:s.fl(p,z);x=e?p.indexOf(e):-1;p=x<0?p:s.fl(p,x);p+=!p||p.charAt(p.length-1)=='/'?s.defaultPage:'';y=c?c:'/';while(p){x=p.indexOf('/');x=x<0?p.length:x;z=s.fl(p,x);if(!s.pt(s.pathExcludeList,',','p_c',z))n+=n?y+z:z;p=p.substring(x+1)}y=c?c:'?';while(g){x=g.indexOf(',');x=x<0?g.length:x;z=s.fl(g,x);z=s.pt(q,'&','p_c',z);if(z){n+=n?y+z:z;y=c?c:'&'}g=g.substring(x+1)}return n");s.getVisitNum=new Function("var s=this,e=new Date(),cval,cvisit,ct=e.getTime(),c='s_vnum',c2='s_invisit';e.setTime(ct+30*24*60*60*1000);cval=s.c_r(c);if(cval){var i=cval.indexOf('&vn='),str=cval.substring(i+4,cval.length),k;}cvisit=s.c_r(c2);if(cvisit){if(str){e.setTime(ct+30*60*1000);s.c_w(c2,'true',e);return str;}else return 'unknown visit number';}else{if(str){str++;k=cval.substring(0,i);e.setTime(k);s.c_w(c,k+'&vn='+str,e);e.setTime(ct+30*60*1000);s.c_w(c2,'true',e);return str;}else{s.c_w(c,ct+30*24*60*60*1000+'&vn=1',e);e.setTime(ct+30*60*1000);s.c_w(c2,'true',e);return 1;}}");s.p_c=new Function("v","c","var x=v.indexOf('=');return c.toLowerCase()==v.substring(0,x<0?v.length:x).toLowerCase()?v:0");s.visitorNamespace="microsoftsto";s.dc=112;s.m_Media_c="(`OWhilePlaying~='s_media_'+m._in+'_~unc^D(~;`E~m.ae(mn,l,\"'+p+'\",~){var m=this~o;w.percent=((w.off^e+1)/w`X)*100;w.percent=w.percent>1~o.'+f~=new ~o.Get~:Math.floor(w.percent);w.timePlayed=i.t~}`x p');p=tcf(o)~Time~x,x!=2?p:-1,o)}~if(~m.monitor)m.monitor(m.s,w)}~m.s.d.getElementsByTagName~ersionInfo~'^N_c_il['+m._in+'],~'o','var e,p=~else~i.to~=Math.floor(~}catch(e){p=~m.track~s.wd.addEventListener~.name~m.s.rep(~layState~||^8~Object~m.s.wd[f1]~^A+=i.t+d+i.s+d+~.length~parseInt(~Player '+~s.wd.attachEvent~'a','b',c~Media~pe='m~;o[f1]~m.s.isie~.current~);i.~p<p2||p-p2>5)~.event=~m.close~i.lo~vo.linkTrack~=v+',n,~.open~){w.off^e=~;n=m.cn(n);~){this.e(n,~v=e='None';~Quick~MovieName()~);o[f~out(\"'+v+';~return~1000~i.lx~m.ol~o.controls~m.s.ape(i.~load',m.as~)}};m.~script';x.~,t;try{t=~Version()~n==~'--**--',~pev3~o.id~i.ts~tion~){mn=~1;o[f7]=~();~(x==~){p='~&&m.l~l[n])~:'')+i.e~':'E')+o~var m=s~!p){tcf~xc=m.s.~Title()~()/~7+'~+1)/i.l~;i.e=''~3,p,o);~m.l[n]=~Date~5000~;if~i.lt~';c2='~tm.get~Events~set~Change~)};m~',f~(x!=~4+'=n;~~^N.m_i('`c');m.cn=f`2n`5;`x `Rm.s.rep(`Rn,\"\\n\",''),\"\\r\",''),^9''^g`o=f`2n,l,p,b`5,i`8`U,tm`8^X,a='',x`ql=`Yl)`3!l)l=1`3n&&p){`E!m.l)m.l`8`U`3m.^K`k(n)`3b&&b.id)a=b.id;for (x in m.l)`Em.l[x]^J[x].a==a)`k(m.l[x].n`hn=n;i.l=l;i.p=m.cn(p`ha=a;i.t=0;^C=0;i.s`M^c`C^R`y`hlx=0;^a=i.s;`l=0^U;`L=-1;^Wi}};`k=f`2n`r0,-1^g.play=f`2n,o`5,i;i=m.e(n,1,o`hm`8F`2`Ii`3m.l){i=m.l[\"'+`Ri.n,'\"','\\\\\"')+'\"]`3i){`E`z==1)m.e(i.n,3,-1`hmt=^e`Cout(i.m,^Y)}}'`hm(^g.stop=f`2n,o`r2,o)};`O=f`2n`5^Z `0) {m.e(n,4,-1^4e=f`2n,x,o`5,i,tm`8^X,ts`M^c`C^R`y),ti=`OSeconds,tp=`OMilestones,z`8Array,j,d=^9t=1,b,v=`OVars,e=`O^d,`dedia',^A,w`8`U,vo`8`U`qi=n^J&&m.l[n]?m.l[n]:0`3i){w`Q=n;w`X=i.l;w.playerName=i.p`3`L<0)w`j\"OPEN\";`K w`j^H1?\"PLAY\":^H2?\"STOP\":^H3?\"MONITOR\":\"CLOSE\")));w`o`C`8^X^Gw`o`C.^e`C(i.s*`y)`3x>2||^i`z&&^i2||`z==1))) {b=\"`c.\"+name;^A = ^2n)+d+i.l+d+^2p)+d`3x){`Eo<0&&^a>0){o=(ts-^a)+`l;o=o<i.l?o:i.l-1}o`Mo)`3x>=2&&`l<o){i.t+=o-`l;^C+=o-`l;}`Ex<=2){i.e+=^H1?'S^M;`z=x;}`K `E`z!=1)m.e(n,1,o`hlt=ts;`l=o;`W`0&&`L>=0?'L'+`L^L+^i2?`0?'L^M:'')^Z`0){b=0;`d_o'`3x!=4`p`600?100`A`3`F`E`L<0)`d_s';`K `Ex==4)`d_i';`K{t=0;`sti=ti?`Yti):0;z=tp?m.s.sp(tp,','):0`3ti&&^C>=ti)t=1;`K `Ez){`Eo<`L)`L=o;`K{for(j=0;j<z`X;j++){ti=z[j]?`Yz[j]):0`3ti&&((`L^T<ti/100)&&((o^T>=ti/100)){t=1;j=z`X}}}}}}}`K{m.e(n,2,-1)^Z`0`pi.l`600?100`A`3`F^W0`3i.e){`W`0&&`L>=0?'L'+`L^L^Z`0){`s`d_o'}`K{t=0;m.s.fbr(b)}}`K t=0;b=0}`Et){`mVars=v;`m^d=e;vo.pe=pe;vo.^A=^A;m.s.t(vo,b)^Z`0){^C=0;`L=o^U}}}}`x i};m.ae=f`2n,l,p,x,o,b){`En&&p`5`3!m.l||!m.^Km`o(n,l,p,b);m.e(n,x,o^4a=f`2o,t`5,i=^B?^B:o`Q,n=o`Q,p=0,v,c,c1,c2,^Ph,x,e,f1,f2`1oc^h3`1t^h4`1s^h5`1l^h6`1m^h7`1c',tcf,w`3!i){`E!m.c)m.c=0;i`1'+m.c;m.c++}`E!^B)^B=i`3!o`Q)o`Q=n=i`3!^0)^0`8`U`3^0[i])`x;^0[i]=o`3!xc)^Pb;tcf`8F`2`J0;try{`Eo.v`H&&o`g`c&&^1)p=1`N0`B`3^O`8F`2`J0^6`9`t`C^7`3t)p=2`N0`B`3^O`8F`2`J0^6`9V`H()`3t)p=3`N0`B}}v=\"^N_c_il[\"+m._in+\"],o=^0['\"+i+\"']\"`3p==1^IWindows `c `Zo.v`H;c1`np,l,x=-1,cm,c,mn`3o){cm=o`g`c;c=^1`3cm&&c^Ecm`Q?cm`Q:c.URL;l=cm.dura^D;p=c`gPosi^D;n=o.p`S`3n){`E^88)x=0`3^83)x=1`3^81`T2`T4`T5`T6)x=2;}^b`Ex>=0)`4`D}';c=c1+c2`3`f&&xc){x=m.s.d.createElement('script');x.language='j^5type='text/java^5htmlFor=i;x`j'P`S^f(NewState)';x.defer=true;x.text=c;xc.appendChild(x`v6]`8F`2c1+'`E^83){x=3;'+c2+'}^e`Cout(`76+',^Y)'`v6]()}}`Ep==2^I`t`C `Z(`9Is`t`CRegistered()?'Pro ':'')+`9`t`C^7;f1=f2;c`nx,t,l,p,p2,mn`3o^E`9`u?`9`u:`9URL^Gn=`9Rate^Gt=`9`CScale^Gl=`9Dura^D^Rt;p=`9`C^Rt;p2=`75+'`3n!=`74+'||`i{x=2`3n!=0)x=1;`K `Ep>=l)x=0`3`i`42,p2,o);`4`D`En>0&&`7^S>=10){`4^V`7^S=0}`7^S++;`7^j`75+'=p;^e`C`w`72+'(0,0)\",500)}'`e`8F`2`b`v4]=-^F0`e(0,0)}`Ep==3^IReal`Z`9V`H^Gf1=n+'_OnP`S^f';c1`nx=-1,l,p,mn`3o^E`9^Q?`9^Q:`9Source^Gn=`9P`S^Gl=`9Length^R`y;p=`9Posi^D^R`y`3n!=`74+'){`E^83)x=1`3^80`T2`T4`T5)x=2`3^80&&(p>=l||p==0))x=0`3x>=0)`4`D`E^83&&(`7^S>=10||!`73+')){`4^V`7^S=0}`7^S++;`7^j^b`E`72+')`72+'(o,n)}'`3`V)o[f2]=`V;`V`8F`2`b1+c2)`e`8F`2`b1+'^e`C`w`71+'(0,0)\",`73+'?500:^Y);'+c2`v4]=-1`3`f)o[f3]=^F0`e(0,0^4as`8F`2'e',`Il,n`3m.autoTrack&&`G){l=`G(`f?\"OBJECT\":\"EMBED\")`3l)for(n=0;n<l`X;n++)m.a(^K;}')`3`a)`a('on^3);`K `E`P)`P('^3,false)";s.m_i("Media");var s_code="",s_objectID;function s_gi(b,j,k){var f="=fun^I(~){`Ls=^Z~$y ~.substring(~.indexOf(~;@u~`c@u~=new Fun^I(~.toLowerCase()~};s.~.length~s_c_il['+s@4n+']~=new Object~`ZMigrationServer~.toUpperCase~){@u~`U$z=^O=s.`W`q=s.`W^c=`I^zobjectID=s.ppu=$9=$9v1=$9v2=$9v3=~','~s.wd~t^S~')q='~var ~s.pt(~=new Array~ookieDomainPeriods~.location~^KingServer~dynamicAccount~s.apv~BufferedRequests~);s.~)@ux^w!Object$rObject.prototype$rObject.prototype[x])~link~s.m_~Element~visitor~$q@h~referrer~else ~.get#B()~}c#D(e){~.lastIndexOf(~.protocol~=new Date~=''~;@d^ss[k],255)}~javaEnabled~conne^I^c~^zc_i~:'')~onclick~}@u~Name~ternalFilters~javascript~s.dl~@9s.b.addBehavior(\"# default# ~for(~=parseFloat(~'+tm.get~typeof(v)==\"~window~cookie~s.rep(~s.vl_g~tfs~s.un~&&s.~o^zoid~browser~.parent~document~colorDepth~String~while(~.host~s.maxDelay~r=s.m(f)?s[f](~s.sq~parseInt(~ction~t=s.ot(o)~track~nload~j='1.~#NURL~s.eo~lugins~'){q='~dynamicVariablePrefix~=='~set#Bout(~Sampling~s.rc[un]~Event~;i++)~');~this~resolution~}else{~Type~s.c_r(~s.c_w(~s.eh~s.isie~s.vl_l~s.vl_t~Secure~Height~t,h#Wt?t~tcf~isopera~ismac~escape(~.href~screen.~s.fl(~s=s_gi(~Version~harCode~&&(~_'+~variableProvider~.s_~f',~){s.~)?'Y':'N'~:'';h=h?h~._i~e&&l!='SESSION'~s_sv(v,n[k],i)}~name~home#N~;try{~s.ssl~s.oun~s.rl[u~Width~o.type~\"m_\"+n~Lifetime~s.gg('objectID~sEnabled~.mrq($tun+'\"~ExternalLinks~charSet~onerror~currencyCode~.src~disable~etYear(~MigrationKey~&&!~Opera~'s_~Math.~s.fsg~s.$z~s.ns6~InlineStats~&&l!='NONE'~Track~'0123456789~s[k]=~'+n+'~loadModule~+\"_c\"]~s.ape(~s.epa(~t.m_nl~m._d~n=s.oid(o)~,'sqs',q);~LeaveQuery~(''+~')>=~'=')~){n=~\",''),~&&t!='~if(~vo)~s.sampled~=s.oh(o);~+(y<1900?~n]=~true~sess~campaign~lif~ in ~'http~,100)~s.co(~ffset~s.pe~'&pe~m._l~s.c_d~s.brl~s.nrs~s.gv(~s[mn]~s.qav~,'vo~s.pl~=(apn~Listener~\"s_gs(\")~vo._t~b.attach~2o7.net'~d.create~=s.n.app~n){~t&&~)+'/~s()+'~){p=~():''~a):f(~'+n;~+1))~a['!'+t]~){v=s.n.~channel~.target~x.split~o.value~[\"s_\"+g~s_si(t)~')dc='1~\".tl(\")~etscape~s_')t=t~omePage~s.d.get~')<~='+~||!~'||~\"'+~[b](e);~\"){n[k]~a+1,b):~m[t+1](~return~lnk~mobile~height~events~random~code~wd.~=un~un,~,pev~'MSIE ~rs,~Time~floor(~atch~s.num(~s.pg~m._e~s.c_gd~,'lt~.inner~transa~;s.gl(~',s.bc~page~Group,~.fromC~sByTag~?'&~+';'~&&o~1);~}}}}~){t=~[t]=~[n];~>=5)~[t](~!a[t])~~s._c=@Uc';`I=`z`5!`I`m$S`I`ml`N;`I`mn=0;}s@4l=`I`ml;s@4n=`I`mn;s@4l[s@4@zs;`I`mn++;s.m`0m){`2@om)`4'{$p0`9fl`0x,l){`2x?@ox)`30,l):x`9co`0o`F!o)`2o;`Ln`C,x;`vx$4o)@ux`4'select$p0&&x`4'filter$p0)n[x]=o[x];`2n`9num`0x){x`i+x;`v`Lp=0;p<x`A;p++)@u(@c')`4x`3p,p$a<0)`20;`21`9rep=s_r;s.spf`0t,a){a[a`A]=t;`20`9sp`0x,d`1,a`N`5$f)a=$f(d);`c`Mx,d,'sp@0a);`2a`9ape`0x`1,h=@cABCDEF',i,c=s.@L,n,l,e,y`i;c=c?c`E$X`5x){x`i+x`5c^SAUTO'^w'').c^vAt){`vi=0;i<x`A^X{c=x`3i,i+#Un=x.c^vAt(i)`5n>127){l=0;e`i;^Cn||l<4){e=h`3n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}`6c^S+')y+='%2B';`cy+=^pc)}x=y^bx=x?^1^p''+x),'+`H%2B'):x`5x&&c^5em==1&&x`4'%u$p0&&x`4'%U$p0){i=x`4'%^Y^Ci>=0){i++`5h`38)`4x`3i,i+1)`E())>=0)`2x`30,i)+'u00'+x`3i);i=x`4'%',i)#V`2x`9epa`0x`1;`2x?un^p^1''+x,'+`H ')):x`9pt`0x,d,f,a`1,t=x,z=0,y,r;^Ct){y=t`4d);y=y<0?t`A:y;t=t`30,y);^Ft,$Yt,a)`5r)`2r;z+=y+d`A;t=x`3z,x`A);t=z<x`A?t:''}`2''`9isf`0t,a){`Lc=a`4':')`5c>=0)a=a`30,c)`5t`30,2)^S$m`32);`2(t!`i&&t==a)`9fsf`0t,a`1`5`Ma,`H,'is@0t))@W+=(@W!`i?`H`n+t;`20`9fs`0x,f`1;@W`i;`Mx,`H,'fs@0f);`2@W`9si`0wd`1,c`i+s_gi,a=c`4\"{\"),b=c`f\"}\"),m;c=s_fe(a>0&&b>0?c`3$w0)`5wd&&#5^9&&c){#5^T'fun^I s_sv(o,n,k){`Lv=o[k],i`5v`F`ystring\"||`ynumber\")n[k]=v;`cif (`yarray$v`N;`vi=0;i<v`A^X@6`cif (`yobject$v`C;`vi$4v)@6}}fun^I $i{`Lwd=`z,s,i,j,c,a,b;wd^zgi`7\"un\",\"pg\",\"ss\",$tc+'\");#5^t$t@B+'\");s=#5s;s.sa($t^4+'\"`U^3=wd;`M^2,\",\",\"vo1\",t`G\\'\\'`5t.m_l&&@j)`vi=0;i<@j`A^X{n=@j[i]`5$Sm=t#Yc=t[@F]`5m&&c){c=\"\"+c`5c`4\"fun^I\")>=0){a=c`4\"{\");b=c`f\"}\");c=a>0&&b>0?c`3$w0;s[@F@g=c`5#G)s.@f(n)`5s[n])`vj=0;j<$B`A;j++)s_sv(m,s[n],$B[j])#V}`Le,o,t@9o=`z.opener`5o#T^zgi#Wo^zgi($t^4+'\")`5t)$i}`e}',1)}`9c_d`i;#Hf`0t,a`1`5!#Et))`21;`20`9c_gd`0`1,d=`I`P^D@7,n=s.fpC`O,p`5!n)n=s.c`O`5d@S$C@rn?^Hn):2;n=n>2?n:2;p=d`f'.')`5p>=0){^Cp>=0&&n>1$Wd`f'.',p-#Un--}$C=p>0&&`Md,'.`Hc_gd@00)?d`3p):d}}`2$C`9c_r`0k`1;k=@hk);`Lc=' '+s.d.^0,i=c`4' '+k+@q,e=i<0?i:c`4';',i),v=i<0?'':@ic`3i+2+k`A,e<0?c`A:e));`2v!='[[B]]'?v:''`9c_w`0k,v,e`1,d=#H(),l=s.^0@G,t;v`i+v;l=l?@ol)`E$X`5@5@a#W(v!`i?^Hl?l:0):-60)`5t){e`h;e.set#B(e`d+(t*1000))}`pk@a@1d.^0=k+'`av!`i?v:'[[B]]')+'; path=/;'+(@5?' expires$qe.toGMT^B()#S`n+(d?' domain$qd#S`n;`2^dk)==v}`20`9eh`0o,e,r,f`1,b='s^xe+'^xs@4n,n=-1,l,i,x`5!^fl)^fl`N;l=^fl;`vi=0;i<l`A&&n<0;i++`Fl[i].o==o&&l[i].e==e)n=i`pn<0@ri;l[n]`C}x=l#Yx.o=o;x.e=e;f=r?x.b:f`5r||f){x.b=r?0:o[e];x.o[e]=f`px.b){x.o[b]=x.b;`2b}`20`9cet`0f,a,t,o,b`1,r,^m`5`S>=5^w!s.^n||`S>=7)){^m`7's`Hf`Ha`Ht`H`Le,r@9^F$Ya)`er=s.m(t)?s#ae):t(e)}`2r^Yr=^m(s,f,a,t)^b@us.^o^5u`4#94@p0)r=s.m(b)?s[b](a):b(a);else{^f(`I,'@M',0,o);^F$Ya`Ueh(`I,'@M',1)}}`2r`9g^3et`0e`1;`2s.^3`9g^3oe`7'e`H`Ls=`B,c;^f(`z,\"@M\",1`Ue^3=1;c=s.t()`5c)s.d.write(c`Ue^3=0;`2$0'`Ug^3fb`0a){`2`z`9g^3f`0w`1,p=w^8,l=w`P;s.^3=w`5p&&p`P!=l&&p`P^D==l^D@1^3=p;`2s.g^3f(s.^3)}`2s.^3`9g^3`0`1`5!s.^3@1^3=`I`5!s.e^3)s.^3=s.cet('g^3@0s.^3,'g^3et',s.g^3oe,'g^3fb')}`2s.^3`9mrq`0u`1,l=@C],n,r;@C]=0`5l)`vn=0;n<l`A;n++){r=l#Ys.mr(0,0,r.r,0,r.t,r.u)}`9br`0id,rs`1`5s.@P`T$r^e@Ubr',rs))$D=rs`9flush`T`0`1;s.fbr(0)`9fbr`0id`1,br=^d@Ubr')`5!br)br=$D`5br`F!s.@P`T)^e@Ubr`H'`Umr(0,0,br)}$D=0`9mr`0$1,q,#Aid,ta,u`1,dc=s.dc,t1=s.`Q,t2=s.`Q^j,tb=s.`QBase,p='.sc',ns=s.`Z`qspace,un=u?u:(ns?ns:s.fun),unc=^1#7'_`H-'),r`C,l,imn=@Ui^x(un),im,b,e`5!rs`Ft1`Ft2^5ssl)t1=t2^b@u!ns)ns#6c`5!tb)tb='$P`5dc)dc=@odc)`8;`cdc='d1'`5tb^S$P`Fdc^Sd1$j12';`6dc^Sd2$j22';p`i}t1=ns+'.'+dc+'.'+p+tb}rs=$5'+(@A?'s'`n+'://'+t1+'/b/ss/'+^4+'/'+(s.#0?'5.1':'1'$UH.19.4/'+$1+'?AQB=1&ndh=1'+(q?q`n+'&AQE=1'`5^g@Ss.^o`F`S>5.5)rs=^s#A4095);`crs=^s#A2047)`pid@1br(id,rs);$y}`ps.d.images&&`S>=3^w!s.^n||`S>=7)^w@Y<0||`S>=6.1)`F!s.rc)s.rc`C`5!^V){^V=1`5!s.rl)s.rl`C;@Cn]`N;^T'@u`z`ml)`z.`B@J)',750)^bl=@Cn]`5l){r.t=ta;r.u#6;r.r=rs;l[l`A]=r;`2''}imn+='^x^V;^V++}im=`I[imn]`5!im)im=`I[im@znew Image;im^zl=0;im.o^L`7'e`H^Z^zl=1;`Lwd=`z,s`5wd`ml){s=#5`B;s@J`Unrs--`5!$E)`Xm(\"rr\")}')`5!$E@1nrs=1;`Xm('rs')}`c$E++;im@O=rs`5rs`4$A=@p0^w!ta||ta^S_self$sta^S_top$s(`I.@7&&ta==`I.@7))){b=e`h;^C!im^zl&&e`d-b`d<500)e`h}`2''}`2'<im'+'g sr'+'c=$trs+'\" width=1 #1=1 border=0 alt=\"\">'`9gg`0v`1`5!`I['s^xv])`I['s^xv]`i;`2`I['s^xv]`9glf`0t,a`Ft`30,2)^S$m`32);`Ls=^Z,v=s.gg(t)`5v)s#Xv`9gl`0v`1`5#F)`Mv,`H,'gl@00)`9gv`0v`1;`2s['vpm^xv]?s['vpv^xv]:(s[v]?s[v]`n`9havf`0t,a`1,b=t`30,4),x=t`34),n=^Hx),k='g^xt,m='vpm^xt,q=t,v=s.`W@bVa#Ae=s.`W@b^Ws,mn;@d$Ft)`5s[k]`F$9||@X||^O`F$9){mn=$9`30,1)`E()+$9`31)`5$G){v=$G.^KVars;e=$G.^K^Ws}}v=v?v+`H+^h+`H+^h2:''`5v@S`Mv,`H,'is@0t))s[k]`i`5`J#2'&&e)@ds.fs(s[k],e)}s[m]=0`5`J^R`KD';`6`J`ZID`Kvid';`6`J^N^Qg'`j`6`J`b^Qr'`j`6`Jvmk$s`J`Z@R`Kvmt';`6`J`D^Qvmf'`5@A^5`D^j)s[k]`i}`6`J`D^j^Qvmf'`5!@A^5`D)s[k]`i}`6`J@L^Qce'`5s[k]`E()^SAUTO')@d'ISO8859-1';`6s.em==2)@d'UTF-8'}`6`J`Z`qspace`Kns';`6`Jc`O`Kcdp';`6`J^0@G`Kcl';`6`J^y`Kvvp';`6`J@N`Kcc';`6`J$d`Kch';`6`J#K^IID`Kxact';`6`J$2`Kv0';`6`J^a`Ks';`6`J^A`Kc';`6`J`s^u`Kj';`6`J`k`Kv';`6`J^0@I`Kk';`6`J^7@D`Kbw';`6`J^7^k`Kbh';`6`J`l`Kct';`6`J@8`Khp';`6`Jp^P`Kp';`6#Ex)`Fb^Sprop`Kc$Z`6b^SeVar`Kv$Z`6b^Slist`Kl$Z`6b^Shier^Qh'+n`j`ps[k]@t`W`q'@t`W^c')$H+='&'+q+'$q(t`30,3)!='pev'?@hs[k]):s[k]);}`2''`9hav`0`1;$H`i;`M^i,`H,'hav@00);`2$H`9lnf`0^l`8@3`8:'';`Lte=t`4@q`5$Tte>0&&h`4t`3te$a>=0)`2t`30,te);`2''`9ln`0h`1,n=s.`W`qs`5n)`2`Mn,`H,'ln@0h);`2''`9ltdf`0^l`8@3`8:'';`Lqi=h`4'?^Yh=qi>=0?h`30,qi):h`5$Th`3h`A-(t`A$a^S.'+t)`21;`20`9ltef`0^l`8@3`8:''`5$Th`4t)>=0)`21;`20`9lt`0h`1,lft=s.`WDow^LFile^cs,lef=s.`WEx`r,$3=s.`WIn`r;$3=$3?$3:`I`P^D@7;h=h`8`5s.^KDow^LLinks&&lf$T`Mlft,`H#Id@0h))`2'd'`5s.^K@K&&h`30,1)!='# '^wlef||$3)^w!lef||`Mlef,`H#Ie@0h))^w!$3$r`M$3,`H#Ie@0h)))`2'e';`2''`9lc`7'e`H`Ls=`B,b=^f(^Z,\"`o\"`U$z=$7^Z`Ut(`U$z=0`5b)`2^Z$u`2$0'`Ubc`7'e`H`Ls=`B,f,^m`5s.d^5d.all^5d.all.cppXYctnr)$y;^O=e@O`Y?e@O`Y:e$e;^m`7\"s\",\"`Le@9@u^O^w^O.tag`q||^O^8`Y||^O^8Node))s.t()`e}\");^m(s`Ueo=0'`Uoh`0o`1,l=`I`P,h=o^q?o^q:'',i,j,k,p;i=h`4':^Yj=h`4'?^Yk=h`4'/')`5h^wi<0||(j>=0&&i>j)||(k>=0&&i>k))$Wo`g#T`g`A>1?o`g:(l`g?l`g`n;i=l.path@7`f'/^Yh=(p?p+'//'`n+(o^D?o^D:(l^D?l^D`n)+(h`30,1)!='/'?l.path@7`30,i<0?0:i$U'`n+h}`2h`9ot`0o){`Lt=o.tag`q;t=$Tt`E?t`E$X`5`JSHAPE')t`i`5t`F`JINPUT'&&@E&&@E`E)t=@E`E();`6!$To^q)t='A';}`2t`9oid`0o`1,^J,p,c,n`i,x=0`5t@S^6$Wo`g;c=o.`o`5o^q^w`JA$s`JAREA')^w!c$rp||p`8`4'`s$p0))n@x`6c@r^1s.rep(^1s.rep@oc,\"\\r@s\"\\n@s\"\\t@s' `H^Yx=2}`6$g^w`JINPUT$s`JSUBMIT')@r$g;x=3}`6o@O&&`JIMAGE')n=o@O`5$S^6=^sn$6;^6t=x}}`2^6`9rqf`0t,un`1,e=t`4@q,u=e>=0?`H+t`30,e)+`H:'';`2u&&u`4`H+un+`H)>=0?@it`3e$a:''`9rq`0un`1,c#6`4`H),v=^d@Usq'),q`i`5c<0)`2`Mv,'&`Hrq@0un);`2`M#7`H,'rq',0)`9sqp`0t,a`1,e=t`4@q,q=e<0?'':@it`3e+1)`Usqq[q]`i`5e>=0)`Mt`30,e),`H@m`20`9sqs`0#7q`1;^Gu[u@zq;`20`9sq`0q`1,k=@Usq',v=^dk),x,c=0;^Gq`C;^Gu`C;^Gq[q]`i;`Mv,'&`Hsqp',0);`M^4,`H@mv`i;`vx$4^Gu`V)^Gq[^Gu[x]]+=(^Gq[^Gu[x]]?`H`n+x;`vx$4^Gq`V^5sqq[x]^wx==q||c<2)){v+=(v#R'`n+^Gq[x]+'`ax);c++}`2^ek,v,0)`9wdl`7'e`H`Ls=`B,r=$0,b=^f(`I,\"o^L\"),i,o,oc`5b)r=^Z$u`vi=0;i<s.d.`Ws`A^X{o=s.d.`Ws[i];oc=o.`o?\"\"+o.`o:\"\"`5(oc`4$M<0||oc`4\"^zoc(\")>=0)#Tc`4$k<0)^f(o,\"`o\",0,s.lc);}`2r^Y`Is`0`1`5`S>3^w!^g$rs.^o||`S#Z`Fs.b^5$O^W)s.$O^W('`o#M);`6s.b^5b.add^W$L)s.b.add^W$L('click#M,false);`c^f(`I,'o^L',0,`Il)}`9vs`0x`1,v=s.`Z^U,g=s.`Z^U#Ok=@Uvsn^x^4+(g?'^xg`n,n=^dk),e`h,y=e.g@Q);e.s@Qy+10@y1900:0))`5v){v*=100`5!n`F!^ek,x,e))`20;n=x`pn%10000>v)`20}`21`9dyasmf`0t,m`F$Tm&&m`4t)>=0)`21;`20`9dyasf`0t,m`1,i=t?t`4@q:-1,n,x`5i>=0&&m){`Ln=t`30,i),x=t`3i+1)`5`Mx,`H,'dyasm@0m))`2n}`20`9uns`0`1,x=s.`RSele^I,l=s.`RList,m=s.`RM#D,n,i;^4=^4`8`5x&&l`F!m)m=`I`P^D`5!m.toLowerCase)m`i+m;l=l`8;m=m`8;n=`Ml,';`Hdyas@0m)`5n)^4=n}i=^4`4`H`Ufun=i<0?^4:^4`30,i)`9sa`0un`1;^4#6`5!@B)@B#6;`6(`H+@B+`H)`4un)<0)@B+=`H+un;^4s()`9m_i`0n,a`1,m,f=n`30,1),r,l,i`5!`Xl)`Xl`C`5!`Xnl)`Xnl`N;m=`Xl[n]`5!a&&m&&#G@Sm@4)`Xa(n)`5!m){m`C,m._c=@Um';m@4n=`I`mn;m@4l=s@4l;m@4l[m@4@zm;`I`mn++;m.s=s;m._n=n;$B`N('_c`H_in`H_il`H_i`H_e`H_d`H_dl`Hs`Hn`H_r`H_g`H_g1`H_t`H_t1`H_x`H_x1`H_rs`H_rr`H_l'`Um_l[@zm;`Xnl[`Xnl`A]=n}`6m._r@Sm._m){r=m._r;r._m=m;l=$B;`vi=0;i<l`A^X@um[l[i]])r[l[i]]=m[l[i]];r@4l[r@4@zr;m=`Xl[@zr`pf==f`E())s[@zm;`2m`9m_a`7'n`Hg`H@u!g)g=@F;`Ls=`B,c=s[g@g,m,x,f=0`5!c)c=`I$h@g`5c&&s_d)s[g]`7\"s\",s_ft(s_d(c)));x=s[g]`5!x)x=s[g]=`I$h];m=`Xi(n,1)`5x){m@4=f=1`5(\"\"+x)`4\"fun^I\")>=0)x(s);`c`Xm(\"x\",n,x)}m=`Xi(n,1)`5@kl)@kl=@k=0;`tt();`2f'`Um_m`0t,n,d#W'^xt;`Ls=^Z,i,x,m,f='^xt`5`Xl&&`Xnl)`vi=0;i<`Xnl`A^X{x=`Xnl[i]`5!n||x==$Sm=`Xi(x)`5m[t]`F`J_d')`21`5d)m#ad);`cm#a)`pm[t+1]@Sm[f]`Fd)$xd);`c$x)}m[f]=1}}`20`9@f`0n,u,d,l`1,m,i=n`4':'),g=i<0?@F:n`3i+1),o=0,f,c=s.h?s.h:s.b,^m`5i>=0)n=n`30,i);m=`Xi(n)`5(l$r`Xa(n,g))&&u^5d&&c^5$Q`Y`Fd){@k=1;@kl=1`p@A)u=^1u,$5:`Hhttps:^Yf`7'e`H`B.m_a(\"@e\",$tg+'\")^Y^m`7's`Hf`Hu`Hc`H`Le,o=0@9o=s.$Q`Y(\"script\")`5o){@E=\"text/`s\"`5f)o.o^L=f;o@O=u;c.appendChild(o)}`eo=0}`2o^Yo=^m(s,f,u,c)}`cm=`Xi(n);#G=1;`2m`9vo1`0t,a`Fa[t]||$b)^Z#Xa[t]`9vo2`0t,a`F#b{a#X^Z[t]`5#b$b=1}`9dlt`7'`Ls=`B,d`h,i,vo,f=0`5`tl)`vi=0;i<`tl`A^X{vo=`tl[i]`5vo`F!`Xm(\"d\")||d`d-$N>=^E){`tl[i]=0;s.t(@v}`cf=1}`p`ti)clear#Bout(`ti`Udli=0`5f`F!`ti)`ti=^T`tt,^E)}`c`tl=0'`Udl`0vo`1,d`h`5!@vvo`C;`M^2,`H$I2',@v;$N=d`d`5!`tl)`tl`N;`tl[`tl`A]=vo`5!^E)^E=250;`tt()`9t`0vo,id`1,trk=1,tm`h,sed=Math&&@V#3?@V#C@V#3()*10000000000000):tm`d,$1='s'+@V#Ctm`d/10800000)%10+sed,y=tm.g@Q),vt=tm.getDate($U`xMonth($U'@yy+1900:y)+' `xHour$V:`xMinute$V:`xSecond$V `xDay()+' `x#BzoneO$8(),^m,^3=s.g^3(),ta`i,q`i,qs`i,#4`i,vb`C#L^2`Uuns()`5!s.td){`Ltl=^3`P,a,o,i,x`i,c`i,v`i,p`i,bw`i,bh`i,^M0',k=^e@Ucc`H$0',0@2,hp`i,ct`i,pn=0,ps`5^B&&^B.prototype){^M1'`5j.m#D){^M2'`5tm.setUTCDate){^M3'`5^g^5^o&&`S#Z^M4'`5pn.toPrecisio$S^M5';a`N`5a.forEach){^M6';i=0;o`C;^m`7'o`H`Le,i=0@9i=new Iterator(o)`e}`2i^Yi=^m(o)`5i&&i.next)^M7'#V`p`S>=4)x=^rwidth+'x'+^r#1`5s.isns||s.^n`F`S>=3$c`k(@2`5`S>=4){c=^rpixelDepth;bw=`I#J@D;bh=`I#J^k}}$J=s.n.p^P}`6^g`F`S>=4$c`k(@2;c=^r^A`5`S#Z{bw=s.d.^9`Y.o$8@D;bh=s.d.^9`Y.o$8^k`5!s.^o^5b){^m`7's`Htl`H`Le,hp=0`uh$n\");hp=s.b.isH$n(tl)?\"Y\":\"N\"`e}`2hp^Yhp=^m(s,tl);^m`7's`H`Le,ct=0`uclientCaps\");ct=s.b.`l`e}`2ct^Yct=^m(s)}}}`cr`i`p$J)^Cpn<$J`A&&pn<30){ps=^s$J[pn].@7$6#S`5p`4ps)<0)p+=ps;pn++}s.^a=x;s.^A=c;s.`s^u=j;s.`k=v;s.^0@I=k;s.^7@D=bw;s.^7^k=bh;s.`l=ct;s.@8=hp;s.p^P=p;s.td=1`p@v{`M^2,`H$I2',vb);`M^2,`H$I1',@v`ps.useP^P)s.doP^P(s);`Ll=`I`P,r=^3.^9.`b`5!s.^N)s.^N=l^q?l^q:l`5!s.`b@Ss._1_`b@1`b=r;s._1_`b=1}`Xm('g')`5(vo&&$N)$r`Xm('d')`F@X||^O){`Lo=^O?^O:@X`5!o)`2'';`Lp=$F'#N`q'),w=1,^J,@l,x=^6t,h,l,i,oc`5^O#T==^O){^Co@Sn@tBODY'){o=o^8`Y?o^8`Y:o^8Node`5!o)`2'';^J;@l;x=^6t}oc=o.`o?''+o.`o:''`5(oc`4$M>=0#Tc`4\"^zoc(\")<0)||oc`4$k>=0)`2''}ta=n?o$e:1;h@xi=h`4'?^Yh=s.`W@n^B||i<0?h:h`30,i);l=s.`W`q?s.`W`q:s.ln(h);t=s.`W^c?s.`W^c`8:s.lt(h)`5t^wh||l))q+=$A=$z^x(`Jd$s`Je'?@ht):'o')+(h?$Av1`ah)`n+(l?$Av2`al)`n;`ctrk=0`5s.^K@Z`F!p$W$F'^N^Yw=0}^J;i=o.sourceIndex`5@H')@r@H^Yx=1;i=1`pp&&n&&t)qs='&pid`a^sp,255))+(w#Rpidt$qw`n+'&oid`a^sn$6)+(x#Roidt$qx`n+'&ot`at)+(i#Roi$qi`n}`p!trk@Sqs)`2'';@w=s.vs(sed)`5trk`F@w)#4=s.mr($1,(vt#Rt`avt)`n+s.hav()+q+(qs?qs:s.rq(^4)),0,id,ta);qs`i;`Xm('t')`5s.p_r)s.p_r(`U`b`i}^G(qs);^b`t(@v;`p@v`M^2,`H$I1',vb`G''`5#F)`I^z$z=`I^zeo=`I^z`W`q=`I^z`W^c`i`5!id@Ss.tc@1tc=1;s.flush`T()}`2#4`9tl`0o,t,n,vo`1;@X=$7o`U`W^c=t;s.`W`q=n;s.t(@v}`5pg){`I^zco`0o){`L^t\"_\",1,#U`2$7o)`9wd^zgs`0u$S`L^t#71,#U`2s.t()`9wd^zdc`0u$S`L^t#7#U`2s.t()}}@A=(`I`P`g`8`4$5s@p0`Ud=^9;s.b=s.d.body`5$o`Y#Q`q@1h=$o`Y#Q`q('HEAD')`5s.h)s.h=s.h[0]}s.n=navigator;s.u=s.n.userAgent;@Y=s.u`4'N$l6/^Y`Lapn$R`q,v$R^u,ie=v`4#9'),o=s.u`4'@T '),i`5v`4'@T@p0||o>0)apn='@T';^g$K^SMicrosoft Internet Explorer'`Uisns$K^SN$l'`U^n$K^S@T'`U^o=(s.u`4'Mac@p0)`5o>0)`S`ws.u`3o+6));`6ie>0){`S=^Hi=v`3ie+5))`5`S>3)`S`wi)}`6@Y>0)`S`ws.u`3@Y+10));`c`S`wv`Uem=0`5^B#P^v){i=^p^B#P^v(256))`E(`Uem=(i^S%C4%80'?2:(i^S%U0100'?1:0))}s.sa(un`Uvl_l='^R,`ZID,vmk,`Z@R,`D,`D^j,ppu,@L,`Z`qspace,c`O,^0@G,#N`q,^N,`b,@N';^i=^h+',^y,$d,server,#N^c,#K^IID,purchaseID,$2,state,zip,#2,products,`W`q,`W^c';`v`Ln=1;n<51;n++)^i+=',prop@e,eVar@e,hier@e,list$Z^h2=',tnt,pe#81#82#83,^a,^A,`s^u,`k,^0@I,^7@D,^7^k,`l,@8,p^P';^i+=^h2;^2=^i+',`Q,`Q^j,`QBase,fpC`O,@P`T,#0,`Z^U,`Z^U#O`RSele^I,`RList,`RM#D,^KDow^LLinks,^K@K,^K@Z,`W@n^B,`WDow^LFile^cs,`WEx`r,`WIn`r,`W@bVa#A`W@b^Ws,`W`qs,$z,eo,_1_`b';#F=pg#L^2)`5!ss)`Is()",c=window,h=c.s_c_il,n=navigator,i=n.userAgent,g=n.appVersion,l=g.indexOf("MSIE "),m=i.indexOf("Netscape6/"),d,e,a;if(b){b=b.toLowerCase();if(h)for(e=0;e<h.length;e++){a=h[e];if(a._c=="s_c")if(a.oun==b)return a;else if(a.fs&&a.sa&&a.fs(a.oun,b)){a.sa(b);return a}}}c.s_r=new Function("x","o","n","var i=x.indexOf(o);if(i>=0&&x.split)x=(x.split(o)).join(n);else while(i>=0){x=x.substring(0,i)+n+x.substring(i+o.length);i=x.indexOf(o)}return x");c.s_d=new Function("x","var t='`^@$#',l='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',d,n=0,b,k,w,i=x.lastIndexOf('~~');if(i>0){d=x.substring(0,i);x=x.substring(i+2);while(d){w=d;i=d.indexOf('~');if(i>0){w=d.substring(0,i);d=d.substring(i+1)}else d='';b=(n-n%62)/62;k=n-b*62;k=t.substring(b,b+1)+l.substring(k,k+1);x=s_r(x,k,w);n++}for(i=0;i<5;i++){w=t.substring(i,i+1);x=s_r(x,w+' ',w)}}return x");c.s_fe=new Function("c","return s_r(s_r(s_r(c,'\\\\','\\\\\\\\'),'\"','\\\\\"'),\"\\n\",\"\\\\n\")");c.s_fa=new Function("f","var s=f.indexOf('(')+1,e=f.indexOf(')'),a='',c;while(s>=0&&s<e){c=f.substring(s,s+1);if(c==',')a+='\",\"';else if((\"\\n\\r\\t \").indexOf(c)<0)a+=c;s++}return a?'\"'+a+'\"':a");c.s_ft=new Function("c","c+='';var s,e,o,a,d,q,f,h,x;s=c.indexOf('=function(');while(s>=0){s++;d=1;q='';x=0;f=c.substring(s);a=s_fa(f);e=o=c.indexOf('{',s);e++;while(d>0){h=c.substring(e,e+1);if(q){if(h==q&&!x)q='';if(h=='\\\\')x=x?0:1;else x=0}else{if(h=='\"'||h==\"'\")q=h;if(h=='{')d++;if(h=='}')d--}if(d>0)e++}c=c.substring(0,s)+'new Function('+(a?a+',':'')+'\"'+s_fe(c.substring(o+1,e))+'\")'+c.substring(e+1);s=c.indexOf('=function(')}return c;");f=s_d(f);if(l>0){d=parseInt(e=g.substring(l+5));if(d>3)d=parseFloat(e)}else if(m>0)d=parseFloat(i.substring(m+10));else d=parseFloat(g);if(d>=5&&g.indexOf("Opera")<0&&i.indexOf("Opera")<0){c.s_c=new Function("un","pg","ss","var s=this;"+f);return new s_c(b,j,k)}else a=new Function("un","pg","ss","var s=new Object;"+s_ft(f)+";return s");return a(b,j,k)};(function(){s.linkInternalFilters="javascript:,codeplex.com";s.pageName=window.location.hostname.toLowerCase()+window.location.pathname.toLowerCase();var c=window.location.hostname.toLowerCase();s.server=c;s.channel=c.replace(/\.codeplex\.com/,"");s.prop1="codeplex";s.prop2="en-us";s.prop3=document.title;var e=window.location.pathname.substring(1).toLowerCase(),d=getOmniPath(e,0,1),b=d.split("/");if(b.length>0)s.prop4=s.channel+": "+b[0];if(b.length>1)s.prop5=s.prop4+": "+b[1];s.prop10=window.location.href.toLowerCase();var a;a=getOmniMetaTagData("t_omni_title");if(a)s.prop3=a;a=getOmniMetaTagData("wt.pi");if(a)s.prop6=a;s.prop36=s.getQueryParam("ProjectSearchText");s.prop37=s.getQueryParam("SearchText");s.prop38=s.getQueryParam("TagName");s.eVar47="D=User-Agent";s.eVar44=setOmniID()})();try{var s_code=s.t();s_code&&document.write(s_code)}catch(err){};
window.tinyMCEPreInit = {
    suffix: '',
    base: 'http://download-codeplex.sec.s-msft.com/scripts/v20474/tiny_mce'
};(function(c){var a=/^\s*|\s*$/g,d;var b={majorVersion:"3",minorVersion:"3.8",releaseDate:"2010-06-30",_init:function(){var r=this,o=document,m=navigator,f=m.userAgent,l,e,k,j,h,q;r.isOpera=c.opera&&opera.buildNumber;r.isWebKit=/WebKit/.test(f);r.isIE=!r.isWebKit&&!r.isOpera&&(/MSIE/gi).test(f)&&(/Explorer/gi).test(m.appName);r.isIE6=r.isIE&&/MSIE [56]/.test(f);r.isGecko=!r.isWebKit&&/Gecko/.test(f);r.isMac=f.indexOf("Mac")!=-1;r.isAir=/adobeair/i.test(f);r.isIDevice=/(iPad|iPhone)/.test(f);if(c.tinyMCEPreInit){r.suffix=tinyMCEPreInit.suffix;r.baseURL=tinyMCEPreInit.base;r.query=tinyMCEPreInit.query;return}r.suffix="";e=o.getElementsByTagName("base");for(l=0;l<e.length;l++){if(q=e[l].href){if(/^https?:\/\/[^\/]+$/.test(q)){q+="/"}j=q?q.match(/.*\//)[0]:""}}function g(i){if(i.src&&/tiny_mce(|_gzip|_jquery|_prototype)(_dev|_src)?.js/.test(i.src)){if(/_(src|dev)\.js/g.test(i.src)){r.suffix="_src"}if((h=i.src.indexOf("?"))!=-1){r.query=i.src.substring(h+1)}r.baseURL=i.src.substring(0,i.src.lastIndexOf("/"));if(j&&r.baseURL.indexOf("://")==-1&&r.baseURL.indexOf("/")!==0){r.baseURL=j+r.baseURL}return r.baseURL}return null}e=o.getElementsByTagName("script");for(l=0;l<e.length;l++){if(g(e[l])){return}}k=o.getElementsByTagName("head")[0];if(k){e=k.getElementsByTagName("script");for(l=0;l<e.length;l++){if(g(e[l])){return}}}return},is:function(f,e){if(!e){return f!==d}if(e=="array"&&(f.hasOwnProperty&&f instanceof Array)){return true}return typeof(f)==e},each:function(h,e,g){var i,f;if(!h){return 0}g=g||h;if(h.length!==d){for(i=0,f=h.length;i<f;i++){if(e.call(g,h[i],i,h)===false){return 0}}}else{for(i in h){if(h.hasOwnProperty(i)){if(e.call(g,h[i],i,h)===false){return 0}}}}return 1},map:function(e,g){var h=[];b.each(e,function(f){h.push(g(f))});return h},grep:function(e,g){var h=[];b.each(e,function(f){if(!g||g(f)){h.push(f)}});return h},inArray:function(f,g){var h,e;if(f){for(h=0,e=f.length;h<e;h++){if(f[h]===g){return h}}}return -1},extend:function(k,j){var h,g,f=arguments;for(h=1,g=f.length;h<g;h++){j=f[h];b.each(j,function(e,i){if(e!==d){k[i]=e}})}return k},trim:function(e){return(e?""+e:"").replace(a,"")},create:function(m,e){var l=this,f,h,i,j,g,k=0;m=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(m);i=m[3].match(/(^|\.)(\w+)$/i)[2];h=l.createNS(m[3].replace(/\.\w+$/,""));if(h[i]){return}if(m[2]=="static"){h[i]=e;if(this.onCreate){this.onCreate(m[2],m[3],h[i])}return}if(!e[i]){e[i]=function(){};k=1}h[i]=e[i];l.extend(h[i].prototype,e);if(m[5]){f=l.resolve(m[5]).prototype;j=m[5].match(/\.(\w+)$/i)[1];g=h[i];if(k){h[i]=function(){return f[j].apply(this,arguments)}}else{h[i]=function(){this.parent=f[j];return g.apply(this,arguments)}}h[i].prototype[i]=h[i];l.each(f,function(o,p){h[i].prototype[p]=f[p]});l.each(e,function(o,p){if(f[p]){h[i].prototype[p]=function(){this.parent=f[p];return o.apply(this,arguments)}}else{if(p!=i){h[i].prototype[p]=o}}})}l.each(e["static"],function(o,p){h[i][p]=o});if(this.onCreate){this.onCreate(m[2],m[3],h[i].prototype)}},walk:function(h,g,i,e){e=e||this;if(h){if(i){h=h[i]}b.each(h,function(j,f){if(g.call(e,j,f,i)===false){return false}b.walk(j,g,i,e)})}},createNS:function(h,g){var f,e;g=g||c;h=h.split(".");for(f=0;f<h.length;f++){e=h[f];if(!g[e]){g[e]={}}g=g[e]}return g},resolve:function(h,g){var f,e;g=g||c;h=h.split(".");for(f=0,e=h.length;f<e;f++){g=g[h[f]];if(!g){break}}return g},addUnload:function(i,h){var g=this;i={func:i,scope:h||this};if(!g.unloads){function e(){var f=g.unloads,k,l;if(f){for(l in f){k=f[l];if(k&&k.func){k.func.call(k.scope,1)}}if(c.detachEvent){c.detachEvent("onbeforeunload",j);c.detachEvent("onunload",e)}else{if(c.removeEventListener){c.removeEventListener("unload",e,false)}}g.unloads=k=f=w=e=0;if(c.CollectGarbage){CollectGarbage()}}}function j(){var k=document;if(k.readyState=="interactive"){function f(){k.detachEvent("onstop",f);if(e){e()}k=0}if(k){k.attachEvent("onstop",f)}c.setTimeout(function(){if(k){k.detachEvent("onstop",f)}},0)}}if(c.attachEvent){c.attachEvent("onunload",e);c.attachEvent("onbeforeunload",j)}else{if(c.addEventListener){c.addEventListener("unload",e,false)}}g.unloads=[i]}else{g.unloads.push(i)}return i},removeUnload:function(h){var e=this.unloads,g=null;b.each(e,function(j,f){if(j&&j.func==h){e.splice(f,1);g=h;return false}});return g},explode:function(e,f){return e?b.map(e.split(f||","),b.trim):e},_addVer:function(f){var e;if(!this.query){return f}e=(f.indexOf("?")==-1?"?":"&")+this.query;if(f.indexOf("#")==-1){return f+e}return f.replace("#",e+"#")}};b._init();c.tinymce=c.tinyMCE=b})(window);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(e,d){if(a==e.cb){c=a;b.splice(d,1);return false}});return c},dispatch:function(){var f,d=arguments,e,b=this.listeners,g;for(e=0;e<b.length;e++){g=b[e];f=g.cb.apply(g.scope,d);if(f===false){break}}return f}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var f=this,h,d,c;e=tinymce.trim(e);g=f.settings=g||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(e)||/^\s*#/.test(e)){f.source=e;return}if(e.indexOf("/")===0&&e.indexOf("//")!==0){e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e}if(!/^\w*:?\/\//.test(e)){e=(g.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(g.base_uri.path,e)}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,j){var k=e[j];if(k){k=k.replace(/\(mce_at\)/g,"@@")}f[b]=k});if(c=g.base_uri){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host=="mce_host"){f.port=c.port}if(!f.host||f.host=="mce_host"){f.host=c.host}f.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var c=this,d;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:c});if((b.host!="mce_host"&&c.host!=b.host&&b.host)||c.port!=b.port||c.protocol!=b.protocol){return b.getURI()}d=c.toRelPath(c.path,b.path);if(b.query){d+="?"+b.query}if(b.anchor){d+="#"+b.anchor}return d},toAbsolute:function(b,c){var b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d="",e,b;g=g.substring(0,g.lastIndexOf("/"));g=g.split("/");c=h.split("/");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f==1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+="../"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+="/"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\/$/.test(f)?"/":"";e=e.split("/");f=f.split("/");a(e,function(i){if(i){h.push(i)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length==0||f[c]=="."){continue}if(f[c]==".."){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join("/")}else{g=e.slice(0,c).join("/")+"/"+h.reverse().join("/")}if(g.indexOf("/")!==0){g="/"+g}if(d&&g.lastIndexOf("/")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split("&"),function(e){e=e.split("=");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(j,b,g,f,i,c){var h="";a(b,function(e,d){h+=(!h?"":"&")+escape(d)+"="+escape(e)});this.set(j,h,g,f,i,c)},get:function(i){var h=document.cookie,g,f=i+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!=0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(i,b,g,f,h,c){document.cookie=i+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(e,b){var c=new Date();c.setTime(c.getTime()-1000);this.set(e,"",c,b,c)}})})();tinymce.create("static tinymce.util.JSON",{serialize:function(e){var c,a,d=tinymce.util.JSON.serialize,b;if(e==null){return"null"}b=typeof e;if(b=="string"){a="\bb\tt\nn\ff\rr\"\"''\\\\";return'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(g,f){c=a.indexOf(f);if(c+1){return"\\"+a.charAt(c+1)}g=f.charCodeAt().toString(16);return"\\u"+"0000".substring(g.length)+g})+'"'}if(b=="object"){if(e.hasOwnProperty&&e instanceof Array){for(c=0,a="[";c<e.length;c++){a+=(c>0?",":"")+d(e[c])}return a+"]"}a="{";for(c in e){a+=typeof e[c]!="function"?(a.length>1?',"':'"')+c+'":'+d(e[c]):""}return a+"}"}return""+e},parse:function(s){try{return eval("("+s+")")}catch(ex){}}});tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(i){a=0;try{a=new ActiveXObject(i)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)}}a=null}else{b.setTimeout(f,10)}}if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=c({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=c(this.settings,f);f.success=function(h,g){h=b.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){e.call(f.error_scope||f.scope,h,g)};f.data=b.serialize({id:f.id||"c"+(this.count++),method:f.method,params:f.params});f.content_type="application/json";a.send(f)},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(m){var k=m.each,j=m.is,i=m.isWebKit,d=m.isIE,a=/^(H[1-6R]|P|DIV|ADDRESS|PRE|FORM|T(ABLE|BODY|HEAD|FOOT|H|R|D)|LI|OL|UL|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|MENU|ISINDEX|SAMP)$/,e=g("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),f=g("src,href,style,coords,shape"),c={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},n=/[<>&\"]/g,b=/^([a-z0-9],?)+$/i,h=/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)(\s*\/?)>/g,l=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;function g(q){var p={},o;q=q.split(",");for(o=q.length;o>=0;o--){p[q[o]]=1}return p}m.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(u,q){var p=this,o;p.doc=u;p.win=window;p.files={};p.cssFlicker=false;p.counter=0;p.boxModel=!m.isIE||u.compatMode=="CSS1Compat";p.stdMode=u.documentMode===8;p.settings=q=m.extend({keep_values:false,hex_colors:1,process_html:1},q);if(m.isIE6){try{u.execCommand("BackgroundImageCache",false,true)}catch(r){p.cssFlicker=true}}if(q.valid_styles){p._styles={};k(q.valid_styles,function(t,s){p._styles[s]=m.explode(t)})}m.addUnload(p.destroy,p)},getRoot:function(){var o=this,p=o.settings;return(p&&o.get(p.root_element))||o.doc.body},getViewPort:function(p){var q,o;p=!p?this.win:p;q=p.document;o=this.boxModel?q.documentElement:q.body;return{x:p.pageXOffset||o.scrollLeft,y:p.pageYOffset||o.scrollTop,w:p.innerWidth||o.clientWidth,h:p.innerHeight||o.clientHeight}},getRect:function(s){var r,o=this,q;s=o.get(s);r=o.getPos(s);q=o.getSize(s);return{x:r.x,y:r.y,w:q.w,h:q.h}},getSize:function(r){var p=this,o,q;r=p.get(r);o=p.getStyle(r,"width");q=p.getStyle(r,"height");if(o.indexOf("px")===-1){o=0}if(q.indexOf("px")===-1){q=0}return{w:parseInt(o)||r.offsetWidth||r.clientWidth,h:parseInt(q)||r.offsetHeight||r.clientHeight}},getParent:function(q,p,o){return this.getParents(q,p,o,false)},getParents:function(z,v,s,y){var q=this,p,u=q.settings,x=[];z=q.get(z);y=y===undefined;if(u.strict_root){s=s||q.getRoot()}if(j(v,"string")){p=v;if(v==="*"){v=function(o){return o.nodeType==1}}else{v=function(o){return q.is(o,p)}}}while(z){if(z==s||!z.nodeType||z.nodeType===9){break}if(!v||v(z)){if(y){x.push(z)}else{return z}}z=z.parentNode}return y?x:null},get:function(o){var p;if(o&&this.doc&&typeof(o)=="string"){p=o;o=this.doc.getElementById(o);if(o&&o.id!==p){return this.doc.getElementsByName(p)[1]}}return o},getNext:function(p,o){return this._findSib(p,o,"nextSibling")},getPrev:function(p,o){return this._findSib(p,o,"previousSibling")},select:function(q,p){var o=this;return m.dom.Sizzle(q,o.get(p)||o.get(o.settings.root_element)||o.doc,[])},is:function(q,o){var p;if(q.length===undefined){if(o==="*"){return q.nodeType==1}if(b.test(o)){o=o.toLowerCase().split(/,/);q=q.nodeName.toLowerCase();for(p=o.length-1;p>=0;p--){if(o[p]==q){return true}}return false}}return m.dom.Sizzle.matches(o,q.nodeType?[q]:q).length>0},add:function(s,v,o,r,u){var q=this;return this.run(s,function(y){var x,t;x=j(v,"string")?q.doc.createElement(v):v;q.setAttribs(x,o);if(r){if(r.nodeType){x.appendChild(r)}else{q.setHTML(x,r)}}return !u?y.appendChild(x):x})},create:function(q,o,p){return this.add(this.doc.createElement(q),q,o,p,1)},createHTML:function(v,p,s){var u="",r=this,q;u+="<"+v;for(q in p){if(p.hasOwnProperty(q)){u+=" "+q+'="'+r.encode(p[q])+'"'}}if(m.is(s)){return u+">"+s+"</"+v+">"}return u+" />"},remove:function(o,p){return this.run(o,function(r){var q,s;q=r.parentNode;if(!q){return null}if(p){while(s=r.firstChild){if(!m.isIE||s.nodeType!==3||s.nodeValue){q.insertBefore(s,r)}else{r.removeChild(s)}}}return q.removeChild(r)})},setStyle:function(r,o,p){var q=this;return q.run(r,function(v){var u,t;u=v.style;o=o.replace(/-(\D)/g,function(x,s){return s.toUpperCase()});if(q.pixelStyles.test(o)&&(m.is(p,"number")||/^[\-0-9\.]+$/.test(p))){p+="px"}switch(o){case"opacity":if(d){u.filter=p===""?"":"alpha(opacity="+(p*100)+")";if(!r.currentStyle||!r.currentStyle.hasLayout){u.display="inline-block"}}u[o]=u["-moz-opacity"]=u["-khtml-opacity"]=p||"";break;case"float":d?u.styleFloat=p:u.cssFloat=p;break;default:u[o]=p||""}if(q.settings.update_styles){q.setAttrib(v,"_mce_style")}})},getStyle:function(r,o,q){r=this.get(r);if(!r){return false}if(this.doc.defaultView&&q){o=o.replace(/[A-Z]/g,function(s){return"-"+s});try{return this.doc.defaultView.getComputedStyle(r,null).getPropertyValue(o)}catch(p){return null}}o=o.replace(/-(\D)/g,function(t,s){return s.toUpperCase()});if(o=="float"){o=d?"styleFloat":"cssFloat"}if(r.currentStyle&&q){return r.currentStyle[o]}return r.style[o]},setStyles:function(u,v){var q=this,r=q.settings,p;p=r.update_styles;r.update_styles=0;k(v,function(o,s){q.setStyle(u,s,o)});r.update_styles=p;if(r.update_styles){q.setAttrib(u,r.cssText)}},setAttrib:function(q,r,o){var p=this;if(!q||!r){return}if(p.settings.strict){r=r.toLowerCase()}return this.run(q,function(u){var t=p.settings;switch(r){case"style":if(!j(o,"string")){k(o,function(s,x){p.setStyle(u,x,s)});return}if(t.keep_values){if(o&&!p._isRes(o)){u.setAttribute("_mce_style",o,2)}else{u.removeAttribute("_mce_style",2)}}u.style.cssText=o;break;case"class":u.className=o||"";break;case"src":case"href":if(t.keep_values){if(t.url_converter){o=t.url_converter.call(t.url_converter_scope||p,o,r,u)}p.setAttrib(u,"_mce_"+r,o,2)}break;case"shape":u.setAttribute("_mce_style",o);break}if(j(o)&&o!==null&&o.length!==0){u.setAttribute(r,""+o,2)}else{u.removeAttribute(r,2)}})},setAttribs:function(q,r){var p=this;return this.run(q,function(o){k(r,function(s,t){p.setAttrib(o,t,s)})})},getAttrib:function(r,s,q){var o,p=this;r=p.get(r);if(!r||r.nodeType!==1){return false}if(!j(q)){q=""}if(/^(src|href|style|coords|shape)$/.test(s)){o=r.getAttribute("_mce_"+s);if(o){return o}}if(d&&p.props[s]){o=r[p.props[s]];o=o&&o.nodeValue?o.nodeValue:o}if(!o){o=r.getAttribute(s,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(s)){if(r[p.props[s]]===true&&o===""){return s}return o?s:""}if(r.nodeName==="FORM"&&r.getAttributeNode(s)){return r.getAttributeNode(s).nodeValue}if(s==="style"){o=o||r.style.cssText;if(o){o=p.serializeStyle(p.parseStyle(o),r.nodeName);if(p.settings.keep_values&&!p._isRes(o)){r.setAttribute("_mce_style",o)}}}if(i&&s==="class"&&o){o=o.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(d){switch(s){case"rowspan":case"colspan":if(o===1){o=""}break;case"size":if(o==="+0"||o===20||o===0){o=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(o===0){o=""}break;case"hspace":if(o===-1){o=""}break;case"maxlength":case"tabindex":if(o===32768||o===2147483647||o==="32768"){o=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(o===65535){return s}return q;case"shape":o=o.toLowerCase();break;default:if(s.indexOf("on")===0&&o){o=(""+o).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1")}}}return(o!==undefined&&o!==null&&o!=="")?""+o:q},getPos:function(A,s){var p=this,o=0,z=0,u,v=p.doc,q;A=p.get(A);s=s||v.body;if(A){if(d&&!p.stdMode){A=A.getBoundingClientRect();u=p.boxModel?v.documentElement:v.body;o=p.getStyle(p.select("html")[0],"borderWidth");o=(o=="medium"||p.boxModel&&!p.isIE6)&&2||o;return{x:A.left+u.scrollLeft-o,y:A.top+u.scrollTop-o}}q=A;while(q&&q!=s&&q.nodeType){o+=q.offsetLeft||0;z+=q.offsetTop||0;q=q.offsetParent}q=A.parentNode;while(q&&q!=s&&q.nodeType){o-=q.scrollLeft||0;z-=q.scrollTop||0;q=q.parentNode}}return{x:o,y:z}},parseStyle:function(r){var u=this,v=u.settings,x={};if(!r){return x}function p(D,A,C){var z,B,o,y;z=x[D+"-top"+A];if(!z){return}B=x[D+"-right"+A];if(z!=B){return}o=x[D+"-bottom"+A];if(B!=o){return}y=x[D+"-left"+A];if(o!=y){return}x[C]=y;delete x[D+"-top"+A];delete x[D+"-right"+A];delete x[D+"-bottom"+A];delete x[D+"-left"+A]}function q(y,s,o,A){var z;z=x[s];if(!z){return}z=x[o];if(!z){return}z=x[A];if(!z){return}x[y]=x[s]+" "+x[o]+" "+x[A];delete x[s];delete x[o];delete x[A]}r=r.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_");k(r.split(";"),function(s){var o,t=[];if(s){s=s.replace(/_MCE_SEMI_/g,";");s=s.replace(/url\([^\)]+\)/g,function(y){t.push(y);return"url("+t.length+")"});s=s.split(":");o=m.trim(s[1]);o=o.replace(/url\(([^\)]+)\)/g,function(z,y){return t[parseInt(y)-1]});o=o.replace(/rgb\([^\)]+\)/g,function(y){return u.toHex(y)});if(v.url_converter){o=o.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(y,z){return"url("+v.url_converter.call(v.url_converter_scope||u,u.decode(z),"style",null)+")"})}x[m.trim(s[0]).toLowerCase()]=o}});p("border","","border");p("border","-width","border-width");p("border","-color","border-color");p("border","-style","border-style");p("padding","","padding");p("margin","","margin");q("border","border-width","border-style","border-color");if(d){if(x.border=="medium none"){x.border=""}}return x},serializeStyle:function(v,p){var q=this,r="";function u(s,o){if(o&&s){if(o.indexOf("-")===0){return}switch(o){case"font-weight":if(s==700){s="bold"}break;case"color":case"background-color":s=s.toLowerCase();break}r+=(r?" ":"")+o+": "+s+";"}}if(p&&q._styles){k(q._styles["*"],function(o){u(v[o],o)});k(q._styles[p.toLowerCase()],function(o){u(v[o],o)})}else{k(v,u)}return r},loadCSS:function(o){var q=this,r=q.doc,p;if(!o){o=""}p=q.select("head")[0];k(o.split(","),function(s){var t;if(q.files[s]){return}q.files[s]=true;t=q.create("link",{rel:"stylesheet",href:m._addVer(s)});if(d&&r.documentMode){t.onload=function(){r.recalc();t.onload=null}}p.appendChild(t)})},addClass:function(o,p){return this.run(o,function(q){var r;if(!p){return 0}if(this.hasClass(q,p)){return q.className}r=this.removeClass(q,p);return q.className=(r!=""?(r+" "):"")+p})},removeClass:function(q,r){var o=this,p;return o.run(q,function(t){var s;if(o.hasClass(t,r)){if(!p){p=new RegExp("(^|\\s+)"+r+"(\\s+|$)","g")}s=t.className.replace(p," ");s=m.trim(s!=" "?s:"");t.className=s;if(!s){t.removeAttribute("class");t.removeAttribute("className")}return s}return t.className})},hasClass:function(p,o){p=this.get(p);if(!p||!o){return false}return(" "+p.className+" ").indexOf(" "+o+" ")!==-1},show:function(o){return this.setStyle(o,"display","block")},hide:function(o){return this.setStyle(o,"display","none")},isHidden:function(o){o=this.get(o);return !o||o.style.display=="none"||this.getStyle(o,"display")=="none"},uniqueId:function(o){return(!o?"mce_":o)+(this.counter++)},setHTML:function(q,p){var o=this;return this.run(q,function(v){var r,t,s,z,u,r;p=o.processHTML(p);if(d){function y(){while(v.firstChild){v.firstChild.removeNode()}try{v.innerHTML="<br />"+p;v.removeChild(v.firstChild)}catch(x){r=o.create("div");r.innerHTML="<br />"+p;k(r.childNodes,function(B,A){if(A){v.appendChild(B)}})}}if(o.settings.fix_ie_paragraphs){p=p.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _mce_keep="true">&nbsp;</p>')}y();if(o.settings.fix_ie_paragraphs){s=v.getElementsByTagName("p");for(t=s.length-1,r=0;t>=0;t--){z=s[t];if(!z.hasChildNodes()){if(!z._mce_keep){r=1;break}z.removeAttribute("_mce_keep")}}}if(r){p=p.replace(/<p ([^>]+)>|<p>/ig,'<div $1 _mce_tmp="1">');p=p.replace(/<\/p>/gi,"</div>");y();if(o.settings.fix_ie_paragraphs){s=v.getElementsByTagName("DIV");for(t=s.length-1;t>=0;t--){z=s[t];if(z._mce_tmp){u=o.doc.createElement("p");z.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(A,x){var B;if(x!=="_mce_tmp"){B=z.getAttribute(x);if(!B&&x==="class"){B=z.className}u.setAttribute(x,B)}});for(r=0;r<z.childNodes.length;r++){u.appendChild(z.childNodes[r].cloneNode(true))}z.swapNode(u)}}}}}else{v.innerHTML=p}return p})},processHTML:function(r){var p=this,q=p.settings,v=[];if(!q.process_html){return r}if(d){r=r.replace(/&apos;/g,"&#39;");r=r.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")}r=r.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>");if(q.keep_values){if(/<script|noscript|style/i.test(r)){function o(t){t=t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n");t=t.replace(/^[\r\n]*|[\r\n]*$/g,"");t=t.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");t=t.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"");return t}r=r.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/gi,function(s,x,t){if(!x){x=' type="text/javascript"'}x=x.replace(/src=\"([^\"]+)\"?/i,function(y,z){if(q.url_converter){z=p.encode(q.url_converter.call(q.url_converter_scope||p,p.decode(z),"src","script"))}return'_mce_src="'+z+'"'});if(m.trim(t)){v.push(o(t));t="<!--\nMCE_SCRIPT:"+(v.length-1)+"\n// -->"}return"<mce:script"+x+">"+t+"</mce:script>"});r=r.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/gi,function(s,x,t){if(t){v.push(o(t));t="<!--\nMCE_SCRIPT:"+(v.length-1)+"\n-->"}return"<mce:style"+x+">"+t+"</mce:style><style "+x+' _mce_bogus="1">'+t+"</style>"});r=r.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(s,x,t){return"<mce:noscript"+x+"><!--"+p.encode(t).replace(/--/g,"&#45;&#45;")+"--></mce:noscript>"})}r=r.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->");function u(s){return s.replace(h,function(y,z,x,t){return"<"+z+x.replace(l,function(B,A,E,D,C){var F;A=A.toLowerCase();E=E||D||C||"";if(e[A]){if(E==="false"||E==="0"){return}return A+'="'+A+'"'}if(f[A]&&x.indexOf("_mce_"+A)==-1){F=p.decode(E);if(q.url_converter&&(A=="src"||A=="href")){F=q.url_converter.call(q.url_converter_scope||p,F,A,z)}if(A=="style"){F=p.serializeStyle(p.parseStyle(F),A)}return A+'="'+E+'" _mce_'+A+'="'+p.encode(F)+'"'}return B})+t+">"})}r=u(r);r=r.replace(/MCE_SCRIPT:([0-9]+)/g,function(t,s){return v[s]})}return r},getOuterHTML:function(o){var p;o=this.get(o);if(!o){return null}if(o.outerHTML!==undefined){return o.outerHTML}p=(o.ownerDocument||this.doc).createElement("body");p.appendChild(o.cloneNode(true));return p.innerHTML},setOuterHTML:function(r,p,s){var o=this;function q(u,t,x){var y,v;v=x.createElement("body");v.innerHTML=t;y=v.lastChild;while(y){o.insertAfter(y.cloneNode(true),u);y=y.previousSibling}o.remove(u)}return this.run(r,function(u){u=o.get(u);if(u.nodeType==1){s=s||u.ownerDocument||o.doc;if(d){try{if(d&&u.nodeType==1){u.outerHTML=p}else{q(u,p,s)}}catch(t){q(u,p,s)}}else{q(u,p,s)}}})},decode:function(p){var q,r,o;if(/&[\w#]+;/.test(p)){q=this.doc.createElement("div");q.innerHTML=p;r=q.firstChild;o="";if(r){do{o+=r.nodeValue}while(r=r.nextSibling)}return o||p}return p},encode:function(o){return(""+o).replace(n,function(p){return c[p]})},insertAfter:function(o,p){p=this.get(p);return this.run(o,function(r){var q,s;q=p.parentNode;s=p.nextSibling;if(s){q.insertBefore(r,s)}else{q.appendChild(r)}return r})},isBlock:function(o){if(o.nodeType&&o.nodeType!==1){return false}o=o.nodeName||o;return a.test(o)},replace:function(s,r,p){var q=this;if(j(r,"array")){s=s.cloneNode(true)}return q.run(r,function(t){if(p){k(m.grep(t.childNodes),function(o){s.appendChild(o)})}return t.parentNode.replaceChild(s,t)})},rename:function(r,o){var q=this,p;if(r.nodeName!=o.toUpperCase()){p=q.create(o);k(q.getAttribs(r),function(s){q.setAttrib(p,s.nodeName,q.getAttrib(r,s.nodeName))});q.replace(p,r,1)}return p||r},findCommonAncestor:function(q,o){var r=q,p;while(r){p=o;while(p&&r!=p){p=p.parentNode}if(r==p){break}r=r.parentNode}if(!r&&q.ownerDocument){return q.ownerDocument.documentElement}return r},toHex:function(o){var q=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(o);function p(r){r=parseInt(r).toString(16);return r.length>1?r:"0"+r}if(q){o="#"+p(q[1])+p(q[2])+p(q[3]);return o}return o},getClasses:function(){var s=this,o=[],r,u={},v=s.settings.class_filter,q;if(s.classes){return s.classes}function x(t){k(t.imports,function(y){x(y)});k(t.cssRules||t.rules,function(y){switch(y.type||1){case 1:if(y.selectorText){k(y.selectorText.split(","),function(z){z=z.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(z)||!/\.[\w\-]+$/.test(z)){return}q=z;z=z.replace(/.*\.([a-z0-9_\-]+).*/i,"$1");if(v&&!(z=v(z,q))){return}if(!u[z]){o.push({"class":z});u[z]=1}})}break;case 3:x(y.styleSheet);break}})}try{k(s.doc.styleSheets,x)}catch(p){}if(o.length>0){s.classes=o}return o},run:function(u,r,q){var p=this,v;if(p.doc&&typeof(u)==="string"){u=p.get(u)}if(!u){return false}q=q||this;if(!u.nodeType&&(u.length||u.length===0)){v=[];k(u,function(s,o){if(s){if(typeof(s)=="string"){s=p.doc.getElementById(s)}v.push(r.call(q,s,o))}});return v}return r.call(q,u)},getAttribs:function(q){var p;q=this.get(q);if(!q){return[]}if(d){p=[];if(q.nodeName=="OBJECT"){return q.attributes}if(q.nodeName==="OPTION"&&this.getAttrib(q,"selected")){p.push({specified:1,nodeName:"selected"})}q.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(o){p.push({specified:1,nodeName:o})});return p}return q.attributes},destroy:function(p){var o=this;if(o.events){o.events.destroy()}o.win=o.doc=o.root=o.events=null;if(!p){m.removeUnload(o.destroy)}},createRng:function(){var o=this.doc;return o.createRange?o.createRange():new m.dom.Range(this)},nodeIndex:function(s,t){var o=0,q,r,p;if(s){for(q=s.nodeType,s=s.previousSibling,r=s;s;s=s.previousSibling){p=s.nodeType;if(t&&p==3){if(p==q||!s.nodeValue.length){continue}}o++;q=p}}return o},split:function(u,s,y){var z=this,o=z.createRng(),v,q,x;function p(A){var t,r=A.childNodes;if(A.nodeType==1&&A.getAttribute("_mce_type")=="bookmark"){return}for(t=r.length-1;t>=0;t--){p(r[t])}if(A.nodeType!=9){if(A.nodeType==3&&A.nodeValue.length>0){return}if(A.nodeType==1){r=A.childNodes;if(r.length==1&&r[0]&&r[0].nodeType==1&&r[0].getAttribute("_mce_type")=="bookmark"){A.parentNode.insertBefore(r[0],A)}if(r.length||/^(br|hr|input|img)$/i.test(A.nodeName)){return}}z.remove(A)}return A}if(u&&s){o.setStart(u.parentNode,z.nodeIndex(u));o.setEnd(s.parentNode,z.nodeIndex(s));v=o.extractContents();o=z.createRng();o.setStart(s.parentNode,z.nodeIndex(s)+1);o.setEnd(u.parentNode,z.nodeIndex(u)+1);q=o.extractContents();x=u.parentNode;x.insertBefore(p(v),u);if(y){x.replaceChild(y,s)}else{x.insertBefore(s,u)}x.insertBefore(p(q),u);z.remove(u);return y||s}},bind:function(s,o,r,q){var p=this;if(!p.events){p.events=new m.dom.EventUtils()}return p.events.add(s,o,r,q||this)},unbind:function(r,o,q){var p=this;if(!p.events){p.events=new m.dom.EventUtils()}return p.events.remove(r,o,q)},_findSib:function(r,o,p){var q=this,s=o;if(r){if(j(s,"string")){s=function(t){return q.is(t,o)}}for(r=r[p];r;r=r[p]){if(s(r)){return r}}}return null},_isRes:function(o){return/^(top|left|bottom|right|width|height)/i.test(o)||/;\s*(top|left|bottom|right|width|height)/i.test(o)}});m.DOM=new m.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var N=this,e=c.doc,S=0,E=1,j=2,D=true,R=false,U="startOffset",h="startContainer",P="endContainer",z="endOffset",k=tinymce.extend,n=c.nodeIndex;k(N,{startContainer:e,startOffset:0,endContainer:e,endOffset:0,collapsed:D,commonAncestorContainer:e,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:q,setEnd:s,setStartBefore:g,setStartAfter:I,setEndBefore:J,setEndAfter:u,collapse:A,selectNode:x,selectNodeContents:F,compareBoundaryPoints:v,deleteContents:p,extractContents:H,cloneContents:d,insertNode:C,surroundContents:M,cloneRange:K});function q(V,t){B(D,V,t)}function s(V,t){B(R,V,t)}function g(t){q(t.parentNode,n(t))}function I(t){q(t.parentNode,n(t)+1)}function J(t){s(t.parentNode,n(t))}function u(t){s(t.parentNode,n(t)+1)}function A(t){if(t){N[P]=N[h];N[z]=N[U]}else{N[h]=N[P];N[U]=N[z]}N.collapsed=D}function x(t){g(t);u(t)}function F(t){q(t,0);s(t,t.nodeType===1?t.childNodes.length:t.nodeValue.length)}function v(W,X){var Z=N[h],Y=N[U],V=N[P],t=N[z];if(W===0){return G(Z,Y,Z,Y)}if(W===1){return G(Z,Y,V,t)}if(W===2){return G(V,t,V,t)}if(W===3){return G(V,t,Z,Y)}}function p(){m(j)}function H(){return m(S)}function d(){return m(E)}function C(Y){var V=this[h],t=this[U],X,W;if((V.nodeType===3||V.nodeType===4)&&V.nodeValue){if(!t){V.parentNode.insertBefore(Y,V)}else{if(t>=V.nodeValue.length){c.insertAfter(Y,V)}else{X=V.splitText(t);V.parentNode.insertBefore(Y,X)}}}else{if(V.childNodes.length>0){W=V.childNodes[t]}if(W){V.insertBefore(Y,W)}else{V.appendChild(Y)}}}function M(V){var t=N.extractContents();N.insertNode(V);V.appendChild(t);N.selectNode(V)}function K(){return k(new b(c),{startContainer:N[h],startOffset:N[U],endContainer:N[P],endOffset:N[z],collapsed:N.collapsed,commonAncestorContainer:N.commonAncestorContainer})}function O(t,V){var W;if(t.nodeType==3){return t}if(V<0){return t}W=t.firstChild;while(W&&V>0){--V;W=W.nextSibling}if(W){return W}return t}function l(){return(N[h]==N[P]&&N[U]==N[z])}function G(X,Z,V,Y){var aa,W,t,ab,ad,ac;if(X==V){if(Z==Y){return 0}if(Z<Y){return -1}return 1}aa=V;while(aa&&aa.parentNode!=X){aa=aa.parentNode}if(aa){W=0;t=X.firstChild;while(t!=aa&&W<Z){W++;t=t.nextSibling}if(Z<=W){return -1}return 1}aa=X;while(aa&&aa.parentNode!=V){aa=aa.parentNode}if(aa){W=0;t=V.firstChild;while(t!=aa&&W<Y){W++;t=t.nextSibling}if(W<Y){return -1}return 1}ab=c.findCommonAncestor(X,V);ad=X;while(ad&&ad.parentNode!=ab){ad=ad.parentNode}if(!ad){ad=ab}ac=V;while(ac&&ac.parentNode!=ab){ac=ac.parentNode}if(!ac){ac=ab}if(ad==ac){return 0}t=ab.firstChild;while(t){if(t==ad){return -1}if(t==ac){return 1}t=t.nextSibling}}function B(V,Y,X){var t,W;if(V){N[h]=Y;N[U]=X}else{N[P]=Y;N[z]=X}t=N[P];while(t.parentNode){t=t.parentNode}W=N[h];while(W.parentNode){W=W.parentNode}if(W==t){if(G(N[h],N[U],N[P],N[z])>0){N.collapse(V)}}else{N.collapse(V)}N.collapsed=l();N.commonAncestorContainer=c.findCommonAncestor(N[h],N[P])}function m(ab){var aa,X=0,ad=0,V,Z,W,Y,t,ac;if(N[h]==N[P]){return f(ab)}for(aa=N[P],V=aa.parentNode;V;aa=V,V=V.parentNode){if(V==N[h]){return r(aa,ab)}++X}for(aa=N[h],V=aa.parentNode;V;aa=V,V=V.parentNode){if(V==N[P]){return T(aa,ab)}++ad}Z=ad-X;W=N[h];while(Z>0){W=W.parentNode;Z--}Y=N[P];while(Z<0){Y=Y.parentNode;Z++}for(t=W.parentNode,ac=Y.parentNode;t!=ac;t=t.parentNode,ac=ac.parentNode){W=t;Y=ac}return o(W,Y,ab)}function f(Z){var ab,Y,X,aa,t,W,V;if(Z!=j){ab=e.createDocumentFragment()}if(N[U]==N[z]){return ab}if(N[h].nodeType==3){Y=N[h].nodeValue;X=Y.substring(N[U],N[z]);if(Z!=E){N[h].deleteData(N[U],N[z]-N[U]);N.collapse(D)}if(Z==j){return}ab.appendChild(e.createTextNode(X));return ab}aa=O(N[h],N[U]);t=N[z]-N[U];while(t>0){W=aa.nextSibling;V=y(aa,Z);if(ab){ab.appendChild(V)}--t;aa=W}if(Z!=E){N.collapse(D)}return ab}function r(ab,Y){var aa,Z,V,t,X,W;if(Y!=j){aa=e.createDocumentFragment()}Z=i(ab,Y);if(aa){aa.appendChild(Z)}V=n(ab);t=V-N[U];if(t<=0){if(Y!=E){N.setEndBefore(ab);N.collapse(R)}return aa}Z=ab.previousSibling;while(t>0){X=Z.previousSibling;W=y(Z,Y);if(aa){aa.insertBefore(W,aa.firstChild)}--t;Z=X}if(Y!=E){N.setEndBefore(ab);N.collapse(R)}return aa}function T(Z,Y){var ab,V,aa,t,X,W;if(Y!=j){ab=e.createDocumentFragment()}aa=Q(Z,Y);if(ab){ab.appendChild(aa)}V=n(Z);++V;t=N[z]-V;aa=Z.nextSibling;while(t>0){X=aa.nextSibling;W=y(aa,Y);if(ab){ab.appendChild(W)}--t;aa=X}if(Y!=E){N.setStartAfter(Z);N.collapse(D)}return ab}function o(Z,t,ac){var W,ae,Y,aa,ab,V,ad,X;if(ac!=j){ae=e.createDocumentFragment()}W=Q(Z,ac);if(ae){ae.appendChild(W)}Y=Z.parentNode;aa=n(Z);ab=n(t);++aa;V=ab-aa;ad=Z.nextSibling;while(V>0){X=ad.nextSibling;W=y(ad,ac);if(ae){ae.appendChild(W)}ad=X;--V}W=i(t,ac);if(ae){ae.appendChild(W)}if(ac!=E){N.setStartAfter(Z);N.collapse(D)}return ae}function i(aa,ab){var W=O(N[P],N[z]-1),ac,Z,Y,t,V,X=W!=N[P];if(W==aa){return L(W,X,R,ab)}ac=W.parentNode;Z=L(ac,R,R,ab);while(ac){while(W){Y=W.previousSibling;t=L(W,X,R,ab);if(ab!=j){Z.insertBefore(t,Z.firstChild)}X=D;W=Y}if(ac==aa){return Z}W=ac.previousSibling;ac=ac.parentNode;V=L(ac,R,R,ab);if(ab!=j){V.appendChild(Z)}Z=V}}function Q(aa,ab){var X=O(N[h],N[U]),Y=X!=N[h],ac,Z,W,t,V;if(X==aa){return L(X,Y,D,ab)}ac=X.parentNode;Z=L(ac,R,D,ab);while(ac){while(X){W=X.nextSibling;t=L(X,Y,D,ab);if(ab!=j){Z.appendChild(t)}Y=D;X=W}if(ac==aa){return Z}X=ac.nextSibling;ac=ac.parentNode;V=L(ac,R,D,ab);if(ab!=j){V.appendChild(Z)}Z=V}}function L(t,Y,ab,ac){var X,W,Z,V,aa;if(Y){return y(t,ac)}if(t.nodeType==3){X=t.nodeValue;if(ab){V=N[U];W=X.substring(V);Z=X.substring(0,V)}else{V=N[z];W=X.substring(0,V);Z=X.substring(V)}if(ac!=E){t.nodeValue=Z}if(ac==j){return}aa=t.cloneNode(R);aa.nodeValue=W;return aa}if(ac==j){return}return t.cloneNode(R)}function y(V,t){if(t!=j){return t==E?V.cloneNode(D):V}V.parentNode.removeChild(V)}}a.Range=b})(tinymce.dom);(function(){function a(g){var i=this,j="\uFEFF",e,h,d=g.dom,c=true,f=false;function b(){var n=g.getRng(),k=d.createRng(),m,o;m=n.item?n.item(0):n.parentElement();if(m.ownerDocument!=d.doc){return k}if(n.item||!m.hasChildNodes()){k.setStart(m.parentNode,d.nodeIndex(m));k.setEnd(k.startContainer,k.startOffset+1);return k}o=g.isCollapsed();function l(s){var u,q,t,p,A=0,x,y,z,r,v;r=n.duplicate();r.collapse(s);u=d.create("a");z=r.parentElement();if(!z.hasChildNodes()){k[s?"setStart":"setEnd"](z,0);return}z.appendChild(u);r.moveToElementText(u);v=n.compareEndPoints(s?"StartToStart":"EndToEnd",r);if(v>0){k[s?"setStartAfter":"setEndAfter"](z);d.remove(u);return}p=tinymce.grep(z.childNodes);x=p.length-1;while(A<=x){y=Math.floor((A+x)/2);z.insertBefore(u,p[y]);r.moveToElementText(u);v=n.compareEndPoints(s?"StartToStart":"EndToEnd",r);if(v>0){A=y+1}else{if(v<0){x=y-1}else{found=true;break}}}q=v>0||y==0?u.nextSibling:u.previousSibling;if(q.nodeType==1){d.remove(u);t=d.nodeIndex(q);q=q.parentNode;if(!s||y>0){t++}}else{if(v>0||y==0){r.setEndPoint(s?"StartToStart":"EndToEnd",n);t=r.text.length}else{r.setEndPoint(s?"StartToStart":"EndToEnd",n);t=q.nodeValue.length-r.text.length}d.remove(u)}k[s?"setStart":"setEnd"](q,t)}l(true);if(!o){l()}return k}this.addRange=function(k){var p,n,m,r,u,s,t=g.dom.doc,o=t.body;function l(B){var x,A,v,z,y;v=d.create("a");x=B?m:u;A=B?r:s;z=p.duplicate();if(x==t){x=o;A=0}if(x.nodeType==3){x.parentNode.insertBefore(v,x);z.moveToElementText(v);z.moveStart("character",A);d.remove(v);p.setEndPoint(B?"StartToStart":"EndToEnd",z)}else{y=x.childNodes;if(y.length){if(A>=y.length){d.insertAfter(v,y[y.length-1])}else{x.insertBefore(v,y[A])}z.moveToElementText(v)}else{v=t.createTextNode(j);x.appendChild(v);z.moveToElementText(v.parentNode);z.collapse(c)}p.setEndPoint(B?"StartToStart":"EndToEnd",z);d.remove(v)}}this.destroy();m=k.startContainer;r=k.startOffset;u=k.endContainer;s=k.endOffset;p=o.createTextRange();if(m==u&&m.nodeType==1&&r==s-1){if(r==s-1){try{n=o.createControlRange();n.addElement(m.childNodes[r]);n.select();n.scrollIntoView();return}catch(q){}}}l(true);l();p.select();p.scrollIntoView()};this.getRangeAt=function(){if(!e||!tinymce.dom.RangeUtils.compareRanges(h,g.getRng())){e=b();h=g.getRng()}try{e.startContainer.nextSibling}catch(k){e=b();h=null}return e};this.destroy=function(){h=e=null};if(g.dom.boxModel){(function(){var q=d.doc,l=q.body,n,o;q.documentElement.unselectable=c;function p(r,u){var s=l.createTextRange();try{s.moveToPoint(r,u)}catch(t){s=null}return s}function m(s){var r;if(s.button){r=p(s.x,s.y);if(r){if(r.compareEndPoints("StartToStart",o)>0){r.setEndPoint("StartToStart",o)}else{r.setEndPoint("EndToEnd",o)}r.select()}}else{k()}}function k(){d.unbind(q,"mouseup",k);d.unbind(q,"mousemove",m);n=0}d.bind(q,"mousedown",function(r){if(r.target.nodeName==="HTML"){if(n){k()}n=1;o=p(r.x,r.y);if(o){d.bind(q,"mouseup",k);d.bind(q,"mousemove",m);o.select()}}})})()}}tinymce.dom.TridentSelection=a})();(function(){var p=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,j=0,d=Object.prototype.toString,o=false,i=true;[0,0].sort(function(){i=false;return 0});var b=function(v,e,z,A){z=z||[];e=e||document;var C=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!v||typeof v!=="string"){return z}var x=[],s,E,H,r,u=true,t=b.isXML(e),B=v,D,G,F,y;do{p.exec("");s=p.exec(B);if(s){B=s[3];x.push(s[1]);if(s[2]){r=s[3];break}}}while(s);if(x.length>1&&k.exec(v)){if(x.length===2&&f.relative[x[0]]){E=h(x[0]+x[1],e)}else{E=f.relative[x[0]]?[e]:b(x.shift(),e);while(x.length){v=x.shift();if(f.relative[v]){v+=x.shift()}E=h(v,E)}}}else{if(!A&&x.length>1&&e.nodeType===9&&!t&&f.match.ID.test(x[0])&&!f.match.ID.test(x[x.length-1])){D=b.find(x.shift(),e,t);e=D.expr?b.filter(D.expr,D.set)[0]:D.set[0]}if(e){D=A?{expr:x.pop(),set:a(A)}:b.find(x.pop(),x.length===1&&(x[0]==="~"||x[0]==="+")&&e.parentNode?e.parentNode:e,t);E=D.expr?b.filter(D.expr,D.set):D.set;if(x.length>0){H=a(E)}else{u=false}while(x.length){G=x.pop();F=G;if(!f.relative[G]){G=""}else{F=x.pop()}if(F==null){F=e}f.relative[G](H,F,t)}}else{H=x=[]}}if(!H){H=E}if(!H){b.error(G||v)}if(d.call(H)==="[object Array]"){if(!u){z.push.apply(z,H)}else{if(e&&e.nodeType===1){for(y=0;H[y]!=null;y++){if(H[y]&&(H[y]===true||H[y].nodeType===1&&b.contains(e,H[y]))){z.push(E[y])}}}else{for(y=0;H[y]!=null;y++){if(H[y]&&H[y].nodeType===1){z.push(E[y])}}}}}else{a(H,z)}if(r){b(r,C,z,A);b.uniqueSort(z)}return z};b.uniqueSort=function(r){if(c){o=i;r.sort(c);if(o){for(var e=1;e<r.length;e++){if(r[e]===r[e-1]){r.splice(e--,1)}}}}return r};b.matches=function(e,r){return b(e,null,null,r)};b.find=function(y,e,z){var x;if(!y){return[]}for(var t=0,s=f.order.length;t<s;t++){var v=f.order[t],u;if((u=f.leftMatch[v].exec(y))){var r=u[1];u.splice(1,1);if(r.substr(r.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,"");x=f.find[v](u,e,z);if(x!=null){y=y.replace(f.match[v],"");break}}}}if(!x){x=e.getElementsByTagName("*")}return{set:x,expr:y}};b.filter=function(C,B,F,u){var s=C,H=[],z=B,x,e,y=B&&B[0]&&b.isXML(B[0]);while(C&&B.length){for(var A in f.filter){if((x=f.leftMatch[A].exec(C))!=null&&x[2]){var r=f.filter[A],G,E,t=x[1];e=false;x.splice(1,1);if(t.substr(t.length-1)==="\\"){continue}if(z===H){H=[]}if(f.preFilter[A]){x=f.preFilter[A](x,z,F,H,u,y);if(!x){e=G=true}else{if(x===true){continue}}}if(x){for(var v=0;(E=z[v])!=null;v++){if(E){G=r(E,x,v,z);var D=u^!!G;if(F&&G!=null){if(D){e=true}else{z[v]=false}}else{if(D){H.push(E);e=true}}}}}if(G!==undefined){if(!F){z=H}C=C.replace(f.match[A],"");if(!e){return[]}break}}}if(C===s){if(e==null){b.error(C)}else{break}}s=C}return z};b.error=function(e){throw"Syntax error, unrecognized expression: "+e};var f=b.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(x,r){var t=typeof r==="string",v=t&&!/\W/.test(r),y=t&&!v;if(v){r=r.toLowerCase()}for(var s=0,e=x.length,u;s<e;s++){if((u=x[s])){while((u=u.previousSibling)&&u.nodeType!==1){}x[s]=y||u&&u.nodeName.toLowerCase()===r?u||false:u===r}}if(y){b.filter(r,x,true)}},">":function(x,r){var u=typeof r==="string",v,s=0,e=x.length;if(u&&!/\W/.test(r)){r=r.toLowerCase();for(;s<e;s++){v=x[s];if(v){var t=v.parentNode;x[s]=t.nodeName.toLowerCase()===r?t:false}}}else{for(;s<e;s++){v=x[s];if(v){x[s]=u?v.parentNode:v.parentNode===r}}if(u){b.filter(r,x,true)}}},"":function(t,r,v){var s=j++,e=q,u;if(typeof r==="string"&&!/\W/.test(r)){r=r.toLowerCase();u=r;e=n}e("parentNode",r,s,t,u,v)},"~":function(t,r,v){var s=j++,e=q,u;if(typeof r==="string"&&!/\W/.test(r)){r=r.toLowerCase();u=r;e=n}e("previousSibling",r,s,t,u,v)}},find:{ID:function(r,s,t){if(typeof s.getElementById!=="undefined"&&!t){var e=s.getElementById(r[1]);return e?[e]:[]}},NAME:function(s,v){if(typeof v.getElementsByName!=="undefined"){var r=[],u=v.getElementsByName(s[1]);for(var t=0,e=u.length;t<e;t++){if(u[t].getAttribute("name")===s[1]){r.push(u[t])}}return r.length===0?null:r}},TAG:function(e,r){return r.getElementsByTagName(e[1])}},preFilter:{CLASS:function(t,r,s,e,x,y){t=" "+t[1].replace(/\\/g,"")+" ";if(y){return t}for(var u=0,v;(v=r[u])!=null;u++){if(v){if(x^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(t)>=0)){if(!s){e.push(v)}}else{if(s){r[u]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(r,e){return r[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var r=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(r[1]+(r[2]||1))-0;e[3]=r[3]-0}e[0]=j++;return e},ATTR:function(u,r,s,e,v,x){var t=u[1].replace(/\\/g,"");if(!x&&f.attrMap[t]){u[1]=f.attrMap[t]}if(u[2]==="~="){u[4]=" "+u[4]+" "}return u},PSEUDO:function(u,r,s,e,v){if(u[1]==="not"){if((p.exec(u[3])||"").length>1||/^\w/.test(u[3])){u[3]=b(u[3],null,null,r)}else{var t=b.filter(u[3],r,s,true^v);if(!s){e.push.apply(e,t)}return false}}else{if(f.match.POS.test(u[0])||f.match.CHILD.test(u[0])){return true}}return u},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(s,r,e){return !!b(e[3],s).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(r,e){return e===0},last:function(s,r,e,t){return r===t.length-1},even:function(r,e){return e%2===0},odd:function(r,e){return e%2===1},lt:function(s,r,e){return r<e[3]-0},gt:function(s,r,e){return r>e[3]-0},nth:function(s,r,e){return e[3]-0===r},eq:function(s,r,e){return e[3]-0===r}},filter:{PSEUDO:function(s,y,x,z){var e=y[1],r=f.filters[e];if(r){return r(s,x,y,z)}else{if(e==="contains"){return(s.textContent||s.innerText||b.getText([s])||"").indexOf(y[3])>=0}else{if(e==="not"){var t=y[3];for(var v=0,u=t.length;v<u;v++){if(t[v]===s){return false}}return true}else{b.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(e,t){var x=t[1],r=e;switch(x){case"only":case"first":while((r=r.previousSibling)){if(r.nodeType===1){return false}}if(x==="first"){return true}r=e;case"last":while((r=r.nextSibling)){if(r.nodeType===1){return false}}return true;case"nth":var s=t[2],A=t[3];if(s===1&&A===0){return true}var v=t[0],z=e.parentNode;if(z&&(z.sizcache!==v||!e.nodeIndex)){var u=0;for(r=z.firstChild;r;r=r.nextSibling){if(r.nodeType===1){r.nodeIndex=++u}}z.sizcache=v}var y=e.nodeIndex-A;if(s===0){return y===0}else{return(y%s===0&&y/s>=0)}}},ID:function(r,e){return r.nodeType===1&&r.getAttribute("id")===e},TAG:function(r,e){return(e==="*"&&r.nodeType===1)||r.nodeName.toLowerCase()===e},CLASS:function(r,e){return(" "+(r.className||r.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(v,t){var s=t[1],e=f.attrHandle[s]?f.attrHandle[s](v):v[s]!=null?v[s]:v.getAttribute(s),x=e+"",u=t[2],r=t[4];return e==null?u==="!=":u==="="?x===r:u==="*="?x.indexOf(r)>=0:u==="~="?(" "+x+" ").indexOf(r)>=0:!r?x&&e!==false:u==="!="?x!==r:u==="^="?x.indexOf(r)===0:u==="$="?x.substr(x.length-r.length)===r:u==="|="?x===r||x.substr(0,r.length+1)===r+"-":false},POS:function(u,r,s,v){var e=r[2],t=f.setFilters[e];if(t){return t(u,s,r,v)}}}};var k=f.match.POS,g=function(r,e){return"\\"+(e-0+1)};for(var m in f.match){f.match[m]=new RegExp(f.match[m].source+(/(?![^\[]*\])(?![^\(]*\))/.source));f.leftMatch[m]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[m].source.replace(/\\(\d+)/g,g))}var a=function(r,e){r=Array.prototype.slice.call(r,0);if(e){e.push.apply(e,r);return e}return r};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(l){a=function(u,t){var r=t||[],s=0;if(d.call(u)==="[object Array]"){Array.prototype.push.apply(r,u)}else{if(typeof u.length==="number"){for(var e=u.length;s<e;s++){r.push(u[s])}}else{for(;u[s];s++){r.push(u[s])}}}return r}}var c;if(document.documentElement.compareDocumentPosition){c=function(r,e){if(!r.compareDocumentPosition||!e.compareDocumentPosition){if(r==e){o=true}return r.compareDocumentPosition?-1:1}var s=r.compareDocumentPosition(e)&4?-1:r===e?0:1;if(s===0){o=true}return s}}else{if("sourceIndex" in document.documentElement){c=function(r,e){if(!r.sourceIndex||!e.sourceIndex){if(r==e){o=true}return r.sourceIndex?-1:1}var s=r.sourceIndex-e.sourceIndex;if(s===0){o=true}return s}}else{if(document.createRange){c=function(t,r){if(!t.ownerDocument||!r.ownerDocument){if(t==r){o=true}return t.ownerDocument?-1:1}var s=t.ownerDocument.createRange(),e=r.ownerDocument.createRange();s.setStart(t,0);s.setEnd(t,0);e.setStart(r,0);e.setEnd(r,0);var u=s.compareBoundaryPoints(Range.START_TO_END,e);if(u===0){o=true}return u}}}}b.getText=function(e){var r="",t;for(var s=0;e[s];s++){t=e[s];if(t.nodeType===3||t.nodeType===4){r+=t.nodeValue}else{if(t.nodeType!==8){r+=b.getText(t.childNodes)}}}return r};(function(){var r=document.createElement("div"),s="script"+(new Date()).getTime();r.innerHTML="<a name='"+s+"'/>";var e=document.documentElement;e.insertBefore(r,e.firstChild);if(document.getElementById(s)){f.find.ID=function(u,v,x){if(typeof v.getElementById!=="undefined"&&!x){var t=v.getElementById(u[1]);return t?t.id===u[1]||typeof t.getAttributeNode!=="undefined"&&t.getAttributeNode("id").nodeValue===u[1]?[t]:undefined:[]}};f.filter.ID=function(v,t){var u=typeof v.getAttributeNode!=="undefined"&&v.getAttributeNode("id");return v.nodeType===1&&u&&u.nodeValue===t}}e.removeChild(r);e=r=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){f.find.TAG=function(r,v){var u=v.getElementsByTagName(r[1]);if(r[1]==="*"){var t=[];for(var s=0;u[s];s++){if(u[s].nodeType===1){t.push(u[s])}}u=t}return u}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){f.attrHandle.href=function(r){return r.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=b,s=document.createElement("div");s.innerHTML="<p class='TEST'></p>";if(s.querySelectorAll&&s.querySelectorAll(".TEST").length===0){return}b=function(x,v,t,u){v=v||document;if(!u&&v.nodeType===9&&!b.isXML(v)){try{return a(v.querySelectorAll(x),t)}catch(y){}}return e(x,v,t,u)};for(var r in e){b[r]=e[r]}s=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}f.order.splice(1,0,"CLASS");f.find.CLASS=function(r,s,t){if(typeof s.getElementsByClassName!=="undefined"&&!t){return s.getElementsByClassName(r[1])}};e=null})();function n(r,x,v,A,y,z){for(var t=0,s=A.length;t<s;t++){var e=A[t];if(e){e=e[r];var u=false;while(e){if(e.sizcache===v){u=A[e.sizset];break}if(e.nodeType===1&&!z){e.sizcache=v;e.sizset=t}if(e.nodeName.toLowerCase()===x){u=e;break}e=e[r]}A[t]=u}}}function q(r,x,v,A,y,z){for(var t=0,s=A.length;t<s;t++){var e=A[t];if(e){e=e[r];var u=false;while(e){if(e.sizcache===v){u=A[e.sizset];break}if(e.nodeType===1){if(!z){e.sizcache=v;e.sizset=t}if(typeof x!=="string"){if(e===x){u=true;break}}else{if(b.filter(x,[e]).length>0){u=e;break}}}e=e[r]}A[t]=u}}}b.contains=document.compareDocumentPosition?function(r,e){return !!(r.compareDocumentPosition(e)&16)}:function(r,e){return r!==e&&(r.contains?r.contains(e):true)};b.isXML=function(e){var r=(e?e.ownerDocument||e:0).documentElement;return r?r.nodeName!=="HTML":false};var h=function(e,y){var t=[],u="",v,s=y.nodeType?[y]:y;while((v=f.match.PSEUDO.exec(e))){u+=v[0];e=e.replace(f.match.PSEUDO,"")}e=f.relative[e]?e+"*":e;for(var x=0,r=s.length;x<r;x++){b(e,s[x],t)}return b.filter(u,t)};window.tinymce.dom.Sizzle=b})();(function(d){var f=d.each,c=d.DOM,b=d.isIE,e=d.isWebKit,a;d.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(m,p,l,j){var g,h=this,i=h.events,k;if(p instanceof Array){k=[];f(p,function(o){k.push(h.add(m,o,l,j))});return k}if(m&&m.hasOwnProperty&&m instanceof Array){k=[];f(m,function(n){n=c.get(n);k.push(h.add(n,p,l,j))});return k}m=c.get(m);if(!m){return}g=function(n){if(h.disabled){return}n=n||window.event;if(n&&b){if(!n.target){n.target=n.srcElement}d.extend(n,h._stoppers)}if(!j){return l(n)}return l.call(j,n)};if(p=="unload"){d.unloads.unshift({func:g});return g}if(p=="init"){if(h.domLoaded){g()}else{h.inits.push(g)}return g}i.push({obj:m,name:p,func:l,cfunc:g,scope:j});h._add(m,p,g);return l},remove:function(l,m,k){var h=this,g=h.events,i=false,j;if(l&&l.hasOwnProperty&&l instanceof Array){j=[];f(l,function(n){n=c.get(n);j.push(h.remove(n,m,k))});return j}l=c.get(l);f(g,function(o,n){if(o.obj==l&&o.name==m&&(!k||(o.func==k||o.cfunc==k))){g.splice(n,1);h._remove(l,m,o.cfunc);i=true;return false}});return i},clear:function(l){var j=this,g=j.events,h,k;if(l){l=c.get(l);for(h=g.length-1;h>=0;h--){k=g[h];if(k.obj===l){j._remove(k.obj,k.name,k.cfunc);k.obj=k.cfunc=null;g.splice(h,1)}}}},cancel:function(g){if(!g){return false}this.stop(g);return this.prevent(g)},stop:function(g){if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}return false},prevent:function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false},destroy:function(){var g=this;f(g.events,function(j,h){g._remove(j.obj,j.name,j.cfunc);j.obj=j.cfunc=null});g.events=[];g=null},_add:function(h,i,g){if(h.attachEvent){h.attachEvent("on"+i,g)}else{if(h.addEventListener){h.addEventListener(i,g,false)}else{h["on"+i]=g}}},_remove:function(i,j,h){if(i){try{if(i.detachEvent){i.detachEvent("on"+j,h)}else{if(i.removeEventListener){i.removeEventListener(j,h,false)}else{i["on"+j]=null}}}catch(g){}}},_pageInit:function(h){var g=this;if(g.domLoaded){return}g.domLoaded=true;f(g.inits,function(i){i()});g.inits=[]},_wait:function(i){var g=this,h=i.document;if(i.tinyMCE_GZ&&tinyMCE_GZ.loaded){g.domLoaded=1;return}if(h.attachEvent){h.attachEvent("onreadystatechange",function(){if(h.readyState==="complete"){h.detachEvent("onreadystatechange",arguments.callee);g._pageInit(i)}});if(h.documentElement.doScroll&&i==i.top){(function(){if(g.domLoaded){return}try{h.documentElement.doScroll("left")}catch(j){setTimeout(arguments.callee,0);return}g._pageInit(i)})()}}else{if(h.addEventListener){g._add(i,"DOMContentLoaded",function(){g._pageInit(i)})}}g._add(i,"load",function(){g._pageInit(i)})},_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});a=d.dom.Event=new d.dom.EventUtils();a._wait(window);d.addUnload(function(){a.destroy()})})(tinymce);(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(i,h,g){return a.dom.Event.add(b.id,i,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,i){var h=b.getXY();b.moveTo(h.x+g,h.y+i)},resizeTo:function(g,i){b.setStyles({width:g,height:i})},resizeBy:function(g,j){var i=b.getSize();b.resizeTo(i.w+g,i.h+j)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||"";if(h.indexOf("get")===0||h.indexOf("has")===0||h.indexOf("is")===0){return}if(h=="remove"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(g,"opacity",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(c){function e(f){return f.replace(/[\n\r]+/g,"")}var b=c.is,a=c.isIE,d=c.each;c.create("tinymce.dom.Selection",{Selection:function(i,h,g){var f=this;f.dom=i;f.win=h;f.serializer=g;d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(j){f[j]=new c.util.Dispatcher(f)});if(!f.win.getSelection){f.tridentSel=new c.dom.TridentSelection(f)}c.addUnload(f.destroy,f)},getContent:function(g){var f=this,h=f.getRng(),l=f.dom.create("body"),j=f.getSel(),i,k,m;g=g||{};i=k="";g.get=true;g.format=g.format||"html";f.onBeforeGetContent.dispatch(f,g);if(g.format=="text"){return f.isCollapsed()?"":(h.text||(j.toString?j.toString():""))}if(h.cloneContents){m=h.cloneContents();if(m){l.appendChild(m)}}else{if(b(h.item)||b(h.htmlText)){l.innerHTML=h.item?h.item(0).outerHTML:h.htmlText}else{l.innerHTML=h.toString()}}if(/^\s/.test(l.innerHTML)){i=" "}if(/\s+$/.test(l.innerHTML)){k=" "}g.getInner=true;g.content=f.isCollapsed()?"":i+f.serializer.serialize(l,g)+k;f.onGetContent.dispatch(f,g);return g.content},setContent:function(i,g){var f=this,j=f.getRng(),l,k=f.win.document;g=g||{format:"html"};g.set=true;i=g.content=f.dom.processHTML(i);f.onBeforeSetContent.dispatch(f,g);i=g.content;if(j.insertNode){i+='<span id="__caret">_</span>';if(j.startContainer==k&&j.endContainer==k){k.body.innerHTML=i}else{j.deleteContents();if(k.body.childNodes.length==0){k.body.innerHTML=i}else{j.insertNode(j.createContextualFragment(i))}}l=f.dom.get("__caret");j=k.createRange();j.setStartBefore(l);j.setEndBefore(l);f.setRng(j);f.dom.remove("__caret")}else{if(j.item){k.execCommand("Delete",false,null);j=f.getRng()}j.pasteHTML(i)}f.onSetContent.dispatch(f,g)},getStart:function(){var g=this.getRng(),h,f,j,i;if(g.duplicate||g.item){if(g.item){return g.item(0)}j=g.duplicate();j.collapse(1);h=j.parentElement();f=i=g.parentElement();while(i=i.parentNode){if(i==h){h=f;break}}if(h&&h.nodeName=="BODY"){return h.firstChild||h}return h}else{h=g.startContainer;if(h.nodeType==1&&h.hasChildNodes()){h=h.childNodes[Math.min(h.childNodes.length-1,g.startOffset)]}if(h&&h.nodeType==3){return h.parentNode}return h}},getEnd:function(){var g=this,h=g.getRng(),i,f;if(h.duplicate||h.item){if(h.item){return h.item(0)}h=h.duplicate();h.collapse(0);i=h.parentElement();if(i&&i.nodeName=="BODY"){return i.lastChild||i}return i}else{i=h.endContainer;f=h.endOffset;if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[f>0?f-1:f]}if(i&&i.nodeType==3){return i.parentNode}return i}},getBookmark:function(q,r){var u=this,m=u.dom,g,j,i,n,h,o,p,l="\uFEFF",s;function f(v,x){var t=0;d(m.select(v),function(z,y){if(z==x){t=y}});return t}if(q==2){function k(){var v=u.getRng(true),t=m.getRoot(),x={};function y(B,G){var A=B[G?"startContainer":"endContainer"],F=B[G?"startOffset":"endOffset"],z=[],C,E,D=0;if(A.nodeType==3){if(r){for(C=A.previousSibling;C&&C.nodeType==3;C=C.previousSibling){F+=C.nodeValue.length}}z.push(F)}else{E=A.childNodes;if(F>=E.length&&E.length){D=1;F=Math.max(0,E.length-1)}z.push(u.dom.nodeIndex(E[F],r)+D)}for(;A&&A!=t;A=A.parentNode){z.push(u.dom.nodeIndex(A,r))}return z}x.start=y(v,true);if(!u.isCollapsed()){x.end=y(v)}return x}return k()}if(q){return{rng:u.getRng()}}g=u.getRng();i=m.uniqueId();n=tinyMCE.activeEditor.selection.isCollapsed();s="overflow:hidden;line-height:0px";if(g.duplicate||g.item){if(!g.item){j=g.duplicate();g.collapse();g.pasteHTML('<span _mce_type="bookmark" id="'+i+'_start" style="'+s+'">'+l+"</span>");if(!n){j.collapse(false);j.pasteHTML('<span _mce_type="bookmark" id="'+i+'_end" style="'+s+'">'+l+"</span>")}}else{o=g.item(0);h=o.nodeName;return{name:h,index:f(h,o)}}}else{o=u.getNode();h=o.nodeName;if(h=="IMG"){return{name:h,index:f(h,o)}}j=g.cloneRange();if(!n){j.collapse(false);j.insertNode(m.create("span",{_mce_type:"bookmark",id:i+"_end",style:s},l))}g.collapse(true);g.insertNode(m.create("span",{_mce_type:"bookmark",id:i+"_start",style:s},l))}u.moveToBookmark({id:i,keep:1});return{id:i}},moveToBookmark:function(n){var r=this,l=r.dom,i,h,f,q,j,s,o,p;if(r.tridentSel){r.tridentSel.destroy()}if(n){if(n.start){f=l.createRng();q=l.getRoot();function g(z){var t=n[z?"start":"end"],v,x,y,u;if(t){for(x=q,v=t.length-1;v>=1;v--){u=x.childNodes;if(u.length){x=u[t[v]]}}if(z){f.setStart(x,t[0])}else{f.setEnd(x,t[0])}}}g(true);g();r.setRng(f)}else{if(n.id){function k(A){var u=l.get(n.id+"_"+A),z,t,x,y,v=n.keep;if(u){z=u.parentNode;if(A=="start"){if(!v){t=l.nodeIndex(u)}else{z=u.firstChild;t=1}j=s=z;o=p=t}else{if(!v){t=l.nodeIndex(u)}else{z=u.firstChild;t=1}s=z;p=t}if(!v){y=u.previousSibling;x=u.nextSibling;d(c.grep(u.childNodes),function(B){if(B.nodeType==3){B.nodeValue=B.nodeValue.replace(/\uFEFF/g,"")}});while(u=l.get(n.id+"_"+A)){l.remove(u,1)}if(y&&x&&y.nodeType==x.nodeType&&y.nodeType==3){t=y.nodeValue.length;y.appendData(x.nodeValue);l.remove(x);if(A=="start"){j=s=y;o=p=t}else{s=y;p=t}}}}}function m(t){if(!a&&l.isBlock(t)&&!t.innerHTML){t.innerHTML='<br _mce_bogus="1" />'}return t}k("start");k("end");f=l.createRng();f.setStart(m(j),o);f.setEnd(m(s),p);r.setRng(f)}else{if(n.name){r.select(l.select(n.name)[n.index])}else{if(n.rng){r.setRng(n.rng)}}}}}},select:function(k,j){var i=this,l=i.dom,g=l.createRng(),f;f=l.nodeIndex(k);g.setStart(k.parentNode,f);g.setEnd(k.parentNode,f+1);if(j){function h(m,o){var n=new c.dom.TreeWalker(m,m);do{if(m.nodeType==3&&c.trim(m.nodeValue).length!=0){if(o){g.setStart(m,0)}else{g.setEnd(m,m.nodeValue.length)}return}if(m.nodeName=="BR"){if(o){g.setStartBefore(m)}else{g.setEndBefore(m)}return}}while(m=(o?n.next():n.prev()))}h(k,1);h(k)}i.setRng(g);return k},isCollapsed:function(){var f=this,h=f.getRng(),g=f.getSel();if(!h||h.item){return false}if(h.compareEndPoints){return h.compareEndPoints("StartToEnd",h)===0}return !g||h.collapsed},collapse:function(f){var g=this,h=g.getRng(),i;if(h.item){i=h.item(0);h=this.win.document.body.createTextRange();h.moveToElementText(i)}h.collapse(!!f);g.setRng(h)},getSel:function(){var g=this,f=this.win;return f.getSelection?f.getSelection():f.document.selection},getRng:function(j){var g=this,h,i;if(j&&g.tridentSel){return g.tridentSel.getRangeAt(0)}try{if(h=g.getSel()){i=h.rangeCount>0?h.getRangeAt(0):(h.createRange?h.createRange():g.win.document.createRange())}}catch(f){}if(!i){i=g.win.document.createRange?g.win.document.createRange():g.win.document.body.createTextRange()}if(g.selectedRange&&g.explicitRange){if(i.compareBoundaryPoints(i.START_TO_START,g.selectedRange)===0&&i.compareBoundaryPoints(i.END_TO_END,g.selectedRange)===0){i=g.explicitRange}else{g.selectedRange=null;g.explicitRange=null}}return i},setRng:function(i){var h,g=this;if(!g.tridentSel){h=g.getSel();if(h){g.explicitRange=i;h.removeAllRanges();h.addRange(i);g.selectedRange=h.getRangeAt(0)}}else{if(i.cloneRange){g.tridentSel.addRange(i);return}try{i.select()}catch(f){}}},setNode:function(g){var f=this;f.setContent(f.dom.getOuterHTML(g));return g},getNode:function(){var g=this,f=g.getRng(),h=g.getSel(),i;if(f.setStart){if(!f){return g.dom.getRoot()}i=f.commonAncestorContainer;if(!f.collapsed){if(f.startContainer==f.endContainer){if(f.startOffset-f.endOffset<2){if(f.startContainer.hasChildNodes()){i=f.startContainer.childNodes[f.startOffset]}}}if(c.isWebKit&&h.anchorNode&&h.anchorNode.nodeType==1){return h.anchorNode.childNodes[h.anchorOffset]}}if(i&&i.nodeType==3){return i.parentNode}return i}return f.item?f.item(0):f.parentElement()},getSelectedBlocks:function(g,f){var i=this,j=i.dom,m,h,l,k=[];m=j.getParent(g||i.getStart(),j.isBlock);h=j.getParent(f||i.getEnd(),j.isBlock);if(m){k.push(m)}if(m&&h&&m!=h){l=m;while((l=l.nextSibling)&&l!=h){if(j.isBlock(l)){k.push(l)}}}if(h&&m!=h){k.push(h)}return k},destroy:function(g){var f=this;f.win=null;if(f.tridentSel){f.tridentSel.destroy()}if(!g){c.removeUnload(f.destroy)}}})})(tinymce);(function(a){a.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(c){function b(){var e=document.implementation;if(!e||!e.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument")}catch(d){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(d){}}else{return e.createDocument("","",null)}}this.doc=b();this.valid=a.isOpera||a.isWebKit;this.reset()},reset:function(){var b=this,c=b.doc;if(c.firstChild){c.removeChild(c.firstChild)}b.node=c.appendChild(c.createElement("html"))},writeStartElement:function(c){var b=this;b.node=b.node.appendChild(b.doc.createElement(c))},writeAttribute:function(c,b){if(this.valid){b=b.replace(/>/g,"%MCGT%")}this.node.setAttribute(c,b)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var b=this,c=b.node;c.appendChild(b.doc.createTextNode(""));b.node=c.parentNode},writeText:function(b){if(this.valid){b=b.replace(/>/g,"%MCGT%")}this.node.appendChild(this.doc.createTextNode(b))},writeCDATA:function(b){this.node.appendChild(this.doc.createCDATASection(b))},writeComment:function(b){if(a.isIE){b=b.replace(/^\-|\-$/g," ")}this.node.appendChild(this.doc.createComment(b.replace(/\-\-/g," ")))},getContent:function(){var b;b=this.doc.xml||new XMLSerializer().serializeToString(this.doc);b=b.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");b=b.replace(/ ?\/>/g," />");if(this.valid){b=b.replace(/\%MCGT%/g,"&gt;")}return b}})})(tinymce);(function(a){a.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(b){this.settings=a.extend({indent_char:" ",indentation:0},b);this.reset()},reset:function(){this.indent="";this.str="";this.tags=[];this.count=0},writeStartElement:function(b){this._writeAttributesEnd();this.writeRaw("<"+b);this.tags.push(b);this.inAttr=true;this.count++;this.elementCount=this.count},writeAttribute:function(d,b){var c=this;c.writeRaw(" "+c.encode(d)+'="'+c.encode(b)+'"')},writeEndElement:function(){var b;if(this.tags.length>0){b=this.tags.pop();if(this._writeAttributesEnd(1)){this.writeRaw("</"+b+">")}if(this.settings.indentation>0){this.writeRaw("\n")}}},writeFullEndElement:function(){if(this.tags.length>0){this._writeAttributesEnd();this.writeRaw("</"+this.tags.pop()+">");if(this.settings.indentation>0){this.writeRaw("\n")}}},writeText:function(b){this._writeAttributesEnd();this.writeRaw(this.encode(b));this.count++},writeCDATA:function(b){this._writeAttributesEnd();this.writeRaw("<![CDATA["+b+"]]>");this.count++},writeComment:function(b){this._writeAttributesEnd();this.writeRaw("<!-- "+b+"-->");this.count++},writeRaw:function(b){this.str+=b},encode:function(b){return b.replace(/[<>&"]/g,function(c){switch(c){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}return c})},getContent:function(){return this.str},_writeAttributesEnd:function(b){if(!this.inAttr){return}this.inAttr=false;if(b&&this.elementCount==this.count){this.writeRaw(" />");return false}this.writeRaw(">");return true}})})(tinymce);(function(e){var g=e.extend,f=e.each,b=e.util.Dispatcher,d=e.isIE,a=e.isGecko;function c(h){return h.replace(/([?+*])/g,".$1")}e.create("tinymce.dom.Serializer",{Serializer:function(j){var i=this;i.key=0;i.onPreProcess=new b(i);i.onPostProcess=new b(i);try{i.writer=new e.dom.XMLWriter()}catch(h){i.writer=new e.dom.StringWriter()}i.settings=j=g({dom:e.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(_mce_|_moz_|sizset|sizcache)/,closed:/^(br|hr|input|meta|img|link|param|area)$/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",valid_elements:"*[*]",extended_valid_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:true,fix_content_duplication:true,convert_fonts_to_spans:false,font_size_classes:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},j);i.dom=j.dom;i.schema=j.schema;if(j.entity_encoding=="named"&&!j.entities){j.entity_encoding="raw"}if(j.remove_redundant_brs){i.onPostProcess.add(function(k,l){l.content=l.content.replace(/(<br \/>\s*)+<\/(p|h[1-6]|div|li)>/gi,function(n,m,o){if(/^<br \/>\s*<\//.test(n)){return"</"+o+">"}return n})})}if(j.element_format=="html"){i.onPostProcess.add(function(k,l){l.content=l.content.replace(/<([^>]+) \/>/g,"<$1>")})}if(j.fix_list_elements){i.onPreProcess.add(function(v,s){var l,z,y=["ol","ul"],u,t,q,k=/^(OL|UL)$/,A;function m(r,x){var o=x.split(","),p;while((r=r.previousSibling)!=null){for(p=0;p<o.length;p++){if(r.nodeName==o[p]){return r}}}return null}for(z=0;z<y.length;z++){l=i.dom.select(y[z],s.node);for(u=0;u<l.length;u++){t=l[u];q=t.parentNode;if(k.test(q.nodeName)){A=m(t,"LI");if(!A){A=i.dom.create("li");A.innerHTML="&nbsp;";A.appendChild(t);q.insertBefore(A,q.firstChild)}else{A.appendChild(t)}}}}})}if(j.fix_table_elements){i.onPreProcess.add(function(k,l){if(!e.isOpera||opera.buildNumber()>=1767){f(i.dom.select("p table",l.node).reverse(),function(p){var o=i.dom.getParent(p.parentNode,"table,p");if(o.nodeName!="TABLE"){try{i.dom.split(o,p)}catch(m){}}})}})}},setEntities:function(o){var n=this,j,m,h={},k;if(n.entityLookup){return}j=o.split(",");for(m=0;m<j.length;m+=2){k=j[m];if(k==34||k==38||k==60||k==62){continue}h[String.fromCharCode(j[m])]=j[m+1];k=parseInt(j[m]).toString(16)}n.entityLookup=h},setRules:function(i){var h=this;h._setup();h.rules={};h.wildRules=[];h.validElements={};return h.addRules(i)},addRules:function(i){var h=this,j;if(!i){return}h._setup();f(i.split(","),function(m){var q=m.split(/\[|\]/),l=q[0].split("/"),r,k,o,n=[];if(j){k=e.extend([],j.attribs)}if(q.length>1){f(q[1].split("|"),function(u){var p={},t;k=k||[];u=u.replace(/::/g,"~");u=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(u);u[2]=u[2].replace(/~/g,":");if(u[1]=="!"){r=r||[];r.push(u[2])}if(u[1]=="-"){for(t=0;t<k.length;t++){if(k[t].name==u[2]){k.splice(t,1);return}}}switch(u[3]){case"=":p.defaultVal=u[4]||"";break;case":":p.forcedVal=u[4];break;case"<":p.validVals=u[4].split("?");break}if(/[*.?]/.test(u[2])){o=o||[];p.nameRE=new RegExp("^"+c(u[2])+"$");o.push(p)}else{p.name=u[2];k.push(p)}n.push(u[2])})}f(l,function(v,u){var y=v.charAt(0),t=1,p={};if(j){if(j.noEmpty){p.noEmpty=j.noEmpty}if(j.fullEnd){p.fullEnd=j.fullEnd}if(j.padd){p.padd=j.padd}}switch(y){case"-":p.noEmpty=true;break;case"+":p.fullEnd=true;break;case"#":p.padd=true;break;default:t=0}l[u]=v=v.substring(t);h.validElements[v]=1;if(/[*.?]/.test(l[0])){p.nameRE=new RegExp("^"+c(l[0])+"$");h.wildRules=h.wildRules||{};h.wildRules.push(p)}else{p.name=l[0];if(l[0]=="@"){j=p}h.rules[v]=p}p.attribs=k;if(r){p.requiredAttribs=r}if(o){v="";f(n,function(s){if(v){v+="|"}v+="("+c(s)+")"});p.validAttribsRE=new RegExp("^"+v.toLowerCase()+"$");p.wildAttribs=o}})});i="";f(h.validElements,function(m,l){if(i){i+="|"}if(l!="@"){i+=l}});h.validElementsRE=new RegExp("^("+c(i.toLowerCase())+")$")},findRule:function(m){var j=this,l=j.rules,h,k;j._setup();k=l[m];if(k){return k}l=j.wildRules;for(h=0;h<l.length;h++){if(l[h].nameRE.test(m)){return l[h]}}return null},findAttribRule:function(h,l){var j,k=h.wildAttribs;for(j=0;j<k.length;j++){if(k[j].nameRE.test(l)){return k[j]}}return null},serialize:function(r,q){var m,k=this,p,i,j,l;k._setup();q=q||{};q.format=q.format||"html";k.processObj=q;if(d){l=[];f(r.getElementsByTagName("option"),function(o){var h=k.dom.getAttrib(o,"selected");l.push(h?h:null)})}r=r.cloneNode(true);if(d){f(r.getElementsByTagName("option"),function(o,h){k.dom.setAttrib(o,"selected",l[h])})}j=r.ownerDocument.implementation;if(j.createHTMLDocument&&(e.isOpera&&opera.buildNumber()>=1767)){p=j.createHTMLDocument("");f(r.nodeName=="BODY"?r.childNodes:[r],function(h){p.body.appendChild(p.importNode(h,true))});if(r.nodeName!="BODY"){r=p.body.firstChild}else{r=p.body}i=k.dom.doc;k.dom.doc=p}k.key=""+(parseInt(k.key)+1);if(!q.no_events){q.node=r;k.onPreProcess.dispatch(k,q)}k.writer.reset();k._info=q;k._serializeNode(r,q.getInner);q.content=k.writer.getContent();if(i){k.dom.doc=i}if(!q.no_events){k.onPostProcess.dispatch(k,q)}k._postProcess(q);q.node=null;return e.trim(q.content)},_postProcess:function(n){var i=this,k=i.settings,j=n.content,m=[],l;if(n.format=="html"){l=i._protect({content:j,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<noscript[^>]*>)(.*?)(<\/noscript>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]});j=l.content;if(k.entity_encoding!=="raw"){j=i._encode(j)}if(!n.set){j=j.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,k.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>");if(k.remove_linebreaks){j=j.replace(/\r?\n|\r/g," ");j=j.replace(/(<[^>]+>)\s+/g,"$1 ");j=j.replace(/\s+(<\/[^>]+>)/g," $1");j=j.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>");j=j.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>");j=j.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")}if(k.apply_source_formatting&&k.indent_mode=="simple"){j=j.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n");j=j.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>");j=j.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n");j=j.replace(/\n\n/g,"\n")}}j=i._unprotect(j,l);j=j.replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>");if(k.entity_encoding=="raw"){j=j.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>")}j=j.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(h,p,o){return"<noscript"+p+">"+i.dom.decode(o.replace(/<!--|-->/g,""))+"</noscript>"})}n.content=j},_serializeNode:function(E,J){var A=this,B=A.settings,y=A.writer,q,j,u,G,F,I,C,h,z,k,r,D,p,m,H,o,x;if(!B.node_filter||B.node_filter(E)){switch(E.nodeType){case 1:if(E.hasAttribute?E.hasAttribute("_mce_bogus"):E.getAttribute("_mce_bogus")){return}p=H=false;q=E.hasChildNodes();k=E.getAttribute("_mce_name")||E.nodeName.toLowerCase();o=E.getAttribute("_mce_type");if(o){if(!A._info.cleanup){p=true;return}else{H=1}}if(d){x=E.scopeName;if(x&&x!=="HTML"&&x!=="html"){k=x+":"+k}}if(k.indexOf("mce:")===0){k=k.substring(4)}if(!H){if(!A.validElementsRE||!A.validElementsRE.test(k)||(A.invalidElementsRE&&A.invalidElementsRE.test(k))||J){p=true;break}}if(d){if(B.fix_content_duplication){if(E._mce_serialized==A.key){return}E._mce_serialized=A.key}if(k.charAt(0)=="/"){k=k.substring(1)}}else{if(a){if(E.nodeName==="BR"&&E.getAttribute("type")=="_moz"){return}}}if(B.validate_children){if(A.elementName&&!A.schema.isValid(A.elementName,k)){p=true;break}A.elementName=k}r=A.findRule(k);if(!r){p=true;break}k=r.name||k;m=B.closed.test(k);if((!q&&r.noEmpty)||(d&&!k)){p=true;break}if(r.requiredAttribs){I=r.requiredAttribs;for(G=I.length-1;G>=0;G--){if(this.dom.getAttrib(E,I[G])!==""){break}}if(G==-1){p=true;break}}y.writeStartElement(k);if(r.attribs){for(G=0,C=r.attribs,F=C.length;G<F;G++){I=C[G];z=A._getAttrib(E,I);if(z!==null){y.writeAttribute(I.name,z)}}}if(r.validAttribsRE){C=A.dom.getAttribs(E);for(G=C.length-1;G>-1;G--){h=C[G];if(h.specified){I=h.nodeName.toLowerCase();if(B.invalid_attrs.test(I)||!r.validAttribsRE.test(I)){continue}D=A.findAttribRule(r,I);z=A._getAttrib(E,D,I);if(z!==null){y.writeAttribute(I,z)}}}}if(o&&H){y.writeAttribute("_mce_type",o)}if(k==="script"&&e.trim(E.innerHTML)){y.writeText("// ");y.writeCDATA(E.innerHTML.replace(/<!--|-->|<\[CDATA\[|\]\]>/g,""));q=false;break}if(r.padd){if(q&&(u=E.firstChild)&&u.nodeType===1&&E.childNodes.length===1){if(u.hasAttribute?u.hasAttribute("_mce_bogus"):u.getAttribute("_mce_bogus")){y.writeText("\u00a0")}}else{if(!q){y.writeText("\u00a0")}}}break;case 3:if(B.validate_children&&A.elementName&&!A.schema.isValid(A.elementName,"#text")){return}return y.writeText(E.nodeValue);case 4:return y.writeCDATA(E.nodeValue);case 8:return y.writeComment(E.nodeValue)}}else{if(E.nodeType==1){q=E.hasChildNodes()}}if(q&&!m){u=E.firstChild;while(u){A._serializeNode(u);A.elementName=k;u=u.nextSibling}}if(!p){if(!m){y.writeFullEndElement()}else{y.writeEndElement()}}},_protect:function(j){var i=this;j.items=j.items||[];function h(l){return l.replace(/[\r\n\\]/g,function(m){if(m==="\n"){return"\\n"}else{if(m==="\\"){return"\\\\"}}return"\\r"})}function k(l){return l.replace(/\\[\\rn]/g,function(m){if(m==="\\n"){return"\n"}else{if(m==="\\\\"){return"\\"}}return"\r"})}f(j.patterns,function(l){j.content=k(h(j.content).replace(l.pattern,function(n,o,m,p){m=k(m);if(l.encode){m=i._encode(m)}j.items.push(m);return o+"<!--mce:"+(j.items.length-1)+"-->"+p}))});return j},_unprotect:function(i,j){i=i.replace(/\<!--mce:([0-9]+)--\>/g,function(k,h){return j.items[parseInt(h)]});j.items=[];return i},_encode:function(m){var j=this,k=j.settings,i;if(k.entity_encoding!=="raw"){if(k.entity_encoding.indexOf("named")!=-1){j.setEntities(k.entities);i=j.entityLookup;m=m.replace(/[\u007E-\uFFFF]/g,function(h){var l;if(l=i[h]){h="&"+l+";"}return h})}if(k.entity_encoding.indexOf("numeric")!=-1){m=m.replace(/[\u007E-\uFFFF]/g,function(h){return"&#"+h.charCodeAt(0)+";"})}}return m},_setup:function(){var h=this,i=this.settings;if(h.done){return}h.done=1;h.setRules(i.valid_elements);h.addRules(i.extended_valid_elements);if(i.invalid_elements){h.invalidElementsRE=new RegExp("^("+c(i.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")}if(i.attrib_value_filter){h.attribValueFilter=i.attribValueFilter}},_getAttrib:function(m,j,h){var l,k;h=h||j.name;if(j.forcedVal&&(k=j.forcedVal)){if(k==="{$uid}"){return this.dom.uniqueId()}return k}k=this.dom.getAttrib(m,h);switch(h){case"rowspan":case"colspan":if(k=="1"){k=""}break}if(this.attribValueFilter){k=this.attribValueFilter(h,k,m)}if(j.validVals){for(l=j.validVals.length-1;l>=0;l--){if(k==j.validVals[l]){break}}if(l==-1){return null}}if(k===""&&typeof(j.defaultVal)!="undefined"){k=j.defaultVal;if(k==="{$uid}"){return this.dom.uniqueId()}return k}else{if(h=="class"&&this.processObj.get){k=k.replace(/\s?mceItem\w+\s?/g,"")}}if(k===""){return null}return k}})})(tinymce);(function(a){a.dom.ScriptLoader=function(h){var c=0,k=1,i=2,l={},j=[],f={},d=[],g=0,e;function b(m,u){var v=this,q=a.DOM,s,o,r,n;function p(){q.remove(n);if(s){s.onreadystatechange=s.onload=s=null}u()}n=q.uniqueId();if(a.isIE6){o=new a.util.URI(m);r=location;if(o.host==r.hostname&&o.port==r.port&&(o.protocol+":")==r.protocol){a.util.XHR.send({url:a._addVer(o.getURI()),success:function(x){var t=q.create("script",{type:"text/javascript"});t.text=x;document.getElementsByTagName("head")[0].appendChild(t);q.remove(t);p()}});return}}s=q.create("script",{id:n,type:"text/javascript",src:a._addVer(m)});s.onload=p;s.onreadystatechange=function(){var t=s.readyState;if(t=="complete"||t=="loaded"){p()}};(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}this.isDone=function(m){return l[m]==i};this.markDone=function(m){l[m]=i};this.add=this.load=function(m,q,n){var o,p=l[m];if(p==e){j.push(m);l[m]=c}if(q){if(!f[m]){f[m]=[]}f[m].push({func:q,scope:n||this})}};this.loadQueue=function(n,m){this.loadScripts(j,n,m)};this.loadScripts=function(m,q,p){var o;function n(r){a.each(f[r],function(s){s.func.call(s.scope)});f[r]=e}d.push({func:q,scope:p||this});o=function(){var r=a.grep(m);m.length=0;a.each(r,function(s){if(l[s]==i){n(s);return}if(l[s]!=k){l[s]=k;g++;b(s,function(){l[s]=i;g--;n(s);o()})}});if(!g){a.each(d,function(s){s.func.call(s.scope)});d.length=0}};o()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);tinymce.dom.TreeWalker=function(a,c){var b=a;function d(i,f,e,j){var h,g;if(i){if(!j&&i[f]){return i[f]}if(i!=c){h=i[e];if(h){return h}for(g=i.parentNode;g&&g!=c;g=g.parentNode){h=g[e];if(h){return h}}}}}this.current=function(){return b};this.next=function(e){return(b=d(b,"firstChild","nextSibling",e))};this.prev=function(e){return(b=d(b,"lastChild","lastSibling",e))}};(function(){var a={};function b(f,e){var d;function c(g){return g.replace(/[A-Z]+/g,function(h){return c(f[h])})}for(d in f){if(f.hasOwnProperty(d)){f[d]=c(f[d])}}c(e).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]/g,function(l,g,j){var h,k={};j=j.split(/\|/);for(h=j.length-1;h>=0;h--){k[j[h]]=1}a[g]=k})}b({Z:"#|H|K|N|O|P",Y:"#|X|form|R|Q",X:"p|T|div|U|W|isindex|fieldset|table",W:"pre|hr|blockquote|address|center|noframes",U:"ul|ol|dl|menu|dir",ZC:"#|p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"#|X|S|Q",S:"R|P",ZA:"#|a|G|J|M|O|P",R:"#|a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe"},"script[]style[]object[#|param|X|form|a|H|K|N|O|Q]param[]p[S]a[Z]br[]span[S]bdo[S]applet[#|param|X|form|a|H|K|N|O|Q]h1[S]img[]map[X|form|Q|area]h2[S]iframe[#|X|form|a|H|K|N|O|Q]h3[S]tt[S]i[S]b[S]u[S]s[S]strike[S]big[S]small[S]font[S]basefont[]em[S]strong[S]dfn[S]code[S]q[S]samp[S]kbd[S]var[S]cite[S]abbr[S]acronym[S]sub[S]sup[S]input[]select[optgroup|option]optgroup[option]option[]textarea[]label[S]button[#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[S]ins[#|X|form|a|H|K|N|O|Q]h5[S]del[#|X|form|a|H|K|N|O|Q]h6[S]div[#|X|form|a|H|K|N|O|Q]ul[li]li[#|X|form|a|H|K|N|O|Q]ol[li]dl[dt|dd]dt[S]dd[#|X|form|a|H|K|N|O|Q]menu[li]dir[li]pre[ZA]hr[]blockquote[#|X|form|a|H|K|N|O|Q]address[S|p]center[#|X|form|a|H|K|N|O|Q]noframes[#|X|form|a|H|K|N|O|Q]isindex[]fieldset[#|legend|X|form|a|H|K|N|O|Q]legend[S]table[caption|col|colgroup|thead|tfoot|tbody|tr]caption[S]col[]colgroup[col]thead[tr]tr[th|td]th[#|X|form|a|H|K|N|O|Q]form[#|X|a|H|K|N|O|Q]noscript[#|X|form|a|H|K|N|O|Q]td[#|X|form|a|H|K|N|O|Q]tfoot[tr]tbody[tr]area[]base[]body[#|X|form|a|H|K|N|O|Q]");tinymce.dom.Schema=function(){var c=this,d=a;c.isValid=function(f,e){var g=d[f];return !!(g&&(!e||g[e]))}}})();(function(a){a.dom.RangeUtils=function(c){var b="\uFEFF";this.walk=function(d,r){var h=d.startContainer,k=d.startOffset,s=d.endContainer,l=d.endOffset,i,f,n,g,q,p,e;e=c.select("td.mceSelected,th.mceSelected");if(e.length>0){a.each(e,function(t){r([t])});return}function o(v,u,t){var x=[];for(;v&&v!=t;v=v[u]){x.push(v)}return x}function m(u,t){do{if(u.parentNode==t){return u}u=u.parentNode}while(u)}function j(v,u,x){var t=x?"nextSibling":"previousSibling";for(g=v,q=g.parentNode;g&&g!=u;g=q){q=g.parentNode;p=o(g==v?g:g[t],t);if(p.length){if(!x){p.reverse()}r(p)}}}if(h.nodeType==1&&h.hasChildNodes()){h=h.childNodes[k]}if(s.nodeType==1&&s.hasChildNodes()){s=s.childNodes[Math.min(k==l?l:l-1,s.childNodes.length-1)]}i=c.findCommonAncestor(h,s);if(h==s){return r([h])}for(g=h;g;g=g.parentNode){if(g==s){return j(h,i,true)}if(g==i){break}}for(g=s;g;g=g.parentNode){if(g==h){return j(s,i)}if(g==i){break}}f=m(h,i)||h;n=m(s,i)||s;j(h,f,true);p=o(f==h?f:f.nextSibling,"nextSibling",n==s?n.nextSibling:n);if(p.length){r(p)}j(s,n)}};a.dom.RangeUtils.compareRanges=function(c,b){if(c&&b){if(c.item||c.duplicate){if(c.item&&b.item&&c.item(0)===b.item(0)){return true}if(c.isEqual&&b.isEqual&&b.isEqual(c)){return true}}else{return c.startContainer==b.startContainer&&c.startOffset==b.startOffset}}return false}})(tinymce);(function(c){var b=c.DOM,a=c.is;c.create("tinymce.ui.Control",{Control:function(e,d){this.id=e;this.settings=d=d||{};this.rendered=false;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=d.scope||this;this.disabled=0;this.active=0},setDisabled:function(d){var f;if(d!=this.disabled){f=b.get(this.id);if(f&&this.settings.unavailable_prefix){if(d){this.prevTitle=f.title;f.title=this.settings.unavailable_prefix+": "+f.title}else{f.title=this.prevTitle}}this.setState("Disabled",d);this.setState("Enabled",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d}},isActive:function(){return this.active},setState:function(f,d){var e=b.get(this.id);f=this.classPrefix+f;if(d){b.addClass(e,f)}else{b.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){b.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(a(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(a(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(b,a){this.parent(b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}});(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(c(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new d.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},"items",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},"items",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new d.ui.MenuItem(f.id||b.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},"items",f);f.items={}},createMenu:function(g){var f=new d.ui.Menu(g.id||b.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(e){var d=e.is,c=e.DOM,f=e.each,a=e.dom.Event,b=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{};g.container=g.container||c.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(d(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(j){var h=this,i=h.settings,g;j.container=j.container||i.container;j.parent=h;j.constrain=j.constrain||i.constrain;j["class"]=j["class"]||i["class"];j.vp_offset_x=j.vp_offset_x||i.vp_offset_x;j.vp_offset_y=j.vp_offset_y||i.vp_offset_y;g=new e.ui.DropMenu(j.id||c.uniqueId(),j);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},update:function(){var i=this,j=i.settings,g=c.get("menu_"+i.id+"_tbl"),l=c.get("menu_"+i.id+"_co"),h,k;h=j.max_width?Math.min(g.clientWidth,j.max_width):g.clientWidth;k=j.max_height?Math.min(g.clientHeight,j.max_height):g.clientHeight;if(!c.boxModel){i.element.setStyles({width:h+2,height:k+2})}else{i.element.setStyles({width:h,height:k})}if(j.max_width){c.setStyle(l,"width",h)}if(j.max_height){c.setStyle(l,"height",k);if(g.clientHeight<j.max_height){c.setStyle(l,"overflow","hidden")}}},showMenu:function(p,n,r){var z=this,A=z.settings,o,g=c.getViewPort(),u,l,v,q,i=2,k,j,m=z.classPrefix;z.collapse(1);if(z.isMenuVisible){return}if(!z.rendered){o=c.add(z.settings.container,z.renderNode());f(z.items,function(h){h.postRender()});z.element=new b("menu_"+z.id,{blocker:1,container:A.container})}else{o=c.get("menu_"+z.id)}if(!e.isOpera){c.setStyles(o,{left:-65535,top:-65535})}c.show(o);z.update();p+=A.offset_x||0;n+=A.offset_y||0;g.w-=4;g.h-=4;if(A.constrain){u=o.clientWidth-i;l=o.clientHeight-i;v=g.x+g.w;q=g.y+g.h;if((p+A.vp_offset_x+u)>v){p=r?r-u:Math.max(0,(v-A.vp_offset_x)-u)}if((n+A.vp_offset_y+l)>q){n=Math.max(0,(q-A.vp_offset_y)-l)}}c.setStyles(o,{left:p,top:n});z.element.update();z.isMenuVisible=1;z.mouseClickFunc=a.add(o,"click",function(s){var h;s=s.target;if(s&&(s=c.getParent(s,"tr"))&&!c.hasClass(s,m+"ItemSub")){h=z.items[s.id];if(h.isDisabled()){return}k=z;while(k){if(k.hideMenu){k.hideMenu()}k=k.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return a.cancel(s)}});if(z.hasMenus()){z.mouseOverFunc=a.add(o,"mouseover",function(x){var h,t,s;x=x.target;if(x&&(x=c.getParent(x,"tr"))){h=z.items[x.id];if(z.lastMenu){z.lastMenu.collapse(1)}if(h.isDisabled()){return}if(x&&c.hasClass(x,m+"ItemSub")){t=c.getRect(x);h.showMenu((t.x+t.w-i),t.y-i,t.x);z.lastMenu=h;c.addClass(c.get(h.id).firstChild,m+"ItemActive")}}})}z.onShowMenu.dispatch(z);if(A.keyboard_focus){a.add(o,"keydown",z._keyHandler,z);c.select("a","menu_"+z.id)[0].focus();z._focusIdx=0}},hideMenu:function(j){var g=this,i=c.get("menu_"+g.id),h;if(!g.isMenuVisible){return}a.remove(i,"mouseover",g.mouseOverFunc);a.remove(i,"click",g.mouseClickFunc);a.remove(i,"keydown",g._keyHandler);c.hide(i);g.isMenuVisible=0;if(!j){g.collapse(1)}if(g.element){g.element.hide()}if(h=c.get(g.id)){c.removeClass(h.firstChild,g.classPrefix+"ItemActive")}g.onHideMenu.dispatch(g)},add:function(i){var g=this,h;i=g.parent(i);if(g.isRendered&&(h=c.get("menu_"+g.id))){g._add(c.select("tbody",h)[0],i)}return i},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){c.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=c.get("menu_"+g.id);a.remove(h,"mouseover",g.mouseOverFunc);a.remove(h,"click",g.mouseClickFunc);if(g.element){g.element.remove()}c.remove(h)},renderNode:function(){var i=this,j=i.settings,l,h,k,g;g=c.create("div",{id:"menu_"+i.id,"class":j["class"],style:"position:absolute;left:0;top:0;z-index:200000"});k=c.add(g,"div",{id:"menu_"+i.id+"_co","class":i.classPrefix+(j["class"]?" "+j["class"]:"")});i.element=new b("menu_"+i.id,{blocker:1,container:j.container});if(j.menu_line){c.add(k,"span",{"class":i.classPrefix+"Line"})}l=c.add(k,"table",{id:"menu_"+i.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=c.add(l,"tbody");f(i.items,function(m){i._add(h,m)});i.rendered=true;return g},_keyHandler:function(j){var i=this,h=j.keyCode;function g(m){var k=i._focusIdx+m,l=c.select("a","menu_"+i.id)[k];if(l){i._focusIdx=k;l.focus()}}switch(h){case 38:g(-1);return;case 40:g(1);return;case 13:return;case 27:return this.hideMenu()}},_add:function(j,h){var i,q=h.settings,p,l,k,m=this.classPrefix,g;if(q.separator){l=c.add(j,"tr",{id:h.id,"class":m+"ItemSeparator"});c.add(l,"td",{"class":m+"ItemSeparator"});if(i=l.previousSibling){c.addClass(i,"mceLast")}return}i=l=c.add(j,"tr",{id:h.id,"class":m+"Item "+m+"ItemEnabled"});i=k=c.add(i,"td");i=p=c.add(i,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});c.addClass(k,q["class"]);g=c.add(i,"span",{"class":"mceIcon"+(q.icon?" mce_"+q.icon:"")});if(q.icon_src){c.add(g,"img",{src:q.icon_src})}i=c.add(i,q.element||"span",{"class":"mceText",title:h.settings.title},h.settings.title);if(h.settings.style){c.setAttrib(i,"style",h.settings.style)}if(j.childNodes.length==1){c.addClass(l,"mceFirst")}if((i=l.previousSibling)&&c.hasClass(i,m+"ItemSeparator")){c.addClass(l,"mceFirst")}if(h.collapse){c.addClass(l,m+"ItemSub")}if(i=l.previousSibling){c.removeClass(i,"mceLast")}c.addClass(l,"mceLast")}})})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(d,c){this.parent(d,c);this.classPrefix="mceButton"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=a.encode(e.label||"");d='<a id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e["class"]+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+a.encode(e.title)+'">';if(e.image){d+='<img class="mceIcon" src="'+e.image+'" />'+c+"</a>"}else{d+='<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")+"</a>"}return d},postRender:function(){var c=this,d=c.settings;b.dom.Event.add(c.id,"click",function(f){if(!c.isDisabled()){return d.onclick.call(d.scope,f)}})}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(h,g){var f=this;f.parent(h,g);f.items=[];f.onChange=new a(f);f.onPostRender=new a(f);f.onAdd=new a(f);f.onRenderMenu=new d.util.Dispatcher(this);f.classPrefix="mceListBox"},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){var g=this,h,i;if(f!=g.selectedIndex){h=c.get(g.id+"_text");i=g.items[f];if(i){g.selectedValue=i.value;g.selectedIndex=f;c.setHTML(h,c.encode(i.title));c.removeClass(h,"mceTitle")}else{c.setHTML(h,c.encode(g.settings.title));c.addClass(h,"mceTitle");g.selectedValue=g.selectedIndex=null}h=0}},add:function(i,f,h){var g=this;h=h||{};h=d.extend(h,{title:i,value:f});g.items.push(h);g.onAdd.dispatch(g,h)},getLength:function(){return this.items.length},renderHTML:function(){var i="",f=this,g=f.settings,j=f.classPrefix;i='<table id="'+f.id+'" cellpadding="0" cellspacing="0" class="'+j+" "+j+"Enabled"+(g["class"]?(" "+g["class"]):"")+'"><tbody><tr>';i+="<td>"+c.createHTML("a",{id:f.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},c.encode(f.settings.title))+"</td>";i+="<td>"+c.createHTML("a",{id:f.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>";i+="</tr></tbody></table>";return i},showMenu:function(){var g=this,j,i,h=c.get(this.id),f;if(g.isDisabled()||g.items.length==0){return}if(g.menu&&g.menu.isMenuVisible){return g.hideMenu()}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}j=c.getPos(this.settings.menu_container);i=c.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.keyboard_focus=!d.isOpera;if(g.oldID){f.items[g.oldID].setSelected(0)}e(g.items,function(k){if(k.value===g.selectedValue){f.items[k.id].setSelected(1);g.oldID=k.id}});f.showMenu(0,h.clientHeight);b.add(c.doc,"mousedown",g.hideMenu,g);c.addClass(g.id,g.classPrefix+"Selected")},hideMenu:function(g){var f=this;if(f.menu&&f.menu.isMenuVisible){if(g&&g.type=="mousedown"&&(g.target.id==f.id+"_text"||g.target.id==f.id+"_open")){return}if(!g||!c.getParent(g.target,".mceMenu")){c.removeClass(f.id,f.classPrefix+"Selected");b.remove(c.doc,"mousedown",f.hideMenu,f);f.menu.hideMenu()}}},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":g.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});f.onHideMenu.add(g.hideMenu,g);f.add({title:g.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}});e(g.items,function(h){if(h.value===undefined){f.add({title:h.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}})}else{h.id=c.uniqueId();h.onclick=function(){if(g.settings.onselect(h.value)!==false){g.select(h.value)}};f.add(h)}});g.onRenderMenu.dispatch(g,f);g.menu=f},postRender:function(){var f=this,g=f.classPrefix;b.add(f.id,"click",f.showMenu,f);b.add(f.id+"_text","focus",function(){if(!f._focused){f.keyDownHandler=b.add(f.id+"_text","keydown",function(k){var h=-1,i,j=k.keyCode;e(f.items,function(l,m){if(f.selectedValue==l.value){h=m}});if(j==38){i=f.items[h-1]}else{if(j==40){i=f.items[h+1]}else{if(j==13){i=f.selectedValue;f.selectedValue=null;f.settings.onselect(i);return b.cancel(k)}}}if(i){f.hideMenu();f.select(i.value)}})}f._focused=1});b.add(f.id+"_text","blur",function(){b.remove(f.id+"_text","keydown",f.keyDownHandler);f._focused=0});if(d.isIE6||!c.boxModel){b.add(f.id,"mouseover",function(){if(!c.hasClass(f.id,g+"Disabled")){c.addClass(f.id,g+"Hover")}});b.add(f.id,"mouseout",function(){if(!c.hasClass(f.id,g+"Disabled")){c.removeClass(f.id,g+"Hover")}})}f.onPostRender.dispatch(f,c.get(f.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(g,f){this.parent(g,f);this.classPrefix="mceNativeListBox"},setDisabled:function(f){c.get(this.id).disabled=f},isDisabled:function(){return c.get(this.id).disabled},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){c.get(this.id).selectedIndex=f+1;this.selectedValue=this.items[f]?this.items[f].value:null},add:function(j,g,f){var i,h=this;f=f||{};f.value=g;if(h.isRendered()){c.add(c.get(this.id),"option",f,j)}i={title:j,value:g,attribs:f};h.items.push(i);h.onAdd.dispatch(h,i)},getLength:function(){return this.items.length},renderHTML:function(){var g,f=this;g=c.createHTML("option",{value:""},"-- "+f.settings.title+" --");e(f.items,function(h){g+=c.createHTML("option",{value:h.value},h.title)});g=c.createHTML("select",{id:f.id,"class":"mceNativeListBox"},g);return g},postRender:function(){var g=this,h;g.rendered=true;function f(j){var i=g.items[j.target.selectedIndex-1];if(i&&(i=i.value)){g.onChange.dispatch(g,i);if(g.settings.onselect){g.settings.onselect(i)}}}b.add(g.id,"change",f);b.add(g.id,"keydown",function(j){var i;b.remove(g.id,"change",h);i=b.add(g.id,"blur",function(){b.add(g.id,"change",f);b.remove(g.id,"blur",i)});if(j.keyCode==13||j.keyCode==32){f(j);return b.cancel(j)}});g.onPostRender.dispatch(g,c.get(g.id))}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(f,e){this.parent(f,e);this.onRenderMenu=new c.util.Dispatcher(this);e.menu_container=e.menu_container||b.doc.body},showMenu:function(){var g=this,j,i,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=b.getPos(g.settings.menu_container);i=b.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.vp_offset_x=i.x;f.settings.vp_offset_y=i.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.clientHeight);a.add(b.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(f.hideMenu,f);f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!b.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(b.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(f,e){this.parent(f,e);this.classPrefix="mceSplitButton"},renderHTML:function(){var i,f=this,g=f.settings,e;i="<tbody><tr>";if(g.image){e=b.createHTML("img ",{src:g.image,"class":"mceAction "+g["class"]})}else{e=b.createHTML("span",{"class":"mceAction "+g["class"]},"")}i+="<td>"+b.createHTML("a",{id:f.id+"_action",href:"javascript:;","class":"mceAction "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";e=b.createHTML("span",{"class":"mceOpen "+g["class"]});i+="<td>"+b.createHTML("a",{id:f.id+"_open",href:"javascript:;","class":"mceOpen "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";i+="</tr></tbody>";return b.createHTML("table",{id:f.id,"class":"mceSplitButton mceSplitButtonEnabled "+g["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:g.title},i)},postRender:function(){var e=this,f=e.settings;if(f.onclick){a.add(e.id+"_action","click",function(){if(!e.isDisabled()){f.onclick(e.value)}})}a.add(e.id+"_open","click",e.showMenu,e);a.add(e.id+"_open","focus",function(){e._focused=1});a.add(e.id+"_open","blur",function(){e._focused=0});if(c.isIE6||!b.boxModel){a.add(e.id,"mouseover",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.addClass(e.id,"mceSplitButtonHover")}});a.add(e.id,"mouseout",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.removeClass(e.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open")}})})(tinymce);(function(d){var c=d.DOM,a=d.dom.Event,b=d.is,e=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(h,g){var f=this;f.parent(h,g);f.settings=g=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},f.settings);f.onShowMenu=new d.util.Dispatcher(f);f.onHideMenu=new d.util.Dispatcher(f);f.value=g.default_color},showMenu:function(){var f=this,g,j,i,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}i=c.get(f.id);c.show(f.id+"_menu");c.addClass(i,"mceSplitButtonSelected");h=c.getPos(i);c.setStyles(f.id+"_menu",{left:h.x,top:h.y+i.clientHeight,zIndex:200000});i=0;a.add(c.doc,"mousedown",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+"_menu","keydown",function(k){if(k.keyCode==27){f.hideMenu()}});c.select("a",f.id+"_menu")[0].focus()}f.isMenuVisible=1},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&c.getParent(g.target,function(h){return h.id===f.id+"_open"})){return}if(!g||!c.getParent(g.target,".mceSplitButtonMenu")){c.removeClass(f.id,"mceSplitButtonSelected");a.remove(c.doc,"mousedown",f.hideMenu,f);a.remove(f.id+"_menu","keydown",f._keyHandler);c.hide(f.id+"_menu")}f.onHideMenu.dispatch(f);f.isMenuVisible=0},renderMenu:function(){var k=this,f,j=0,l=k.settings,p,h,o,g;g=c.add(l.menu_container,"div",{id:k.id+"_menu","class":l.menu_class+" "+l["class"],style:"position:absolute;left:0;top:-1000px;"});f=c.add(g,"div",{"class":l["class"]+" mceSplitButtonMenu"});c.add(f,"span",{"class":"mceMenuLine"});p=c.add(f,"table",{"class":"mceColorSplitMenu"});h=c.add(p,"tbody");j=0;e(b(l.colors,"array")?l.colors:l.colors.split(","),function(i){i=i.replace(/^#/,"");if(!j--){o=c.add(h,"tr");j=l.grid_width-1}p=c.add(o,"td");p=c.add(p,"a",{href:"javascript:;",style:{backgroundColor:"#"+i},_mce_color:"#"+i})});if(l.more_colors_func){p=c.add(h,"tr");p=c.add(p,"td",{colspan:l.grid_width,"class":"mceMoreColors"});p=c.add(p,"a",{id:k.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},l.more_colors_title);a.add(p,"click",function(i){l.more_colors_func.call(l.more_colors_scope||this);return a.cancel(i)})}c.addClass(f,"mceColorSplitMenu");a.add(k.id+"_menu","click",function(i){var m;i=i.target;if(i.nodeName=="A"&&(m=i.getAttribute("_mce_color"))){k.setColor(m)}return a.cancel(i)});return g},setColor:function(g){var f=this;c.setStyle(f.id+"_preview","backgroundColor",g);f.value=g;f.hideMenu();f.settings.onselect(g)},postRender:function(){var f=this,g=f.id;f.parent();c.add(g+"_action","div",{id:g+"_preview","class":"mceColorPreview"});c.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){this.parent();a.clear(this.id+"_menu");a.clear(this.id+"_more");c.remove(this.id+"_menu")}})})(tinymce);tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var l=this,e="",g,j,b=tinymce.DOM,m=l.settings,d,a,f,k;k=l.controls;for(d=0;d<k.length;d++){j=k[d];a=k[d-1];f=k[d+1];if(d===0){g="mceToolbarStart";if(j.Button){g+=" mceToolbarStartButton"}else{if(j.SplitButton){g+=" mceToolbarStartSplitButton"}else{if(j.ListBox){g+=" mceToolbarStartListBox"}}}e+=b.createHTML("td",{"class":g},b.createHTML("span",null,"<!-- IE -->"))}if(a&&j.ListBox){if(a.Button||a.SplitButton){e+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))}}if(b.stdMode){e+='<td style="position: relative">'+j.renderHTML()+"</td>"}else{e+="<td>"+j.renderHTML()+"</td>"}if(f&&j.ListBox){if(f.Button||f.SplitButton){e+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->"))}}}g="mceToolbarEnd";if(j.Button){g+=" mceToolbarEndButton"}else{if(j.SplitButton){g+=" mceToolbarEndSplitButton"}else{if(j.ListBox){g+=" mceToolbarEndListBox"}}}e+=b.createHTML("td",{"class":g},b.createHTML("span",null,"<!-- IE -->"));return b.createHTML("table",{id:l.id,"class":"mceToolbar"+(m["class"]?" "+m["class"]:""),cellpadding:"0",cellspacing:"0",align:l.settings.align||""},"<tbody><tr>"+e+"</tr></tbody>")}});(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new a(this),get:function(d){return this.lookup[d]},requireLangPack:function(e){var d=b.settings;if(d&&d.language){b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")}},add:function(e,d){this.items.push(d);this.lookup[e]=d;this.onAdd.dispatch(this,e,d);return d},load:function(h,e,d,g){var f=this;if(f.urls[h]){return}if(e.indexOf("/")!=0&&e.indexOf("://")==-1){e=b.baseURL+"/"+e}f.urls[h]=e.substring(0,e.lastIndexOf("/"));b.ScriptLoader.add(e,d,g)}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(j){var g=j.each,d=j.extend,k=j.DOM,i=j.dom.Event,f=j.ThemeManager,b=j.PluginManager,e=j.explode,h=j.util.Dispatcher,a,c=0;j.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(j.documentBaseURL)){j.documentBaseURL+="/"}j.baseURL=new j.util.URI(j.documentBaseURL).toAbsolute(j.baseURL);j.baseURI=new j.util.URI(j.baseURL);j.onBeforeUnload=new h(j);i.add(window,"beforeunload",function(l){j.onBeforeUnload.dispatch(j,l)});j.onAddEditor=new h(j);j.onRemoveEditor=new h(j);j.EditorManager=d(j,{editors:[],i18n:{},activeEditor:null,init:function(q){var n=this,p,l=j.ScriptLoader,u,o=[],m;function r(x,y,t){var v=x[y];if(!v){return}if(j.is(v,"string")){t=v.replace(/\.\w+$/,"");t=t?j.resolve(t):0;v=j.resolve(v)}return v.apply(t||this,Array.prototype.slice.call(arguments,2))}q=d({theme:"simple",language:"en"},q);n.settings=q;i.add(document,"init",function(){var s,v;r(q,"onpageload");switch(q.mode){case"exact":s=q.elements||"";if(s.length>0){g(e(s),function(x){if(k.get(x)){m=new j.Editor(x,q);o.push(m);m.render(1)}else{g(document.forms,function(y){g(y.elements,function(z){if(z.name===x){x="mce_editor_"+c++;k.setAttrib(z,"id",x);m=new j.Editor(x,q);o.push(m);m.render(1)}})})}})}break;case"textareas":case"specific_textareas":function t(y,x){return x.constructor===RegExp?x.test(y.className):k.hasClass(y,x)}g(k.select("textarea"),function(x){if(q.editor_deselector&&t(x,q.editor_deselector)){return}if(!q.editor_selector||t(x,q.editor_selector)){u=k.get(x.name);if(!x.id&&!u){x.id=x.name}if(!x.id||n.get(x.id)){x.id=k.uniqueId()}m=new j.Editor(x.id,q);o.push(m);m.render(1)}});break}if(q.oninit){s=v=0;g(o,function(x){v++;if(!x.initialized){x.onInit.add(function(){s++;if(s==v){r(q,"oninit")}})}else{s++}if(s==v){r(q,"oninit")}})}})},get:function(l){if(l===a){return this.editors}return this.editors[l]},getInstanceById:function(l){return this.get(l)},add:function(m){var l=this,n=l.editors;n[m.id]=m;n.push(m);l._setActive(m);l.onAddEditor.dispatch(l,m);return m},remove:function(n){var m=this,l,o=m.editors;if(!o[n.id]){return null}delete o[n.id];for(l=0;l<o.length;l++){if(o[l]==n){o.splice(l,1);break}}if(m.activeEditor==n){m._setActive(o[0])}n.destroy();m.onRemoveEditor.dispatch(m,n);return n},execCommand:function(r,p,o){var q=this,n=q.get(o),l;switch(r){case"mceFocus":n.focus();return true;case"mceAddEditor":case"mceAddControl":if(!q.get(o)){new j.Editor(o,q.settings).render()}return true;case"mceAddFrameControl":l=o.window;l.tinyMCE=tinyMCE;l.tinymce=j;j.DOM.doc=l.document;j.DOM.win=l;n=new j.Editor(o.element_id,o);n.render();if(j.isIE){function m(){n.destroy();l.detachEvent("onunload",m);l=l.tinyMCE=l.tinymce=null}l.attachEvent("onunload",m)}o.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(n){n.remove()}return true;case"mceToggleEditor":if(!n){q.execCommand("mceAddControl",0,o);return true}if(n.isHidden()){n.show()}else{n.hide()}return true}if(q.activeEditor){return q.activeEditor.execCommand(r,p,o)}return false},execInstanceCommand:function(p,o,n,m){var l=this.get(p);if(l){return l.execCommand(o,n,m)}return false},triggerSave:function(){g(this.editors,function(l){l.save()})},addI18n:function(n,q){var l,m=this.i18n;if(!j.is(n,"string")){g(n,function(r,p){g(r,function(t,s){g(t,function(v,u){if(s==="common"){m[p+"."+u]=v}else{m[p+"."+s+"."+u]=v}})})})}else{g(q,function(r,p){m[n+"."+p]=r})}},_setActive:function(l){this.selectedInstance=this.activeEditor=l}})})(tinymce);(function(m){var n=m.DOM,j=m.dom.Event,f=m.extend,k=m.util.Dispatcher,i=m.each,a=m.isGecko,b=m.isIE,e=m.isWebKit,d=m.is,h=m.ThemeManager,c=m.PluginManager,o=m.inArray,l=m.grep,g=m.explode;m.create("tinymce.Editor",{Editor:function(r,q){var p=this;p.id=p.editorId=r;p.execCommands={};p.queryStateCommands={};p.queryValueCommands={};p.isNotDirty=false;p.plugins={};i(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(s){p[s]=new k(p)});p.settings=q=f({id:r,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:m.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:m.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true},q);p.documentBaseURI=new m.util.URI(q.document_base_url||m.documentBaseURL,{base_uri:tinyMCE.baseURI});p.baseURI=m.baseURI;p.execCallback("setup",p)},render:function(r){var u=this,v=u.settings,x=u.id,p=m.ScriptLoader;if(!j.domLoaded){j.add(document,"init",function(){u.render()});return}tinyMCE.settings=v;if(!u.getElement()){return}if(m.isIDevice){return}if(!/TEXTAREA|INPUT/i.test(u.getElement().nodeName)&&v.hidden_input&&n.getParent(x,"form")){n.insertAfter(n.create("input",{type:"hidden",name:x}),x)}if(m.WindowManager){u.windowManager=new m.WindowManager(u)}if(v.encoding=="xml"){u.onGetContent.add(function(s,t){if(t.save){t.content=n.encode(t.content)}})}if(v.add_form_submit_trigger){u.onSubmit.addToTop(function(){if(u.initialized){u.save();u.isNotDirty=1}})}if(v.add_unload_trigger){u._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(u.initialized&&!u.destroyed&&!u.isHidden()){u.save({format:"raw",no_events:true})}})}m.addUnload(u.destroy,u);if(v.submit_patch){u.onBeforeRenderUI.add(function(){var s=u.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){u.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){m.triggerSave();u.isNotDirty=1;return u.formElement._mceOldSubmit(u.formElement)}}s=null})}function q(){if(v.language){p.add(m.baseURL+"/langs/"+v.language+".js")}if(v.theme&&v.theme.charAt(0)!="-"&&!h.urls[v.theme]){h.load(v.theme,"themes/"+v.theme+"/editor_template"+m.suffix+".js")}i(g(v.plugins),function(s){if(s&&s.charAt(0)!="-"&&!c.urls[s]){if(s=="safari"){return}c.load(s,"plugins/"+s+"/editor_plugin"+m.suffix+".js")}});p.loadQueue(function(){if(!u.removed){u.init()}})}q()},init:function(){var r,E=this,F=E.settings,B,y,A=E.getElement(),q,p,C,x,z,D;m.add(E);if(F.theme){F.theme=F.theme.replace(/-/,"");q=h.get(F.theme);E.theme=new q();if(E.theme.init&&F.init_theme){E.theme.init(E,h.urls[F.theme]||m.documentBaseURL.replace(/\/$/,""))}}i(g(F.plugins.replace(/\-/g,"")),function(G){var H=c.get(G),t=c.urls[G]||m.documentBaseURL.replace(/\/$/,""),s;if(H){s=new H(E,t);E.plugins[G]=s;if(s.init){s.init(E,t)}}});if(F.popup_css!==false){if(F.popup_css){F.popup_css=E.documentBaseURI.toAbsolute(F.popup_css)}else{F.popup_css=E.baseURI.toAbsolute("themes/"+F.theme+"/skins/"+F.skin+"/dialog.css")}}if(F.popup_css_add){F.popup_css+=","+E.documentBaseURI.toAbsolute(F.popup_css_add)}E.controlManager=new m.ControlManager(E);if(F.custom_undo_redo){E.onBeforeExecCommand.add(function(t,G,u,H,s){if(G!="Undo"&&G!="Redo"&&G!="mceRepaint"&&(!s||!s.skip_undo)){if(!E.undoManager.hasUndo()){E.undoManager.add()}}});E.onExecCommand.add(function(t,G,u,H,s){if(G!="Undo"&&G!="Redo"&&G!="mceRepaint"&&(!s||!s.skip_undo)){E.undoManager.add()}})}E.onExecCommand.add(function(s,t){if(!/^(FontName|FontSize)$/.test(t)){E.nodeChanged()}});if(a){function v(s,t){if(!t||!t.initial){E.execCommand("mceRepaint")}}E.onUndo.add(v);E.onRedo.add(v);E.onSetContent.add(v)}E.onBeforeRenderUI.dispatch(E,E.controlManager);if(F.render_ui){B=F.width||A.style.width||A.offsetWidth;y=F.height||A.style.height||A.offsetHeight;E.orgDisplay=A.style.display;D=/^[0-9\.]+(|px)$/i;if(D.test(""+B)){B=Math.max(parseInt(B)+(q.deltaWidth||0),100)}if(D.test(""+y)){y=Math.max(parseInt(y)+(q.deltaHeight||0),100)}q=E.theme.renderUI({targetNode:A,width:B,height:y,deltaWidth:F.delta_width,deltaHeight:F.delta_height});E.editorContainer=q.editorContainer}if(document.domain&&location.hostname!=document.domain){m.relaxedDomain=document.domain}n.setStyles(q.sizeContainer||q.editorContainer,{width:B,height:y});y=(q.iframeHeight||y)+(typeof(y)=="number"?(q.deltaHeight||0):"");if(y<100){y=100}E.iframeHTML=F.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(F.document_base_url!=m.documentBaseURL){E.iframeHTML+='<base href="'+E.documentBaseURI.getURI()+'" />'}E.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(m.relaxedDomain){E.iframeHTML+='<script type="text/javascript">document.domain = "'+m.relaxedDomain+'";<\/script>'}x=F.body_id||"tinymce";if(x.indexOf("=")!=-1){x=E.getParam("body_id","","hash");x=x[E.id]||x}z=F.body_class||"";if(z.indexOf("=")!=-1){z=E.getParam("body_class","","hash");z=z[E.id]||""}E.iframeHTML+='</head><body id="'+x+'" class="mceContentBody '+z+'"></body></html>';if(m.relaxedDomain){if(b||(m.isOpera&&parseFloat(opera.version())>=9.5)){C='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+E.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}else{if(m.isOpera){C='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()'}}}r=n.add(q.iframeContainer,"iframe",{id:E.id+"_ifr",src:C||'javascript:""',frameBorder:"0",style:{width:"100%",height:y}});E.contentAreaContainer=q.iframeContainer;n.get(q.editorContainer).style.display=E.orgDisplay;n.get(E.id).style.display="none";if(!b||!m.relaxedDomain){E.setupIframe()}A=r=q=null},setupIframe:function(){var z=this,A=z.settings,r=n.get(z.id),u=z.getDoc(),q,x;if(!b||!m.relaxedDomain){u.open();u.write(z.iframeHTML);u.close()}if(!b){try{if(!A.readonly){u.designMode="On"}}catch(v){}}if(b){x=z.getBody();n.hide(x);if(!A.readonly){x.contentEditable=true}n.show(x)}z.dom=new m.dom.DOMUtils(z.getDoc(),{keep_values:true,url_converter:z.convertURL,url_converter_scope:z,hex_colors:A.force_hex_style_colors,class_filter:A.class_filter,update_styles:1,fix_ie_paragraphs:1,valid_styles:A.valid_styles});z.schema=new m.dom.Schema();z.serializer=new m.dom.Serializer(f(A,{valid_elements:A.verify_html===false?"*[*]":A.valid_elements,dom:z.dom,schema:z.schema}));z.selection=new m.dom.Selection(z.dom,z.getWin(),z.serializer);z.formatter=new m.Formatter(this);z.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b"}],italic:[{inline:"em"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"u"}],forecolor:{inline:"span",styles:{color:"%value"}},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"}},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});i("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(s){z.formatter.register(s,{block:s,remove:"all"})});z.formatter.register(z.settings.formats);z.undoManager=new m.UndoManager(z);z.undoManager.onAdd.add(function(t,s){if(!s.initial){return z.onChange.dispatch(z,s,t)}});z.undoManager.onUndo.add(function(t,s){return z.onUndo.dispatch(z,s,t)});z.undoManager.onRedo.add(function(t,s){return z.onRedo.dispatch(z,s,t)});z.forceBlocks=new m.ForceBlocks(z,{forced_root_block:A.forced_root_block});z.editorCommands=new m.EditorCommands(z);z.serializer.onPreProcess.add(function(s,t){return z.onPreProcess.dispatch(z,t,s)});z.serializer.onPostProcess.add(function(s,t){return z.onPostProcess.dispatch(z,t,s)});z.onPreInit.dispatch(z);if(!A.gecko_spellcheck){z.getBody().spellcheck=0}if(!A.readonly){z._addEvents()}z.controlManager.onPostRender.dispatch(z,z.controlManager);z.onPostRender.dispatch(z);if(A.directionality){z.getBody().dir=A.directionality}if(A.nowrap){z.getBody().style.whiteSpace="nowrap"}if(A.custom_elements){function y(s,t){i(g(A.custom_elements),function(B){var C;if(B.indexOf("~")===0){B=B.substring(1);C="span"}else{C="div"}t.content=t.content.replace(new RegExp("<("+B+")([^>]*)>","g"),"<"+C+' _mce_name="$1"$2>');t.content=t.content.replace(new RegExp("</("+B+")>","g"),"</"+C+">")})}z.onBeforeSetContent.add(y);z.onPostProcess.add(function(s,t){if(t.set){y(s,t)}})}if(A.handle_node_change_callback){z.onNodeChange.add(function(t,s,B){z.execCallback("handle_node_change_callback",z.id,B,-1,-1,true,z.selection.isCollapsed())})}if(A.save_callback){z.onSaveContent.add(function(s,B){var t=z.execCallback("save_callback",z.id,B.content,z.getBody());if(t){B.content=t}})}if(A.onchange_callback){z.onChange.add(function(t,s){z.execCallback("onchange_callback",z,s)})}if(A.convert_newlines_to_brs){z.onBeforeSetContent.add(function(s,t){if(t.initial){t.content=t.content.replace(/\r?\n/g,"<br />")}})}if(A.fix_nesting&&b){z.onBeforeSetContent.add(function(s,t){t.content=z._fixNesting(t.content)})}if(A.preformatted){z.onPostProcess.add(function(s,t){t.content=t.content.replace(/^\s*<pre.*?>/,"");t.content=t.content.replace(/<\/pre>\s*$/,"");if(t.set){t.content='<pre class="mceItemHidden">'+t.content+"</pre>"}})}if(A.verify_css_classes){z.serializer.attribValueFilter=function(D,B){var C,t;if(D=="class"){if(!z.classesRE){t=z.dom.getClasses();if(t.length>0){C="";i(t,function(s){C+=(C?"|":"")+s["class"]});z.classesRE=new RegExp("("+C+")","gi")}}return !z.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(B)||z.classesRE.test(B)?B:""}return B}}if(A.cleanup_callback){z.onBeforeSetContent.add(function(s,t){t.content=z.execCallback("cleanup_callback","insert_to_editor",t.content,t)});z.onPreProcess.add(function(s,t){if(t.set){z.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t)}if(t.get){z.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}});z.onPostProcess.add(function(s,t){if(t.set){t.content=z.execCallback("cleanup_callback","insert_to_editor",t.content,t)}if(t.get){t.content=z.execCallback("cleanup_callback","get_from_editor",t.content,t)}})}if(A.save_callback){z.onGetContent.add(function(s,t){if(t.save){t.content=z.execCallback("save_callback",z.id,t.content,z.getBody())}})}if(A.handle_event_callback){z.onEvent.add(function(s,t,B){if(z.execCallback("handle_event_callback",t,s,B)===false){j.cancel(t)}})}z.onSetContent.add(function(){z.addVisual(z.getBody())});if(A.padd_empty_editor){z.onPostProcess.add(function(s,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(a){function p(s,t){i(s.dom.select("a"),function(C){var B=C.parentNode;if(s.dom.isBlock(B)&&B.lastChild===C){s.dom.add(B,"br",{_mce_bogus:1})}})}z.onExecCommand.add(function(s,t){if(t==="CreateLink"){p(s)}});z.onSetContent.add(z.selection.onSetContent.add(p));if(!A.readonly){try{u.designMode="Off";u.designMode="On"}catch(v){}}}setTimeout(function(){if(z.removed){return}z.load({initial:true,format:(A.cleanup_on_startup?"html":"raw")});z.startContent=z.getContent({format:"raw"});z.initialized=true;z.onInit.dispatch(z);z.execCallback("setupcontent_callback",z.id,z.getBody(),z.getDoc());z.execCallback("init_instance_callback",z);z.focus(true);z.nodeChanged({initial:1});if(A.content_css){m.each(g(A.content_css),function(s){z.dom.loadCSS(z.documentBaseURI.toAbsolute(s))})}if(A.auto_focus){setTimeout(function(){var s=m.get(A.auto_focus);s.selection.select(s.getBody(),1);s.selection.collapse(1);s.getWin().focus()},100)}},1);r=null},focus:function(s){var x,q=this,v=q.settings.content_editable,r,p,u=q.getDoc();if(!s){r=q.selection.getRng();if(r.item){p=r.item(0)}if(!v){q.getWin().focus()}if(p&&p.ownerDocument==u){r=u.body.createControlRange();r.addElement(p);r.select()}}if(m.activeEditor!=q){if((x=m.activeEditor)!=null){x.onDeactivate.dispatch(x,q)}q.onActivate.dispatch(q,x)}m._setActive(q)},execCallback:function(u){var p=this,r=p.settings[u],q;if(!r){return}if(p.callbackLookup&&(q=p.callbackLookup[u])){r=q.func;q=q.scope}if(d(r,"string")){q=r.replace(/\.\w+$/,"");q=q?m.resolve(q):0;r=m.resolve(r);p.callbackLookup=p.callbackLookup||{};p.callbackLookup[u]={func:r,scope:q}}return r.apply(q||p,Array.prototype.slice.call(arguments,1))},translate:function(p){var r=this.settings.language||"en",q=m.i18n;if(!p){return""}return q[r+"."+p]||p.replace(/{\#([^}]+)\}/g,function(t,s){return q[r+"."+s]||"{#"+s+"}"})},getLang:function(q,p){return m.i18n[(this.settings.language||"en")+"."+q]||(d(p)?p:"{#"+q+"}")},getParam:function(u,r,p){var s=m.trim,q=d(this.settings[u])?this.settings[u]:r,t;if(p==="hash"){t={};if(d(q,"string")){i(q.indexOf("=")>0?q.split(/[;,](?![^=;,]*(?:[;,]|$))/):q.split(","),function(x){x=x.split("=");if(x.length>1){t[s(x[0])]=s(x[1])}else{t[s(x[0])]=s(x)}})}else{t=q}return t}return q},nodeChanged:function(r){var p=this,q=p.selection,u=(b?q.getNode():q.getStart())||p.getBody();if(p.initialized){r=r||{};u=b&&u.ownerDocument!=p.getDoc()?p.getBody():u;r.parents=[];p.dom.getParent(u,function(s){if(s.nodeName=="BODY"){return true}r.parents.push(s)});p.onNodeChange.dispatch(p,r?r.controlManager||p.controlManager:p.controlManager,u,q.isCollapsed(),r)}},addButton:function(r,q){var p=this;p.buttons=p.buttons||{};p.buttons[r]=q},addCommand:function(r,q,p){this.execCommands[r]={func:q,scope:p||this}},addQueryStateHandler:function(r,q,p){this.queryStateCommands[r]={func:q,scope:p||this}},addQueryValueHandler:function(r,q,p){this.queryValueCommands[r]={func:q,scope:p||this}},addShortcut:function(r,u,p,s){var q=this,v;if(!q.settings.custom_shortcuts){return false}q.shortcuts=q.shortcuts||{};if(d(p,"string")){v=p;p=function(){q.execCommand(v,false,null)}}if(d(p,"object")){v=p;p=function(){q.execCommand(v[0],v[1],v[2])}}i(g(r),function(t){var x={func:p,scope:s||this,desc:u,alt:false,ctrl:false,shift:false};i(g(t,"+"),function(y){switch(y){case"alt":case"ctrl":case"shift":x[y]=true;break;default:x.charCode=y.charCodeAt(0);x.keyCode=y.toUpperCase().charCodeAt(0)}});q.shortcuts[(x.ctrl?"ctrl":"")+","+(x.alt?"alt":"")+","+(x.shift?"shift":"")+","+x.keyCode]=x});return true},execCommand:function(x,v,z,p){var r=this,u=0,y,q;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(x)&&(!p||!p.skip_focus)){r.focus()}y={};r.onBeforeExecCommand.dispatch(r,x,v,z,y);if(y.terminate){return false}if(r.execCallback("execcommand_callback",r.id,r.selection.getNode(),x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}if(y=r.execCommands[x]){q=y.func.call(y.scope,v,z);if(q!==true){r.onExecCommand.dispatch(r,x,v,z,p);return q}}i(r.plugins,function(s){if(s.execCommand&&s.execCommand(x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);u=1;return false}});if(u){return true}if(r.theme&&r.theme.execCommand&&r.theme.execCommand(x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}if(m.GlobalCommands.execCommand(r,x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}if(r.editorCommands.execCommand(x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}r.getDoc().execCommand(x,v,z);r.onExecCommand.dispatch(r,x,v,z,p)},queryCommandState:function(u){var q=this,v,r;if(q._isHidden()){return}if(v=q.queryStateCommands[u]){r=v.func.call(v.scope);if(r!==true){return r}}v=q.editorCommands.queryCommandState(u);if(v!==-1){return v}try{return this.getDoc().queryCommandState(u)}catch(p){}},queryCommandValue:function(v){var q=this,u,r;if(q._isHidden()){return}if(u=q.queryValueCommands[v]){r=u.func.call(u.scope);if(r!==true){return r}}u=q.editorCommands.queryCommandValue(v);if(d(u)){return u}try{return this.getDoc().queryCommandValue(v)}catch(p){}},show:function(){var p=this;n.show(p.getContainer());n.hide(p.id);p.load()},hide:function(){var p=this,q=p.getDoc();if(b&&q){q.execCommand("SelectAll")}p.save();n.hide(p.getContainer());n.setStyle(p.id,"display",p.orgDisplay)},isHidden:function(){return !n.isHidden(this.id)},setProgressState:function(p,q,r){this.onSetProgressState.dispatch(this,p,q,r);return p},load:function(s){var p=this,r=p.getElement(),q;if(r){s=s||{};s.load=true;q=p.setContent(d(r.value)?r.value:r.innerHTML,s);s.element=r;if(!s.no_events){p.onLoadContent.dispatch(p,s)}s.element=r=null;return q}},save:function(u){var p=this,s=p.getElement(),q,r;if(!s||!p.initialized){return}u=u||{};u.save=true;if(!u.no_events){p.undoManager.typing=0;p.undoManager.add()}u.element=s;q=u.content=p.getContent(u);if(!u.no_events){p.onSaveContent.dispatch(p,u)}q=u.content;if(!/TEXTAREA|INPUT/i.test(s.nodeName)){s.innerHTML=q;if(r=n.getParent(p.id,"form")){i(r.elements,function(t){if(t.name==p.id){t.value=q;return false}})}}else{s.value=q}u.element=s=null;return q},setContent:function(q,r){var p=this;r=r||{};r.format=r.format||"html";r.set=true;r.content=q;if(!r.no_events){p.onBeforeSetContent.dispatch(p,r)}if(!m.isIE&&(q.length===0||/^\s+$/.test(q))){r.content=p.dom.setHTML(p.getBody(),'<br _mce_bogus="1" />');r.format="raw"}r.content=p.dom.setHTML(p.getBody(),m.trim(r.content));if(r.format!="raw"&&p.settings.cleanup){r.getInner=true;r.content=p.dom.setHTML(p.getBody(),p.serializer.serialize(p.getBody(),r))}if(!r.no_events){p.onSetContent.dispatch(p,r)}return r.content},getContent:function(r){var p=this,q;r=r||{};r.format=r.format||"html";r.get=true;if(!r.no_events){p.onBeforeGetContent.dispatch(p,r)}if(r.format!="raw"&&p.settings.cleanup){r.getInner=true;q=p.serializer.serialize(p.getBody(),r)}else{q=p.getBody().innerHTML}q=q.replace(/^\s*|\s*$/g,"");r.content=q;if(!r.no_events){p.onGetContent.dispatch(p,r)}return r.content},isDirty:function(){var p=this;return m.trim(p.startContent)!=m.trim(p.getContent({format:"raw",no_events:1}))&&!p.isNotDirty},getContainer:function(){var p=this;if(!p.container){p.container=n.get(p.editorContainer||p.id+"_parent")}return p.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return n.get(this.settings.content_element||this.id)},getWin:function(){var p=this,q;if(!p.contentWindow){q=n.get(p.id+"_ifr");if(q){p.contentWindow=q.contentWindow}}return p.contentWindow},getDoc:function(){var q=this,p;if(!q.contentDocument){p=q.getWin();if(p){q.contentDocument=p.document}}return q.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(p,x,v){var q=this,r=q.settings;if(r.urlconverter_callback){return q.execCallback("urlconverter_callback",p,v,true,x)}if(!r.convert_urls||(v&&v.nodeName=="LINK")||p.indexOf("file:")===0){return p}if(r.relative_urls){return q.documentBaseURI.toRelative(p)}p=q.documentBaseURI.toAbsolute(p,r.remove_script_host);return p},addVisual:function(r){var p=this,q=p.settings;r=r||p.getBody();if(!d(p.hasVisual)){p.hasVisual=q.visual}i(p.dom.select("table,a",r),function(t){var s;switch(t.nodeName){case"TABLE":s=p.dom.getAttrib(t,"border");if(!s||s=="0"){if(p.hasVisual){p.dom.addClass(t,q.visual_table_class)}else{p.dom.removeClass(t,q.visual_table_class)}}return;case"A":s=p.dom.getAttrib(t,"name");if(s){if(p.hasVisual){p.dom.addClass(t,"mceItemAnchor")}else{p.dom.removeClass(t,"mceItemAnchor")}}return}});p.onVisualAid.dispatch(p,r,p.hasVisual)},remove:function(){var p=this,q=p.getContainer();p.removed=1;p.hide();p.execCallback("remove_instance_callback",p);p.onRemove.dispatch(p);p.onExecCommand.listeners=[];m.remove(p);n.remove(q)},destroy:function(q){var p=this;if(p.destroyed){return}if(!q){m.removeUnload(p.destroy);tinyMCE.onBeforeUnload.remove(p._beforeUnload);if(p.theme&&p.theme.destroy){p.theme.destroy()}p.controlManager.destroy();p.selection.destroy();p.dom.destroy();if(!p.settings.content_editable){j.clear(p.getWin());j.clear(p.getDoc())}j.clear(p.getBody());j.clear(p.formElement)}if(p.formElement){p.formElement.submit=p.formElement._mceOldSubmit;p.formElement._mceOldSubmit=null}p.contentAreaContainer=p.formElement=p.container=p.settings.content_element=p.bodyElement=p.contentDocument=p.contentWindow=null;if(p.selection){p.selection=p.selection.win=p.selection.dom=p.selection.dom.doc=null}p.destroyed=1},_addEvents:function(){var v=this,u,y=v.settings,x={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function r(t,A){var s=t.type;if(v.removed){return}if(v.onEvent.dispatch(v,t,A)!==false){v[x[t.fakeType||t.type]].dispatch(v,t,A)}}i(x,function(t,s){switch(s){case"contextmenu":if(m.isOpera){v.dom.bind(v.getBody(),"mousedown",function(A){if(A.ctrlKey){A.fakeType="contextmenu";r(A)}})}else{v.dom.bind(v.getBody(),s,r)}break;case"paste":v.dom.bind(v.getBody(),s,function(A){r(A)});break;case"submit":case"reset":v.dom.bind(v.getElement().form||n.getParent(v.id,"form"),s,r);break;default:v.dom.bind(y.content_editable?v.getBody():v.getDoc(),s,r)}});v.dom.bind(y.content_editable?v.getBody():(a?v.getDoc():v.getWin()),"focus",function(s){v.focus(true)});if(m.isGecko){v.dom.bind(v.getDoc(),"DOMNodeInserted",function(t){var s;t=t.target;if(t.nodeType===1&&t.nodeName==="IMG"&&(s=t.getAttribute("_mce_src"))){t.src=v.documentBaseURI.toAbsolute(s)}})}if(a){function p(){var B=this,D=B.getDoc(),C=B.settings;if(a&&!C.readonly){if(B._isHidden()){try{if(!C.content_editable){D.designMode="On"}}catch(A){}}try{D.execCommand("styleWithCSS",0,false)}catch(A){if(!B._isHidden()){try{D.execCommand("useCSS",0,true)}catch(A){}}}if(!C.table_inline_editing){try{D.execCommand("enableInlineTableEditing",false,false)}catch(A){}}if(!C.object_resizing){try{D.execCommand("enableObjectResizing",false,false)}catch(A){}}}}v.onBeforeExecCommand.add(p);v.onMouseDown.add(p)}if(m.isWebKit){v.onClick.add(function(s,t){t=t.target;if(t.nodeName=="IMG"||(t.nodeName=="A"&&v.dom.hasClass(t,"mceItemAnchor"))){v.selection.getSel().setBaseAndExtent(t,0,t,1)}})}v.onMouseUp.add(v.nodeChanged);v.onKeyUp.add(function(s,t){var A=t.keyCode;if((A>=33&&A<=36)||(A>=37&&A<=40)||A==13||A==45||A==46||A==8||(m.isMac&&(A==91||A==93))||t.ctrlKey){v.nodeChanged()}});v.onReset.add(function(){v.setContent(v.startContent,{format:"raw"})});if(y.custom_shortcuts){if(y.custom_undo_redo_keyboard_shortcuts){v.addShortcut("ctrl+z",v.getLang("undo_desc"),"Undo");v.addShortcut("ctrl+y",v.getLang("redo_desc"),"Redo")}v.addShortcut("ctrl+b",v.getLang("bold_desc"),"Bold");v.addShortcut("ctrl+i",v.getLang("italic_desc"),"Italic");v.addShortcut("ctrl+u",v.getLang("underline_desc"),"Underline");for(u=1;u<=6;u++){v.addShortcut("ctrl+"+u,"",["FormatBlock",false,"h"+u])}v.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);v.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);v.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);function z(t){var s=null;if(!t.altKey&&!t.ctrlKey&&!t.metaKey){return s}i(v.shortcuts,function(A){if(m.isMac&&A.ctrl!=t.metaKey){return}else{if(!m.isMac&&A.ctrl!=t.ctrlKey){return}}if(A.alt!=t.altKey){return}if(A.shift!=t.shiftKey){return}if(t.keyCode==A.keyCode||(t.charCode&&t.charCode==A.charCode)){s=A;return false}});return s}v.onKeyUp.add(function(s,t){var A=z(t);if(A){return j.cancel(t)}});v.onKeyPress.add(function(s,t){var A=z(t);if(A){return j.cancel(t)}});v.onKeyDown.add(function(s,t){var A=z(t);if(A){A.func.call(A.scope);return j.cancel(t)}})}if(m.isIE){v.dom.bind(v.getDoc(),"controlselect",function(A){var t=v.resizeInfo,s;A=A.target;if(A.nodeName!=="IMG"){return}if(t){v.dom.unbind(t.node,t.ev,t.cb)}if(!v.dom.hasClass(A,"mceItemNoResize")){ev="resizeend";s=v.dom.bind(A,ev,function(C){var B;C=C.target;if(B=v.dom.getStyle(C,"width")){v.dom.setAttrib(C,"width",B.replace(/[^0-9%]+/g,""));v.dom.setStyle(C,"width","")}if(B=v.dom.getStyle(C,"height")){v.dom.setAttrib(C,"height",B.replace(/[^0-9%]+/g,""));v.dom.setStyle(C,"height","")}})}else{ev="resizestart";s=v.dom.bind(A,"resizestart",j.cancel,j)}t=v.resizeInfo={node:A,ev:ev,cb:s}});v.onKeyDown.add(function(s,t){switch(t.keyCode){case 8:if(v.selection.getRng().item){s.dom.remove(v.selection.getRng().item(0));return j.cancel(t)}}})}if(m.isOpera){v.onClick.add(function(s,t){j.prevent(t)})}if(y.custom_undo_redo){function q(){v.undoManager.typing=0;v.undoManager.add()}v.dom.bind(v.getDoc(),"focusout",function(s){if(!v.removed&&v.undoManager.typing){q()}});v.onKeyUp.add(function(s,t){if((t.keyCode>=33&&t.keyCode<=36)||(t.keyCode>=37&&t.keyCode<=40)||t.keyCode==13||t.keyCode==45||t.ctrlKey){q()}});v.onKeyDown.add(function(t,D){var s,C,B;if(b&&D.keyCode==46){s=v.selection.getRng();if(s.parentElement){C=s.parentElement();if(D.ctrlKey){s.moveEnd("word",1);s.select()}v.selection.getSel().clear();if(s.parentElement()==C){B=v.selection.getBookmark();try{C.innerHTML=C.innerHTML}catch(A){}v.selection.moveToBookmark(B)}D.preventDefault();return}}if((D.keyCode>=33&&D.keyCode<=36)||(D.keyCode>=37&&D.keyCode<=40)||D.keyCode==13||D.keyCode==45){if(v.undoManager.typing){q()}return}if(!v.undoManager.typing){v.undoManager.add();v.undoManager.typing=1}});v.onMouseDown.add(function(){if(v.undoManager.typing){q()}})}},_isHidden:function(){var p;if(!a){return 0}p=this.selection.getSel();return(!p||!p.rangeCount||p.rangeCount==0)},_fixNesting:function(q){var r=[],p;q=q.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(t,s,v){var u;if(s==="/"){if(!r.length){return""}if(v!==r[r.length-1].tag){for(p=r.length-1;p>=0;p--){if(r[p].tag===v){r[p].close=1;break}}return""}else{r.pop();if(r.length&&r[r.length-1].close){t=t+"</"+r[r.length-1].tag+">";r.pop()}}}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(v)){return t}if(/\/>$/.test(t)){return t}r.push({tag:v})}return t});for(p=r.length-1;p>=0;p--){q+="</"+r[p].tag+">"}return q}})})(tinymce);(function(c){var d=c.each,e,a=true,b=false;c.EditorCommands=function(n){var l=n.dom,p=n.selection,j={state:{},exec:{},value:{}},k=n.settings,o;function q(y,x,v){var u;y=y.toLowerCase();if(u=j.exec[y]){u(y,x,v);return a}return b}function m(v){var u;v=v.toLowerCase();if(u=j.state[v]){return u(v)}return -1}function h(v){var u;v=v.toLowerCase();if(u=j.value[v]){return u(v)}return b}function t(u,v){v=v||"exec";d(u,function(y,x){d(x.toLowerCase().split(","),function(z){j[v][z]=y})})}c.extend(this,{execCommand:q,queryCommandState:m,queryCommandValue:h,addCommands:t});function f(x,v,u){if(v===e){v=b}if(u===e){u=null}return n.getDoc().execCommand(x,v,u)}function s(u){return n.formatter.match(u)}function r(u,v){n.formatter.toggle(u,v?{value:v}:e)}function i(u){o=p.getBookmark(u)}function g(){p.moveToBookmark(o)}t({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(y){var x=n.getDoc(),u;try{f(y)}catch(v){u=a}if(u||!x.queryCommandSupported(y)){if(c.isGecko){n.windowManager.confirm(n.getLang("clipboard_msg"),function(z){if(z){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{n.windowManager.alert(n.getLang("clipboard_no_support"))}}},unlink:function(u){if(p.isCollapsed()){p.select(p.getNode())}f(u);p.collapse(b)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(u){var v=u.substring(7);d("left,center,right,full".split(","),function(x){if(v!=x){n.formatter.remove("align"+x)}});r("align"+v)},"InsertUnorderedList,InsertOrderedList":function(x){var u,v;f(x);u=l.getParent(p.getNode(),"ol,ul");if(u){v=u.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(v.nodeName)){i();l.split(v,u);g()}}},"Bold,Italic,Underline,Strikethrough":function(u){r(u)},"ForeColor,HiliteColor,FontName":function(x,v,u){r(x,u)},FontSize:function(y,x,v){var u,z;if(v>=1&&v<=7){z=c.explode(k.font_size_style_values);u=c.explode(k.font_size_classes);if(u){v=u[v-1]||v}else{v=z[v-1]||v}}r(y,v)},RemoveFormat:function(u){n.formatter.remove(u)},mceBlockQuote:function(u){r("blockquote")},FormatBlock:function(x,v,u){return r(u||"p")},mceCleanup:function(){var u=p.getBookmark();n.setContent(n.getContent({cleanup:a}),{cleanup:a});p.moveToBookmark(u)},mceRemoveNode:function(y,x,v){var u=v||p.getNode();if(u!=n.getBody()){i();n.dom.remove(u,a);g()}},mceSelectNodeDepth:function(y,x,v){var u=0;l.getParent(p.getNode(),function(z){if(z.nodeType==1&&u++==v){p.select(z);return b}},n.getBody())},mceSelectNode:function(x,v,u){p.select(u)},mceInsertContent:function(x,v,u){p.setContent(u)},mceInsertRawHTML:function(x,v,u){p.setContent("tiny_mce_marker");n.setContent(n.getContent().replace(/tiny_mce_marker/g,u))},mceSetContent:function(x,v,u){n.setContent(u)},"Indent,Outdent":function(y){var v,u,x;v=k.indentation;u=/[a-z%]+$/i.exec(v);v=parseInt(v);if(!m("InsertUnorderedList")&&!m("InsertOrderedList")){d(p.getSelectedBlocks(),function(z){if(y=="outdent"){x=Math.max(0,parseInt(z.style.paddingLeft||0)-v);l.setStyle(z,"paddingLeft",x?x+u:"")}else{l.setStyle(z,"paddingLeft",(parseInt(z.style.paddingLeft||0)+v)+u)}})}else{f(y)}},mceRepaint:function(){var v;if(c.isGecko){try{i(a);if(p.getSel()){p.getSel().selectAllChildren(n.getBody())}p.collapse(a);g()}catch(u){}}},mceToggleFormat:function(x,v,u){n.formatter.toggle(u)},InsertHorizontalRule:function(){p.setContent("<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual;n.addVisual()},mceReplaceContent:function(x,v,u){p.setContent(u.replace(/\{\$selection\}/g,p.getContent({format:"text"})))},mceInsertLink:function(y,x,v){var u=l.getParent(p.getNode(),"a");if(c.is(v,"string")){v={href:v}}if(!u){f("CreateLink",b,"javascript:mctmp(0);");d(l.select("a[href=javascript:mctmp(0);]"),function(z){l.setAttribs(z,v)})}else{if(v.href){l.setAttribs(u,v)}else{n.dom.remove(u,a)}}},selectAll:function(){var v=l.getRoot(),u=l.createRng();u.setStart(v,0);u.setEnd(v,v.childNodes.length);n.selection.setRng(u)}});t({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(u){return s("align"+u.substring(7))},"Bold,Italic,Underline,Strikethrough":function(u){return s(u)},mceBlockQuote:function(){return s("blockquote")},Outdent:function(){var u;if(k.inline_styles){if((u=l.getParent(p.getStart(),l.isBlock))&&parseInt(u.style.paddingLeft)>0){return a}if((u=l.getParent(p.getEnd(),l.isBlock))&&parseInt(u.style.paddingLeft)>0){return a}}return m("InsertUnorderedList")||m("InsertOrderedList")||(!k.inline_styles&&!!l.getParent(p.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(u){return l.getParent(p.getNode(),u=="insertunorderedlist"?"UL":"OL")}},"state");t({"FontSize,FontName":function(x){var v=0,u;if(u=l.getParent(p.getNode(),"span")){if(x=="fontsize"){v=u.style.fontSize}else{v=u.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return v}},"value");if(k.custom_undo_redo){t({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(e){var c,d=0,g=[];function f(){return b.trim(e.getContent({format:"raw",no_events:1}))}return c={typing:0,onAdd:new a(c),onUndo:new a(c),onRedo:new a(c),add:function(l){var h,j=e.settings,k;l=l||{};l.content=f();k=g[d];if(k&&k.content==l.content){if(d>0||g.length==1){return null}}if(j.custom_undo_redo_levels){if(g.length>j.custom_undo_redo_levels){for(h=0;h<g.length-1;h++){g[h]=g[h+1]}g.length--;d=g.length}}l.bookmark=e.selection.getBookmark(2,true);if(d<g.length-1){if(d==0){g=[]}else{g.length=d+1}}g.push(l);d=g.length-1;c.onAdd.dispatch(c,l);e.isNotDirty=0;return l},undo:function(){var j,h;if(c.typing){c.add();c.typing=0}if(d>0){j=g[--d];e.setContent(j.content,{format:"raw"});e.selection.moveToBookmark(j.bookmark);c.onUndo.dispatch(c,j)}return j},redo:function(){var h;if(d<g.length-1){h=g[++d];e.setContent(h.content,{format:"raw"});e.selection.moveToBookmark(h.bookmark);c.onRedo.dispatch(c,h)}return h},clear:function(){g=[];d=c.typing=0},hasUndo:function(){return d>0||c.typing},hasRedo:function(){return d<g.length-1}}}})(tinymce);(function(m){var k=m.dom.Event,c=m.isIE,a=m.isGecko,b=m.isOpera,j=m.each,i=m.extend,d=true,h=false;function l(p){var q,o,n;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(p.nodeName)){if(q){o=p.cloneNode(false);o.appendChild(q);q=o}else{q=n=p.cloneNode(false)}q.removeAttribute("id")}}while(p=p.parentNode);if(q){return{wrapper:q,inner:n}}}function g(o,p){var n=p.ownerDocument.createRange();n.setStart(o.endContainer,o.endOffset);n.setEndAfter(p);return n.cloneContents().textContent.length==0}function f(o){o=o.innerHTML;o=o.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");o=o.replace(/<[^>]+>/g,"");return o.replace(/[ \u00a0\t\r\n]+/g,"")==""}function e(p,r,n){var o,q;if(f(n)){o=r.getParent(n,"ul,ol");if(!r.getParent(o.parentNode,"ul,ol")){r.split(o,n);q=r.create("p",0,'<br _mce_bogus="1" />');r.replace(q,n);p.select(q,1)}return h}return d}m.create("tinymce.ForceBlocks",{ForceBlocks:function(o){var p=this,q=o.settings,r;p.editor=o;p.dom=o.dom;r=(q.forced_root_block||"p").toLowerCase();q.element=r.toUpperCase();o.onPreInit.add(p.setup,p);p.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+r+">","gi");p.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,r),"gi");p.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,r),"gi");p.reNbsp2BR2=new RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,r),"gi");p.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,r),"gi");function n(s,t){if(b){t.content=t.content.replace(p.reOpera,"</"+r+">")}t.content=t.content.replace(p.rePadd,"<"+r+"$1$2$3$4$5$6>\u00a0</"+r+">");if(!c&&!b&&t.set){t.content=t.content.replace(p.reNbsp2BR1,"<"+r+"$1$2><br /></"+r+">");t.content=t.content.replace(p.reNbsp2BR2,"<"+r+"$1$2><br /></"+r+">")}else{t.content=t.content.replace(p.reBR2Nbsp,"<"+r+"$1$2>\u00a0</"+r+">")}}o.onBeforeSetContent.add(n);o.onPostProcess.add(n);if(q.forced_root_block){o.onInit.add(p.forceRoots,p);o.onSetContent.add(p.forceRoots,p);o.onBeforeGetContent.add(p.forceRoots,p)}},setup:function(){var o=this,n=o.editor,q=n.settings,u=n.dom,p=n.selection;if(q.forced_root_block){n.onBeforeExecCommand.add(o.forceRoots,o);n.onKeyUp.add(o.forceRoots,o);n.onPreProcess.add(o.forceRoots,o)}if(q.force_br_newlines){if(c){n.onKeyPress.add(function(s,t){var v;if(t.keyCode==13&&p.getNode().nodeName!="LI"){p.setContent('<br id="__" /> ',{format:"raw"});v=u.get("__");v.removeAttribute("id");p.select(v);p.collapse();return k.cancel(t)}})}}if(q.force_p_newlines){if(!c){n.onKeyPress.add(function(s,t){if(t.keyCode==13&&!t.shiftKey&&!o.insertPara(t)){k.cancel(t)}})}else{m.addUnload(function(){o._previousFormats=0});n.onKeyPress.add(function(s,t){o._previousFormats=0;if(t.keyCode==13&&!t.shiftKey&&s.selection.isCollapsed()&&q.keep_styles){o._previousFormats=l(s.selection.getStart())}});n.onKeyUp.add(function(t,x){if(x.keyCode==13&&!x.shiftKey){var v=t.selection.getStart(),s=o._previousFormats;if(!v.hasChildNodes()){v=u.getParent(v,u.isBlock);if(v){v.innerHTML="";if(o._previousFormats){v.appendChild(s.wrapper);s.inner.innerHTML="\uFEFF"}else{v.innerHTML="\uFEFF"}p.select(v,1);t.getDoc().execCommand("Delete",false,null)}}}})}if(a){n.onKeyDown.add(function(s,t){if((t.keyCode==8||t.keyCode==46)&&!t.shiftKey){o.backspaceDelete(t,t.keyCode==8)}})}}if(m.isWebKit){function r(t){var s=p.getRng(),v,z=u.create("div",null," "),y,x=u.getViewPort(t.getWin()).h;s.insertNode(v=u.create("br"));s.setStartAfter(v);s.setEndAfter(v);p.setRng(s);if(p.getSel().focusNode==v.previousSibling){p.select(u.insertAfter(u.doc.createTextNode("\u00a0"),v));p.collapse(d)}u.insertAfter(z,v);y=u.getPos(z).y;u.remove(z);if(y>x){t.getWin().scrollTo(0,y)}}n.onKeyPress.add(function(s,t){if(t.keyCode==13&&(t.shiftKey||(q.force_br_newlines&&!u.getParent(p.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul")))){r(s);k.cancel(t)}})}n.onPreProcess.add(function(s,t){j(u.select("p,h1,h2,h3,h4,h5,h6,div",t.node),function(v){if(f(v)){j(u.select("span,em,strong,b,i",t.node),function(x){if(!x.hasChildNodes()){x.appendChild(s.getDoc().createTextNode("\u00a0"));return h}})}})});if(c){if(q.element!="P"){n.onKeyPress.add(function(s,t){o.lastElm=p.getNode().nodeName});n.onKeyUp.add(function(t,v){var y,x=p.getNode(),s=t.getBody();if(s.childNodes.length===1&&x.nodeName=="P"){x=u.rename(x,q.element);p.select(x);p.collapse();t.nodeChanged()}else{if(v.keyCode==13&&!v.shiftKey&&o.lastElm!="P"){y=u.getParent(x,"p");if(y){u.rename(y,q.element);t.nodeChanged()}}}})}}},find:function(v,q,r){var p=this.editor,o=p.getDoc().createTreeWalker(v,4,null,h),u=-1;while(v=o.nextNode()){u++;if(q==0&&v==r){return u}if(q==1&&u==r){return v}}return -1},forceRoots:function(x,I){var z=this,x=z.editor,M=x.getBody(),J=x.getDoc(),P=x.selection,A=P.getSel(),B=P.getRng(),N=-2,v,G,o,p,K=-16777215;var L,q,O,F,C,u=M.childNodes,E,D,y;for(E=u.length-1;E>=0;E--){L=u[E];if(L.nodeType===1&&L.getAttribute("_mce_type")){q=null;continue}if(L.nodeType===3||(!z.dom.isBlock(L)&&L.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(L.nodeName))){if(!q){if(L.nodeType!=3||/[^\s]/g.test(L.nodeValue)){if(N==-2&&B){if(!c){if(B.startContainer.nodeType==1&&(D=B.startContainer.childNodes[B.startOffset])&&D.nodeType==1){y=D.getAttribute("id");D.setAttribute("id","__mce")}else{if(x.dom.getParent(B.startContainer,function(n){return n===M})){G=B.startOffset;o=B.endOffset;N=z.find(M,0,B.startContainer);v=z.find(M,0,B.endContainer)}}}else{if(B.item){p=J.body.createTextRange();p.moveToElementText(B.item(0));B=p}p=J.body.createTextRange();p.moveToElementText(M);p.collapse(1);O=p.move("character",K)*-1;p=B.duplicate();p.collapse(1);F=p.move("character",K)*-1;p=B.duplicate();p.collapse(0);C=(p.move("character",K)*-1)-F;N=F-O;v=C}}q=x.dom.create(x.settings.forced_root_block);L.parentNode.replaceChild(q,L);q.appendChild(L)}}else{if(q.hasChildNodes()){q.insertBefore(L,q.firstChild)}else{q.appendChild(L)}}}else{q=null}}if(N!=-2){if(!c){q=M.getElementsByTagName(x.settings.element)[0];B=J.createRange();if(N!=-1){B.setStart(z.find(M,1,N),G)}else{B.setStart(q,0)}if(v!=-1){B.setEnd(z.find(M,1,v),o)}else{B.setEnd(q,0)}if(A){A.removeAllRanges();A.addRange(B)}}else{try{B=A.createRange();B.moveToElementText(M);B.collapse(1);B.moveStart("character",N);B.moveEnd("character",v);B.select()}catch(H){}}}else{if(!c&&(D=x.dom.get("__mce"))){if(y){D.setAttribute("id",y)}else{D.removeAttribute("id")}B=J.createRange();B.setStartBefore(D);B.setEndBefore(D);P.setRng(B)}}},getParentBlock:function(p){var o=this.dom;return o.getParent(p,o.isBlock)},insertPara:function(S){var G=this,x=G.editor,O=x.dom,T=x.getDoc(),X=x.settings,H=x.selection.getSel(),I=H.getRangeAt(0),W=T.body;var L,M,J,Q,P,u,p,v,A,o,E,V,q,z,K,N=O.getViewPort(x.getWin()),D,F,C;L=T.createRange();L.setStart(H.anchorNode,H.anchorOffset);L.collapse(d);M=T.createRange();M.setStart(H.focusNode,H.focusOffset);M.collapse(d);J=L.compareBoundaryPoints(L.START_TO_END,M)<0;Q=J?H.anchorNode:H.focusNode;P=J?H.anchorOffset:H.focusOffset;u=J?H.focusNode:H.anchorNode;p=J?H.focusOffset:H.anchorOffset;if(Q===u&&/^(TD|TH)$/.test(Q.nodeName)){if(Q.firstChild.nodeName=="BR"){O.remove(Q.firstChild)}if(Q.childNodes.length==0){x.dom.add(Q,X.element,null,"<br />");V=x.dom.add(Q,X.element,null,"<br />")}else{K=Q.innerHTML;Q.innerHTML="";x.dom.add(Q,X.element,null,K);V=x.dom.add(Q,X.element,null,"<br />")}I=T.createRange();I.selectNodeContents(V);I.collapse(1);x.selection.setRng(I);return h}if(Q==W&&u==W&&W.firstChild&&x.dom.isBlock(W.firstChild)){Q=u=Q.firstChild;P=p=0;L=T.createRange();L.setStart(Q,0);M=T.createRange();M.setStart(u,0)}Q=Q.nodeName=="HTML"?T.body:Q;Q=Q.nodeName=="BODY"?Q.firstChild:Q;u=u.nodeName=="HTML"?T.body:u;u=u.nodeName=="BODY"?u.firstChild:u;v=G.getParentBlock(Q);A=G.getParentBlock(u);o=v?v.nodeName:X.element;if(K=G.dom.getParent(v,"li,pre")){if(K.nodeName=="LI"){return e(x.selection,G.dom,K)}return d}if(v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(O.getStyle(v,"position",1)))){o=X.element;v=null}if(A&&(A.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(O.getStyle(v,"position",1)))){o=X.element;A=null}if(/(TD|TABLE|TH|CAPTION)/.test(o)||(v&&o=="DIV"&&/left|right/gi.test(O.getStyle(v,"float",1)))){o=X.element;v=A=null}E=(v&&v.nodeName==o)?v.cloneNode(0):x.dom.create(o);V=(A&&A.nodeName==o)?A.cloneNode(0):x.dom.create(o);V.removeAttribute("id");if(/^(H[1-6])$/.test(o)&&g(I,v)){V=x.dom.create(X.element)}K=q=Q;do{if(K==W||K.nodeType==9||G.dom.isBlock(K)||/(TD|TABLE|TH|CAPTION)/.test(K.nodeName)){break}q=K}while((K=K.previousSibling?K.previousSibling:K.parentNode));K=z=u;do{if(K==W||K.nodeType==9||G.dom.isBlock(K)||/(TD|TABLE|TH|CAPTION)/.test(K.nodeName)){break}z=K}while((K=K.nextSibling?K.nextSibling:K.parentNode));if(q.nodeName==o){L.setStart(q,0)}else{L.setStartBefore(q)}L.setEnd(Q,P);E.appendChild(L.cloneContents()||T.createTextNode(""));try{M.setEndAfter(z)}catch(R){}M.setStart(u,p);V.appendChild(M.cloneContents()||T.createTextNode(""));I=T.createRange();if(!q.previousSibling&&q.parentNode.nodeName==o){I.setStartBefore(q.parentNode)}else{if(L.startContainer.nodeName==o&&L.startOffset==0){I.setStartBefore(L.startContainer)}else{I.setStart(L.startContainer,L.startOffset)}}if(!z.nextSibling&&z.parentNode.nodeName==o){I.setEndAfter(z.parentNode)}else{I.setEnd(M.endContainer,M.endOffset)}I.deleteContents();if(b){x.getWin().scrollTo(0,N.y)}if(E.firstChild&&E.firstChild.nodeName==o){E.innerHTML=E.firstChild.innerHTML}if(V.firstChild&&V.firstChild.nodeName==o){V.innerHTML=V.firstChild.innerHTML}if(f(E)){E.innerHTML="<br />"}function U(y,s){var r=[],Z,Y,t;y.innerHTML="";if(X.keep_styles){Y=s;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(Y.nodeName)){Z=Y.cloneNode(h);O.setAttrib(Z,"id","");r.push(Z)}}while(Y=Y.parentNode)}if(r.length>0){for(t=r.length-1,Z=y;t>=0;t--){Z=Z.appendChild(r[t])}r[0].innerHTML=b?"&nbsp;":"<br />";return r[0]}else{y.innerHTML=b?"&nbsp;":"<br />"}}if(f(V)){C=U(V,u)}if(b&&parseFloat(opera.version())<9.5){I.insertNode(E);I.insertNode(V)}else{I.insertNode(V);I.insertNode(E)}V.normalize();E.normalize();function B(r){return T.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,h).nextNode()||r}I=T.createRange();I.selectNodeContents(a?B(C||V):C||V);I.collapse(1);H.removeAllRanges();H.addRange(I);D=x.dom.getPos(V).y;F=V.clientHeight;if(D<N.y||D+F>N.y+N.h){x.getWin().scrollTo(0,D<N.y?D:D-N.h+25)}return h},backspaceDelete:function(v,C){var D=this,u=D.editor,z=u.getBody(),s=u.dom,q,x=u.selection,p=x.getRng(),y=p.startContainer,q,A,B,o;if(!C&&p.collapsed&&y.nodeType==1&&p.startOffset==y.childNodes.length){o=new m.dom.TreeWalker(y.lastChild,y);for(q=y.lastChild;q;q=o.prev()){if(q.nodeType==3){p.setStart(q,q.nodeValue.length);p.collapse(true);x.setRng(p);return}}}if(y&&u.dom.isBlock(y)&&!/^(TD|TH)$/.test(y.nodeName)&&C){if(y.childNodes.length==0||(y.childNodes.length==1&&y.firstChild.nodeName=="BR")){q=y;while((q=q.previousSibling)&&!u.dom.isBlock(q)){}if(q){if(y!=z.firstChild){A=u.dom.doc.createTreeWalker(q,NodeFilter.SHOW_TEXT,null,h);while(B=A.nextNode()){q=B}p=u.getDoc().createRange();p.setStart(q,q.nodeValue?q.nodeValue.length:0);p.setEnd(q,q.nodeValue?q.nodeValue.length:0);x.setRng(p);u.dom.remove(y)}return k.cancel(v)}}}}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each,e=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new c.util.Dispatcher(h);h.onPostRender=new c.util.Dispatcher(h);h.prefix=j.prefix||f.id+"_";h._cls={};h.onPostRender.add(function(){d(h.controls,function(i){i.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(i){var h,g=this,f=g.editor;d(f.plugins,function(j){if(j.createControl){h=j.createControl(i,g);if(h){return false}}});switch(i){case"|":case"separator":return g.createSeparator()}if(!h&&f.buttons&&(h=f.buttons[i])){return g.createButton(i,h)}return g.add(h)},createDropMenu:function(f,n,h){var m=this,i=m.editor,j,g,k,l;n=e({"class":"mceDropDown",constrain:i.settings.constrain_menus},n);n["class"]=n["class"]+" "+i.getParam("skin")+"Skin";if(k=i.getParam("skin_variant")){n["class"]+=" "+i.getParam("skin")+"Skin"+k.substring(0,1).toUpperCase()+k.substring(1)}f=m.prefix+f;l=h||m._cls.dropmenu||c.ui.DropMenu;j=m.controls[f]=new l(f,n);j.onAddItem.add(function(r,q){var p=q.settings;p.title=i.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(o){if(p.cmd){i.execCommand(p.cmd,p.ui||false,p.value)}}}});i.onRemove.add(function(){j.destroy()});if(c.isIE){j.onShowMenu.add(function(){i.focus();g=i.selection.getBookmark(1)});j.onHideMenu.add(function(){if(g){i.selection.moveToBookmark(g);g=0}})}return m.add(j)},createListBox:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;if(g.settings.use_native_selects){k=new c.ui.NativeListBox(m,i)}else{f=l||h._cls.listbox||c.ui.ListBox;k=new f(m,i)}h.controls[m]=k;if(c.isWebKit){k.onPostRender.add(function(p,o){a.add(o,"mousedown",function(){g.bookmark=g.selection.getBookmark(1)});a.add(o,"focus",function(){g.selection.moveToBookmark(g.bookmark);g.bookmark=null})})}if(k.hideMenu){g.onMouseDown.add(k.hideMenu,k)}return h.add(k)},createButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.label=g.translate(i.label);i.scope=i.scope||g;if(!i.onclick&&!i.menu_button){i.onclick=function(){g.execCommand(i.cmd,i.ui||false,i.value)}}i=e({title:i.title,"class":"mce_"+m,unavailable_prefix:g.getLang("unavailable",""),scope:i.scope,control_manager:h},i);m=h.prefix+m;if(i.menu_button){f=l||h._cls.menubutton||c.ui.MenuButton;k=new f(m,i);g.onMouseDown.add(k.hideMenu,k)}else{f=h._cls.button||c.ui.Button;k=new f(m,i)}return h.add(k)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onclick){i.onclick=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;f=l||h._cls.splitbutton||c.ui.SplitButton;k=h.add(new f(m,i));g.onMouseDown.add(k.hideMenu,k);return k},createColorSplitButton:function(f,n,h){var l=this,j=l.editor,i,k,m,g;if(l.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onclick){n.onclick=function(o){if(c.isIE){g=j.selection.getBookmark(1)}j.execCommand(n.cmd,n.ui||false,o||n.value)}}if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,"class":"mce_"+f,menu_class:j.getParam("skin")+"Skin",scope:n.scope,more_colors_title:j.getLang("more_colors")},n);f=l.prefix+f;m=h||l._cls.colorsplitbutton||c.ui.ColorSplitButton;k=new m(f,n);j.onMouseDown.add(k.hideMenu,k);j.onRemove.add(function(){k.destroy()});if(c.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return l.add(k)},createToolbar:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||g._cls.toolbar||c.ui.Toolbar;i=new f(k,h);if(g.get(k)){return null}return g.add(i)},createSeparator:function(g){var f=g||this._cls.separator||c.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(d){var a=d.util.Dispatcher,e=d.each,c=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(z,h){var v=this,k="",n,m,i=v.editor.settings.dialog_type=="modal",q,o,j,g=d.DOM.getViewPort(),r;z=z||{};h=h||{};o=b?g.w:screen.width;j=b?g.h:screen.height;z.name=z.name||"mc_"+new Date().getTime();z.width=parseInt(z.width||320);z.height=parseInt(z.height||240);z.resizable=true;z.left=z.left||parseInt(o/2)-(z.width/2);z.top=z.top||parseInt(j/2)-(z.height/2);h.inline=false;h.mce_width=z.width;h.mce_height=z.height;h.mce_auto_focus=z.auto_focus;if(i){if(c){z.center=true;z.help=false;z.dialogWidth=z.width+"px";z.dialogHeight=z.height+"px";z.scroll=z.scrollbars||false}}e(z,function(p,f){if(d.is(p,"boolean")){p=p?"yes":"no"}if(!/^(name|url)$/.test(f)){if(c&&i){k+=(k?";":"")+f+":"+p}else{k+=(k?",":"")+f+"="+p}}});v.features=z;v.params=h;v.onOpen.dispatch(v,z,h);r=z.url||z.file;r=d._addVer(r);try{if(c&&i){q=1;window.showModalDialog(r,window,k)}else{q=window.open(r,z.name,k)}}catch(l){}if(!q){alert(v.editor.getLang("popup_blocked"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=d.resolve(i);return new j(h,g,m,l,k)},confirm:function(h,f,i,g){g=g||window;f.call(i||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,j,g){var i=this;g=g||window;g.alert(i._decode(i.editor.getLang(h,h)));if(f){f.call(j||i)}},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return d.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce));(function(a){function b(){var d={},c={},e={};function f(j,i,h,g){if(typeof(i)=="string"){i=[i]}a.each(i,function(k){j[k.toLowerCase()]={func:h,scope:g}})}a.extend(this,{add:function(i,h,g){f(d,i,h,g)},addQueryStateHandler:function(i,h,g){f(c,i,h,g)},addQueryValueHandler:function(i,h,g){f(e,i,h,g)},execCommand:function(h,k,j,i,g){if(k=d[k.toLowerCase()]){if(k.func.call(h||k.scope,j,i,g)!==false){return true}}},queryCommandValue:function(){if(cmd=e[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}},queryCommandState:function(){if(cmd=c[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}}})}a.GlobalCommands=new b()})(tinymce);(function(a){a.Formatter=function(T){var K={},M=a.each,c=T.dom,p=T.selection,s=a.dom.TreeWalker,I=new a.dom.RangeUtils(c),d=T.schema.isValid,E=c.isBlock,k=T.settings.forced_root_block,r=c.nodeIndex,D="\uFEFF",e=/^(src|href|style)$/,Q=false,A=true,o,N={apply:[],remove:[]};function y(U){return U instanceof Array}function l(V,U){return c.getParents(V,U,c.getRoot())}function b(U){return U.nodeType===1&&(U.face==="mceinline"||U.style.fontFamily==="mceinline")}function P(U){return U?K[U]:K}function j(U,V){if(U){if(typeof(U)!=="string"){M(U,function(X,W){j(W,X)})}else{V=V.length?V:[V];M(V,function(W){if(W.deep===o){W.deep=!W.selector}if(W.split===o){W.split=!W.selector||W.inline}if(W.remove===o&&W.selector&&!W.inline){W.remove="none"}if(W.selector&&W.inline){W.mixed=true;W.block_expand=true}if(typeof(W.classes)==="string"){W.classes=W.classes.split(/\s+/)}});K[U]=V}}}function R(W,ac,Y){var Z=P(W),ad=Z[0],ab,V,aa;function X(ag){var af=ag.startContainer,aj=ag.startOffset,ai,ah;if(af.nodeType==1||af.nodeValue===""){af=af.nodeType==1?af.childNodes[aj]:af;if(af){ai=new s(af,af.parentNode);for(ah=ai.current();ah;ah=ai.next()){if(ah.nodeType==3&&!f(ah)){ag.setStart(ah,0);break}}}}return ag}function U(ag,af){af=af||ad;if(ag){M(af.styles,function(ai,ah){c.setStyle(ag,ah,q(ai,ac))});M(af.attributes,function(ai,ah){c.setAttrib(ag,ah,q(ai,ac))});M(af.classes,function(ah){ah=q(ah,ac);if(!c.hasClass(ag,ah)){c.addClass(ag,ah)}})}}function ae(ag){var af=[],ai,ah;ai=ad.inline||ad.block;ah=c.create(ai);U(ah);I.walk(ag,function(aj){var ak;function al(am){var ap=am.nodeName.toLowerCase(),ao=am.parentNode.nodeName.toLowerCase(),an;if(g(ap,"br")){ak=0;if(ad.block){c.remove(am)}return}if(ad.wrapper&&v(am,W,ac)){ak=0;return}if(ad.block&&!ad.wrapper&&F(ap)){am=c.rename(am,ai);U(am);af.push(am);ak=0;return}if(ad.selector){M(Z,function(aq){if(c.is(am,aq.selector)&&!b(am)){U(am,aq);an=true}});if(!ad.inline||an){ak=0;return}}if(d(ai,ap)&&d(ao,ai)){if(!ak){ak=ah.cloneNode(Q);am.parentNode.insertBefore(ak,am);af.push(ak)}ak.appendChild(am)}else{ak=0;M(a.grep(am.childNodes),al);ak=0}}M(aj,al)});M(af,function(al){var aj;function am(ao){var an=0;M(ao.childNodes,function(ap){if(!f(ap)&&!G(ap)){an++}});return an}function ak(an){var ap,ao;M(an.childNodes,function(aq){if(aq.nodeType==1&&!G(aq)&&!b(aq)){ap=aq;return Q}});if(ap&&h(ap,ad)){ao=ap.cloneNode(Q);U(ao);c.replace(ao,an,A);c.remove(ap,1)}return ao||an}aj=am(al);if(aj===0){c.remove(al,1);return}if(ad.inline||ad.wrapper){if(!ad.exact&&aj===1){al=ak(al)}M(Z,function(an){M(c.select(an.inline,al),function(ao){S(an,ac,ao,an.exact?ao:null)})});if(v(al.parentNode,W,ac)){c.remove(al,1);al=0;return A}if(ad.merge_with_parents){c.getParent(al.parentNode,function(an){if(v(an,W,ac)){c.remove(al,1);al=0;return A}})}if(al){al=t(B(al),al);al=t(al,B(al,A))}}})}if(ad){if(Y){V=c.createRng();V.setStartBefore(Y);V.setEndAfter(Y);ae(n(V,Z))}else{if(!p.isCollapsed()||!ad.inline){ab=p.getBookmark();ae(n(p.getRng(A),Z));p.moveToBookmark(ab);p.setRng(X(p.getRng(A)));T.nodeChanged()}else{O("apply",W,ac)}}}}function z(W,af,Z){var aa=P(W),ah=aa[0],ae,ad,V;function Y(ak){var aj=ak.startContainer,ap=ak.startOffset,ao,an,al,am;if(aj.nodeType==3&&ap>=aj.nodeValue.length-1){aj=aj.parentNode;ap=r(aj)+1}if(aj.nodeType==1){al=aj.childNodes;aj=al[Math.min(ap,al.length-1)];ao=new s(aj);if(ap>al.length-1){ao.next()}for(an=ao.current();an;an=ao.next()){if(an.nodeType==3&&!f(an)){am=c.create("a",null,D);an.parentNode.insertBefore(am,an);ak.setStart(an,0);p.setRng(ak);c.remove(am);return}}}}function X(am){var al,ak,aj;al=a.grep(am.childNodes);for(ak=0,aj=aa.length;ak<aj;ak++){if(S(aa[ak],af,am,am)){break}}if(ah.deep){for(ak=0,aj=al.length;ak<aj;ak++){X(al[ak])}}}function ab(aj){var ak;M(l(aj.parentNode).reverse(),function(al){var am;if(!ak&&al.id!="_start"&&al.id!="_end"){am=v(al,W,af);if(am&&am.split!==false){ak=al}}});return ak}function U(am,aj,ao,ar){var at,aq,ap,al,an,ak;if(am){ak=am.parentNode;for(at=aj.parentNode;at&&at!=ak;at=at.parentNode){aq=at.cloneNode(Q);for(an=0;an<aa.length;an++){if(S(aa[an],af,aq,aq)){aq=0;break}}if(aq){if(ap){aq.appendChild(ap)}if(!al){al=aq}ap=aq}}if(ar&&(!ah.mixed||!E(am))){aj=c.split(am,aj)}if(ap){ao.parentNode.insertBefore(ap,ao);al.appendChild(ao)}}return aj}function ag(aj){return U(ab(aj),aj,aj,true)}function ac(al){var ak=c.get(al?"_start":"_end"),aj=ak[al?"firstChild":"lastChild"];if(G(aj)){aj=aj[al?"firstChild":"lastChild"]}c.remove(ak,true);return aj}function ai(aj){var ak,al;aj=n(aj,aa,A);if(ah.split){ak=H(aj,A);al=H(aj);if(ak!=al){ak=L(ak,"span",{id:"_start",_mce_type:"bookmark"});al=L(al,"span",{id:"_end",_mce_type:"bookmark"});ag(ak);ag(al);ak=ac(A);al=ac()}else{ak=al=ag(ak)}aj.startContainer=ak.parentNode;aj.startOffset=r(ak);aj.endContainer=al.parentNode;aj.endOffset=r(al)+1}I.walk(aj,function(am){M(am,function(an){X(an)})})}if(Z){V=c.createRng();V.setStartBefore(Z);V.setEndAfter(Z);ai(V);return}if(!p.isCollapsed()||!ah.inline){ae=p.getBookmark();ai(p.getRng(A));p.moveToBookmark(ae);if(i(W,af,p.getStart())){Y(p.getRng(true))}T.nodeChanged()}else{O("remove",W,af)}}function C(U,W,V){if(i(U,W,V)){z(U,W,V)}else{R(U,W,V)}}function v(V,U,aa,Y){var W=P(U),ab,Z,X;function ac(ag,ai,aj){var af,ah,ad=ai[aj],ae;if(ad){if(ad.length===o){for(af in ad){if(ad.hasOwnProperty(af)){if(aj==="attributes"){ah=c.getAttrib(ag,af)}else{ah=J(ag,af)}if(Y&&!ah&&!ai.exact){return}if((!Y||ai.exact)&&!g(ah,q(ad[af],aa))){return}}}}else{for(ae=0;ae<ad.length;ae++){if(aj==="attributes"?c.getAttrib(ag,ad[ae]):J(ag,ad[ae])){return ai}}}}return ai}if(W&&V){for(Z=0;Z<W.length;Z++){ab=W[Z];if(h(V,ab)&&ac(V,ab,"attributes")&&ac(V,ab,"styles")){if(X=ab.classes){for(Z=0;Z<X.length;Z++){if(!c.hasClass(V,X[Z])){return}}}return ab}}}}function i(W,Z,Y){var V,X;function U(aa){aa=c.getParent(aa,function(ab){return !!v(ab,W,Z,true)});return v(aa,W,Z)}if(Y){return U(Y)}if(p.isCollapsed()){for(X=N.apply.length-1;X>=0;X--){if(N.apply[X].name==W){return true}}for(X=N.remove.length-1;X>=0;X--){if(N.remove[X].name==W){return false}}return U(p.getNode())}Y=p.getNode();if(U(Y)){return A}V=p.getStart();if(V!=Y){if(U(V)){return A}}return Q}function u(ab,aa){var Y,Z=[],X={},W,V,U;if(p.isCollapsed()){for(V=0;V<ab.length;V++){for(W=N.remove.length-1;W>=0;W--){U=ab[V];if(N.remove[W].name==U){X[U]=true;break}}}for(W=N.apply.length-1;W>=0;W--){for(V=0;V<ab.length;V++){U=ab[V];if(!X[U]&&N.apply[W].name==U){X[U]=true;Z.push(U)}}}}Y=p.getStart();c.getParent(Y,function(ae){var ad,ac;for(ad=0;ad<ab.length;ad++){ac=ab[ad];if(!X[ac]&&v(ae,ac,aa)){X[ac]=true;Z.push(ac)}}});return Z}function x(Y){var aa=P(Y),X,W,Z,V,U;if(aa){X=p.getStart();W=l(X);for(V=aa.length-1;V>=0;V--){U=aa[V].selector;if(!U){return A}for(Z=W.length-1;Z>=0;Z--){if(c.is(W[Z],U)){return A}}}}return Q}a.extend(this,{get:P,register:j,apply:R,remove:z,toggle:C,match:i,matchAll:u,matchNode:v,canApply:x});function h(U,V){if(g(U,V.inline)){return A}if(g(U,V.block)){return A}if(V.selector){return c.is(U,V.selector)}}function g(V,U){V=V||"";U=U||"";V=""+(V.nodeName||V);U=""+(U.nodeName||U);return V.toLowerCase()==U.toLowerCase()}function J(V,U){var W=c.getStyle(V,U);if(U=="color"||U=="backgroundColor"){W=c.toHex(W)}if(U=="fontWeight"&&W==700){W="bold"}return""+W}function q(U,V){if(typeof(U)!="string"){U=U(V)}else{if(V){U=U.replace(/%(\w+)/g,function(X,W){return V[W]||X})}}return U}function f(U){return U&&U.nodeType===3&&/^([\s\r\n]+|)$/.test(U.nodeValue)}function L(W,V,U){var X=c.create(V,U);W.parentNode.insertBefore(X,W);X.appendChild(W);return X}function n(U,ac,X){var W=U.startContainer,Z=U.startOffset,af=U.endContainer,aa=U.endOffset,ae,ab;function ad(ai,aj,ag,ah){var ak,al;ah=ah||c.getRoot();for(;;){ak=ai.parentNode;if(ak==ah||(!ac[0].block_expand&&E(ak))){return ai}for(ae=ak[aj];ae&&ae!=ai;ae=ae[ag]){if(ae.nodeType==1&&!G(ae)){return ai}if(ae.nodeType==3&&!f(ae)){return ai}}ai=ai.parentNode}return ai}if(W.nodeType==1&&W.hasChildNodes()){ab=W.childNodes.length-1;W=W.childNodes[Z>ab?ab:Z];if(W.nodeType==3){Z=0}}if(af.nodeType==1&&af.hasChildNodes()){ab=af.childNodes.length-1;af=af.childNodes[aa>ab?ab:aa-1];if(af.nodeType==3){aa=af.nodeValue.length}}if(G(W.parentNode)){W=W.parentNode}if(G(W)){W=W.nextSibling||W}if(G(af.parentNode)){af=af.parentNode}if(G(af)){af=af.previousSibling||af}if(ac[0].inline||ac[0].block_expand){W=ad(W,"firstChild","nextSibling");af=ad(af,"lastChild","previousSibling")}if(ac[0].selector&&ac[0].expand!==Q&&!ac[0].inline){function Y(ah,ag){var ai,aj,ak;if(ah.nodeType==3&&ah.nodeValue.length==0&&ah[ag]){ah=ah[ag]}ai=l(ah);for(aj=0;aj<ai.length;aj++){for(ak=0;ak<ac.length;ak++){if(c.is(ai[aj],ac[ak].selector)){return ai[aj]}}}return ah}W=Y(W,"previousSibling");af=Y(af,"nextSibling")}if(ac[0].block||ac[0].selector){function V(ah,ag,aj){var ai;if(!ac[0].wrapper){ai=c.getParent(ah,ac[0].block)}if(!ai){ai=c.getParent(ah.nodeType==3?ah.parentNode:ah,E)}if(ai&&ac[0].wrapper){ai=l(ai,"ul,ol").reverse()[0]||ai}if(!ai){ai=ah;while(ai[ag]&&!E(ai[ag])){ai=ai[ag];if(g(ai,"br")){break}}}return ai||ah}W=V(W,"previousSibling");af=V(af,"nextSibling");if(ac[0].block){if(!E(W)){W=ad(W,"firstChild","nextSibling")}if(!E(af)){af=ad(af,"lastChild","previousSibling")}}}if(W.nodeType==1){Z=r(W);W=W.parentNode}if(af.nodeType==1){aa=r(af)+1;af=af.parentNode}return{startContainer:W,startOffset:Z,endContainer:af,endOffset:aa}}function S(aa,Z,X,U){var W,V,Y;if(!h(X,aa)){return Q}if(aa.remove!="all"){M(aa.styles,function(ac,ab){ac=q(ac,Z);if(typeof(ab)==="number"){ab=ac;U=0}if(!U||g(J(U,ab),ac)){c.setStyle(X,ab,"")}Y=1});if(Y&&c.getAttrib(X,"style")==""){X.removeAttribute("style");X.removeAttribute("_mce_style")}M(aa.attributes,function(ad,ab){var ac;ad=q(ad,Z);if(typeof(ab)==="number"){ab=ad;U=0}if(!U||g(c.getAttrib(U,ab),ad)){if(ab=="class"){ad=c.getAttrib(X,ab);if(ad){ac="";M(ad.split(/\s+/),function(ae){if(/mce\w+/.test(ae)){ac+=(ac?" ":"")+ae}});if(ac){c.setAttrib(X,ab,ac);return}}}if(ab=="class"){X.removeAttribute("className")}if(e.test(ab)){X.removeAttribute("_mce_"+ab)}X.removeAttribute(ab)}});M(aa.classes,function(ab){ab=q(ab,Z);if(!U||c.hasClass(U,ab)){c.removeClass(X,ab)}});V=c.getAttribs(X);for(W=0;W<V.length;W++){if(V[W].nodeName.indexOf("_")!==0){return Q}}}if(aa.remove!="none"){m(X,aa);return A}}function m(W,X){var U=W.parentNode,V;if(X.block){if(!k){function Y(aa,Z,ab){aa=B(aa,Z,ab);return !aa||(aa.nodeName=="BR"||E(aa))}if(E(W)&&!E(U)){if(!Y(W,Q)&&!Y(W.firstChild,A,1)){W.insertBefore(c.create("br"),W.firstChild)}if(!Y(W,A)&&!Y(W.lastChild,Q,1)){W.appendChild(c.create("br"))}}}else{if(U==c.getRoot()){if(!X.list_block||!g(W,X.list_block)){M(a.grep(W.childNodes),function(Z){if(d(k,Z.nodeName.toLowerCase())){if(!V){V=L(Z,k)}else{V.appendChild(Z)}}else{V=0}})}}}}if(X.selector&&X.inline&&!g(X.inline,W)){return}c.remove(W,1)}function B(V,U,W){if(V){U=U?"nextSibling":"previousSibling";for(V=W?V:V[U];V;V=V[U]){if(V.nodeType==1||!f(V)){return V}}}}function G(U){return U&&U.nodeType==1&&U.getAttribute("_mce_type")=="bookmark"}function t(Y,X){var U,W,V;function aa(ad,ac){if(ad.nodeName!=ac.nodeName){return Q}function ab(af){var ag={};M(c.getAttribs(af),function(ah){var ai=ah.nodeName.toLowerCase();if(ai.indexOf("_")!==0&&ai!=="style"){ag[ai]=c.getAttrib(af,ai)}});return ag}function ae(ai,ah){var ag,af;for(af in ai){if(ai.hasOwnProperty(af)){ag=ah[af];if(ag===o){return Q}if(ai[af]!=ag){return Q}delete ah[af]}}for(af in ah){if(ah.hasOwnProperty(af)){return Q}}return A}if(!ae(ab(ad),ab(ac))){return Q}if(!ae(c.parseStyle(c.getAttrib(ad,"style")),c.parseStyle(c.getAttrib(ac,"style")))){return Q}return A}if(Y&&X){function Z(ac,ab){for(W=ac;W;W=W[ab]){if(W.nodeType==3&&!f(W)){return ac}if(W.nodeType==1&&!G(W)){return W}}return ac}Y=Z(Y,"previousSibling");X=Z(X,"nextSibling");if(aa(Y,X)){for(W=Y.nextSibling;W&&W!=X;){V=W;W=W.nextSibling;Y.appendChild(V)}c.remove(X);M(a.grep(X.childNodes),function(ab){Y.appendChild(ab)});return Y}}return X}function F(U){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(U)}function H(V,Y){var U,X,W;U=V[Y?"startContainer":"endContainer"];X=V[Y?"startOffset":"endOffset"];if(U.nodeType==1){W=U.childNodes.length-1;if(!Y&&X){X--}U=U.childNodes[X>W?W:X]}return U}function O(Z,V,Y){var W,U=N[Z],aa=N[Z=="apply"?"remove":"apply"];function ab(){return N.apply.length||N.remove.length}function X(){N.apply=[];N.remove=[]}function ac(ad){M(N.apply.reverse(),function(ae){R(ae.name,ae.vars,ad)});M(N.remove.reverse(),function(ae){z(ae.name,ae.vars,ad)});c.remove(ad,1);X()}for(W=U.length-1;W>=0;W--){if(U[W].name==V){return}}U.push({name:V,vars:Y});for(W=aa.length-1;W>=0;W--){if(aa[W].name==V){aa.splice(W,1)}}if(ab()){T.getDoc().execCommand("FontName",false,"mceinline");N.lastRng=p.getRng();M(c.select("font,span"),function(ae){var ad;if(b(ae)){ad=p.getBookmark();ac(ae);p.moveToBookmark(ad);T.nodeChanged()}});if(!N.isListening&&ab()){N.isListening=true;M("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(ad){T[ad].addToTop(function(ae,af){if(ab()&&!a.dom.RangeUtils.compareRanges(N.lastRng,p.getRng())){M(c.select("font,span"),function(ah){var ai,ag;if(b(ah)){ai=ah.firstChild;if(ai){ac(ah);ag=c.createRng();ag.setStart(ai,ai.nodeValue.length);ag.setEnd(ai,ai.nodeValue.length);p.setRng(ag);ae.nodeChanged()}else{c.remove(ah)}}});if(af.type=="keyup"||af.type=="mouseup"){X()}}})})}}}}})(tinymce);tinymce.onAddEditor.add(function(e,a){var d,h,g,c=a.settings;if(c.inline_styles){h=e.explode(c.font_size_style_values);function b(j,i){g.replace(g.create("span",{style:i}),j,1)}d={font:function(j,i){b(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:h[parseInt(i.size)-1]})},u:function(j,i){b(i,{textDecoration:"underline"})},strike:function(j,i){b(i,{textDecoration:"line-through"})}};function f(i,j){g=i.dom;if(c.convert_fonts_to_spans){e.each(g.select("font,u,strike",j.node),function(k){d[k.nodeName.toLowerCase()](a.dom,k)})}}a.onPreProcess.add(f);a.onInit.add(function(){a.selection.onSetContent.add(f)})}});tinyMCE.addI18n({en:{
common:{
edit_confirm:"Do you want to use the WYSIWYG mode for this textarea?",
apply:"Apply",
insert:"Insert",
update:"Update",
cancel:"Cancel",
close:"Close",
browse:"Browse",
class_name:"Class",
not_set:"-- Not set --",
clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",
clipboard_no_support:"Currently not supported by your browser, use keyboard shortcuts instead.",
popup_blocked:"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.",
invalid_data:"Error: Invalid values entered, these are marked in red.",
more_colors:"More colors"
},
contextmenu:{
align:"Alignment",
left:"Left",
center:"Center",
right:"Right",
full:"Full"
},
insertdatetime:{
date_fmt:"%Y-%m-%d",
time_fmt:"%H:%M:%S",
insertdate_desc:"Insert date",
inserttime_desc:"Insert time",
months_long:"January,February,March,April,May,June,July,August,September,October,November,December",
months_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",
day_long:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday",
day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun"
},
print:{
print_desc:"Print"
},
preview:{
preview_desc:"Preview"
},
directionality:{
ltr_desc:"Direction left to right",
rtl_desc:"Direction right to left"
},
layer:{
insertlayer_desc:"Insert new layer",
forward_desc:"Move forward",
backward_desc:"Move backward",
absolute_desc:"Toggle absolute positioning",
content:"New layer..."
},
save:{
save_desc:"Save",
cancel_desc:"Cancel all changes"
},
nonbreaking:{
nonbreaking_desc:"Insert non-breaking space character"
},
iespell:{
iespell_desc:"Run spell checking",
download:"ieSpell not detected. Do you want to install it now?"
},
advhr:{
advhr_desc:"Horizontal rule"
},
emotions:{
emotions_desc:"Emotions"
},
searchreplace:{
search_desc:"Find",
replace_desc:"Find/Replace"
},
advimage:{
image_desc:"Insert/edit image"
},
advlink:{
link_desc:"Insert/edit link"
},
xhtmlxtras:{
cite_desc:"Citation",
abbr_desc:"Abbreviation",
acronym_desc:"Acronym",
del_desc:"Deletion",
ins_desc:"Insertion",
attribs_desc:"Insert/Edit Attributes"
},
style:{
desc:"Edit CSS Style"
},
paste:{
paste_text_desc:"Paste as Plain Text",
paste_word_desc:"Paste from Word",
selectall_desc:"Select All",
plaintext_mode_sticky:"Paste is now in plain text mode. Click again to toggle back to regular paste mode. After you paste something you will be returned to regular paste mode.",
plaintext_mode:"Paste is now in plain text mode. Click again to toggle back to regular paste mode."
},
paste_dlg:{
text_title:"Use CTRL+V on your keyboard to paste the text into the window.",
text_linebreaks:"Keep linebreaks",
word_title:"Use CTRL+V on your keyboard to paste the text into the window."
},
table:{
desc:"Inserts a new table",
row_before_desc:"Insert row before",
row_after_desc:"Insert row after",
delete_row_desc:"Delete row",
col_before_desc:"Insert column before",
col_after_desc:"Insert column after",
delete_col_desc:"Remove column",
split_cells_desc:"Split merged table cells",
merge_cells_desc:"Merge table cells",
row_desc:"Table row properties",
cell_desc:"Table cell properties",
props_desc:"Table properties",
paste_row_before_desc:"Paste table row before",
paste_row_after_desc:"Paste table row after",
cut_row_desc:"Cut table row",
copy_row_desc:"Copy table row",
del:"Delete table",
row:"Row",
col:"Column",
cell:"Cell"
},
autosave:{
unload_msg:"The changes you made will be lost if you navigate away from this page.",
restore_content:"Restore auto-saved content.",
warning_message:"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?."
},
fullscreen:{
desc:"Toggle fullscreen mode"
},
media:{
desc:"Insert / edit embedded media",
edit:"Edit embedded media"
},
fullpage:{
desc:"Document properties"
},
template:{
desc:"Insert predefined template content"
},
visualchars:{
desc:"Visual control characters on/off."
},
spellchecker:{
desc:"Toggle spellchecker",
menu:"Spellchecker settings",
ignore_word:"Ignore word",
ignore_words:"Ignore all",
langs:"Languages",
wait:"Please wait...",
sug:"Suggestions",
no_sug:"No suggestions",
no_mpell:"No misspellings found."
},
pagebreak:{
desc:"Insert page break."
},
advlist:{
types:"Types",
def:"Default",
lower_alpha:"Lower alpha",
lower_greek:"Lower greek",
lower_roman:"Lower roman",
upper_alpha:"Upper alpha",
upper_roman:"Upper roman",
circle:"Circle",
disc:"Disc",
square:"Square"
}}});(function(e){var d=e.DOM,b=e.dom.Event,h=e.extend,f=e.each,a=e.util.Cookie,g,c=e.explode;e.ThemeManager.requireLangPack("advanced");e.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(j,k){var l=this,m,i,n;l.editor=j;l.url=k;l.onResolveName=new e.util.Dispatcher(this);l.settings=m=h({theme_advanced_path:true,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",readonly:j.settings.readonly},j.settings);if(!m.font_size_style_values){m.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"}if(e.is(m.theme_advanced_font_sizes,"string")){m.font_size_style_values=e.explode(m.font_size_style_values);m.font_size_classes=e.explode(m.font_size_classes||"");n={};j.settings.theme_advanced_font_sizes=m.theme_advanced_font_sizes;f(j.getParam("theme_advanced_font_sizes","","hash"),function(q,p){var o;if(p==q&&q>=1&&q<=7){p=q+" ("+l.sizes[q-1]+"pt)";o=m.font_size_classes[q-1];q=m.font_size_style_values[q-1]||(l.sizes[q-1]+"pt")}if(/^\s*\./.test(q)){o=q.replace(/\./g,"")}n[p]=o?{"class":o}:{fontSize:q}});m.theme_advanced_font_sizes=n}if((i=m.theme_advanced_path_location)&&i!="none"){m.theme_advanced_statusbar_location=m.theme_advanced_path_location}if(m.theme_advanced_statusbar_location=="none"){m.theme_advanced_statusbar_location=0}j.onInit.add(function(){if(!j.settings.readonly){j.onNodeChange.add(l._nodeChanged,l)}if(j.settings.content_css!==false){j.dom.loadCSS(j.baseURI.toAbsolute("themes/advanced/skins/"+j.settings.skin+"/content.css"))}});j.onSetProgressState.add(function(q,o,r){var s,t=q.id,p;if(o){l.progressTimer=setTimeout(function(){s=q.getContainer();s=s.insertBefore(d.create("DIV",{style:"position:relative"}),s.firstChild);p=d.get(q.id+"_tbl");d.add(s,"div",{id:t+"_blocker","class":"mceBlocker",style:{width:p.clientWidth+2,height:p.clientHeight+2}});d.add(s,"div",{id:t+"_progress","class":"mceProgress",style:{left:p.clientWidth/2,top:p.clientHeight/2}})},r||0)}else{d.remove(t+"_blocker");d.remove(t+"_progress");clearTimeout(l.progressTimer)}});d.loadCSS(m.editor_css?j.documentBaseURI.toAbsolute(m.editor_css):k+"/skins/"+j.settings.skin+"/ui.css");if(m.skin_variant){d.loadCSS(k+"/skins/"+j.settings.skin+"/ui_"+m.skin_variant+".css")}},createControl:function(l,i){var j,k;if(k=i.createControl(l)){return k}switch(l){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if((j=this.controls[l])){return i.createButton(l,{title:"advanced."+j[0],cmd:j[1],ui:j[2],value:j[3]})}},execCommand:function(k,j,l){var i=this["_"+k];if(i){i.call(this,j,l);return true}return false},_importClasses:function(k){var i=this.editor,j=i.controlManager.get("styleselect");if(j.getLength()==0){f(i.dom.getClasses(),function(n,l){var m="style_"+l;i.formatter.register(m,{inline:"span",attributes:{"class":n["class"]},selector:"*"});j.add(n["class"],m)})}},_createStyleSelect:function(m){var k=this,i=k.editor,j=i.controlManager,l;l=j.createListBox("styleselect",{title:"advanced.style_select",onselect:function(o){var p,n=[];f(l.items,function(q){n.push(q.value)});i.focus();i.undoManager.add();p=i.formatter.matchAll(n);if(!o||p[0]==o){i.formatter.remove(p[0])}else{i.formatter.apply(o)}i.undoManager.add();i.nodeChanged();return false}});i.onInit.add(function(){var o=0,n=i.getParam("style_formats");if(n){f(n,function(p){var q,r=0;f(p,function(){r++});if(r>1){q=p.name=p.name||"style_"+(o++);i.formatter.register(q,p);l.add(p.title,q)}else{l.add(p.title)}})}else{f(i.getParam("theme_advanced_styles","","hash"),function(r,q){var p;if(r){p="style_"+(o++);i.formatter.register(p,{inline:"span",classes:r,selector:"*"});l.add(k.editor.translate(q),p)}})}});if(l.getLength()==0){l.onPostRender.add(function(o,p){if(!l.NativeListBox){b.add(p.id+"_text","focus",k._importClasses,k);b.add(p.id+"_text","mousedown",k._importClasses,k);b.add(p.id+"_open","focus",k._importClasses,k);b.add(p.id+"_open","mousedown",k._importClasses,k)}else{b.add(p.id,"focus",k._importClasses,k)}})}return l},_createFontSelect:function(){var k,j=this,i=j.editor;k=i.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(l){var m=k.items[k.selectedIndex];if(!l&&m){i.execCommand("FontName",false,m.value);return}i.execCommand("FontName",false,l);k.select(function(n){return l==n});return false}});if(k){f(i.getParam("theme_advanced_fonts",j.settings.theme_advanced_fonts,"hash"),function(m,l){k.add(i.translate(l),m,{style:m.indexOf("dings")==-1?"font-family:"+m:""})})}return k},_createFontSizeSelect:function(){var m=this,k=m.editor,n,l=0,j=[];n=k.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(i){var o=n.items[n.selectedIndex];if(!i&&o){o=o.value;if(o["class"]){k.formatter.toggle("fontsize_class",{value:o["class"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand("FontSize",false,o.fontSize)}return}if(i["class"]){k.focus();k.undoManager.add();k.formatter.toggle("fontsize_class",{value:i["class"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand("FontSize",false,i.fontSize)}n.select(function(p){return i==p});return false}});if(n){f(m.settings.theme_advanced_font_sizes,function(o,i){var p=o.fontSize;if(p>=1&&p<=7){p=m.sizes[parseInt(p)-1]+"pt"}n.add(i,o,{style:"font-size:"+p,"class":"mceFontSize"+(l++)+(" "+(o["class"]||""))})})}return n},_createBlockFormats:function(){var k,i={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},j=this;k=j.editor.controlManager.createListBox("formatselect",{title:"advanced.block",cmd:"FormatBlock"});if(k){f(j.editor.getParam("theme_advanced_blockformats",j.settings.theme_advanced_blockformats,"hash"),function(m,l){k.add(j.editor.translate(l!=m?l:i[m]),m,{"class":"mce_formatPreview mce_"+m})})}return k},_createForeColorMenu:function(){var m,j=this,k=j.settings,l={},i;if(k.theme_advanced_more_colors){l.more_colors_func=function(){j._mceColorPicker(0,{color:m.value,func:function(n){m.setColor(n)}})}}if(i=k.theme_advanced_text_colors){l.colors=i}if(k.theme_advanced_default_foreground_color){l.default_color=k.theme_advanced_default_foreground_color}l.title="advanced.forecolor_desc";l.cmd="ForeColor";l.scope=this;m=j.editor.controlManager.createColorSplitButton("forecolor",l);return m},_createBackColorMenu:function(){var m,j=this,k=j.settings,l={},i;if(k.theme_advanced_more_colors){l.more_colors_func=function(){j._mceColorPicker(0,{color:m.value,func:function(n){m.setColor(n)}})}}if(i=k.theme_advanced_background_colors){l.colors=i}if(k.theme_advanced_default_background_color){l.default_color=k.theme_advanced_default_background_color}l.title="advanced.backcolor_desc";l.cmd="HiliteColor";l.scope=this;m=j.editor.controlManager.createColorSplitButton("backcolor",l);return m},renderUI:function(k){var m,l,q,v=this,r=v.editor,w=v.settings,u,j,i;m=j=d.create("span",{id:r.id+"_parent","class":"mceEditor "+r.settings.skin+"Skin"+(w.skin_variant?" "+r.settings.skin+"Skin"+v._ufirst(w.skin_variant):"")});if(!d.boxModel){m=d.add(m,"div",{"class":"mceOldBoxModel"})}m=u=d.add(m,"table",{id:r.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});m=q=d.add(m,"tbody");switch((w.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":l=v._rowLayout(w,q,k);break;case"customlayout":l=r.execCallback("theme_advanced_custom_layout",w,q,k,j);break;default:l=v._simpleLayout(w,q,k,j)}m=k.targetNode;i=d.stdMode?u.getElementsByTagName("tr"):u.rows;d.addClass(i[0],"mceFirst");d.addClass(i[i.length-1],"mceLast");f(d.select("tr",q),function(o){d.addClass(o.firstChild,"mceFirst");d.addClass(o.childNodes[o.childNodes.length-1],"mceLast")});if(d.get(w.theme_advanced_toolbar_container)){d.get(w.theme_advanced_toolbar_container).appendChild(j)}else{d.insertAfter(j,m)}b.add(r.id+"_path_row","click",function(n){n=n.target;if(n.nodeName=="A"){v._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return b.cancel(n)}});if(!r.getParam("accessibility_focus")){b.add(d.add(j,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(r.id).focus()})}if(w.theme_advanced_toolbar_location=="external"){k.deltaHeight=0}v.deltaHeight=k.deltaHeight;k.targetNode=null;return{iframeContainer:l,editorContainer:r.id+"_parent",sizeContainer:u,deltaHeight:k.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:e.majorVersion+"."+e.minorVersion}},resizeBy:function(i,j){var k=d.get(this.editor.id+"_tbl");this.resizeTo(k.clientWidth+i,k.clientHeight+j)},resizeTo:function(i,l){var j=this.editor,k=this.settings,m=d.get(j.id+"_tbl"),n=d.get(j.id+"_ifr");i=Math.max(k.theme_advanced_resizing_min_width||100,i);l=Math.max(k.theme_advanced_resizing_min_height||100,l);i=Math.min(k.theme_advanced_resizing_max_width||65535,i);l=Math.min(k.theme_advanced_resizing_max_height||65535,l);d.setStyle(m,"height","");d.setStyle(n,"height",l);if(k.theme_advanced_resize_horizontal){d.setStyle(m,"width","");d.setStyle(n,"width",i);if(i<m.clientWidth){d.setStyle(n,"width",m.clientWidth)}}},destroy:function(){var i=this.editor.id;b.clear(i+"_resize");b.clear(i+"_path_row");b.clear(i+"_external_close")},_simpleLayout:function(y,r,k,i){var x=this,u=x.editor,v=y.theme_advanced_toolbar_location,m=y.theme_advanced_statusbar_location,l,j,q,w;if(y.readonly){l=d.add(r,"tr");l=j=d.add(l,"td",{"class":"mceIframeContainer"});return j}if(v=="top"){x._addToolbars(r,k)}if(v=="external"){l=w=d.create("div",{style:"position:relative"});l=d.add(l,"div",{id:u.id+"_external","class":"mceExternalToolbar"});d.add(l,"a",{id:u.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});l=d.add(l,"table",{id:u.id+"_tblext",cellSpacing:0,cellPadding:0});q=d.add(l,"tbody");if(i.firstChild.className=="mceOldBoxModel"){i.firstChild.appendChild(w)}else{i.insertBefore(w,i.firstChild)}x._addToolbars(q,k);u.onMouseUp.add(function(){var o=d.get(u.id+"_external");d.show(o);d.hide(g);var n=b.add(u.id+"_external_close","click",function(){d.hide(u.id+"_external");b.remove(u.id+"_external_close","click",n)});d.show(o);d.setStyle(o,"top",0-d.getRect(u.id+"_tblext").h-1);d.hide(o);d.show(o);o.style.filter="";g=u.id+"_external";o=null})}if(m=="top"){x._addStatusBar(r,k)}if(!y.theme_advanced_toolbar_container){l=d.add(r,"tr");l=j=d.add(l,"td",{"class":"mceIframeContainer"})}if(v=="bottom"){x._addToolbars(r,k)}if(m=="bottom"){x._addStatusBar(r,k)}return j},_rowLayout:function(w,m,k){var v=this,p=v.editor,u,x,i=p.controlManager,l,j,r,q;u=w.theme_advanced_containers_default_class||"";x=w.theme_advanced_containers_default_align||"center";f(c(w.theme_advanced_containers||""),function(s,o){var n=w["theme_advanced_container_"+s]||"";switch(n.toLowerCase()){case"mceeditor":l=d.add(m,"tr");l=j=d.add(l,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":v._addStatusBar(m,k);break;default:q=(w["theme_advanced_container_"+s+"_align"]||x).toLowerCase();q="mce"+v._ufirst(q);l=d.add(d.add(m,"tr"),"td",{"class":"mceToolbar "+(w["theme_advanced_container_"+s+"_class"]||u)+" "+q||x});r=i.createToolbar("toolbar"+o);v._addControls(n,r);d.setHTML(l,r.renderHTML());k.deltaHeight-=w.theme_advanced_row_height}});return j},_addControls:function(j,i){var k=this,l=k.settings,m,n=k.editor.controlManager;if(l.theme_advanced_disable&&!k._disabled){m={};f(c(l.theme_advanced_disable),function(o){m[o]=1});k._disabled=m}else{m=k._disabled}f(c(j),function(p){var o;if(m&&m[p]){return}if(p=="tablecontrols"){f(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(q){q=k.createControl(q,n);if(q){i.add(q)}});return}o=k.createControl(p,n);if(o){i.add(o)}})},_addToolbars:function(w,k){var z=this,p,m,r=z.editor,A=z.settings,y,j=r.controlManager,u,l,q=[],x;x=A.theme_advanced_toolbar_align.toLowerCase();x="mce"+z._ufirst(x);l=d.add(d.add(w,"tr"),"td",{"class":"mceToolbar "+x});if(!r.getParam("accessibility_focus")){q.push(d.createHTML("a",{href:"#",onfocus:"tinyMCE.get('"+r.id+"').focus();"},"<!-- IE -->"))}q.push(d.createHTML("a",{href:"#",accesskey:"q",title:r.getLang("advanced.toolbar_focus")},"<!-- IE -->"));for(p=1;(y=A["theme_advanced_buttons"+p]);p++){m=j.createToolbar("toolbar"+p,{"class":"mceToolbarRow"+p});if(A["theme_advanced_buttons"+p+"_add"]){y+=","+A["theme_advanced_buttons"+p+"_add"]}if(A["theme_advanced_buttons"+p+"_add_before"]){y=A["theme_advanced_buttons"+p+"_add_before"]+","+y}z._addControls(y,m);q.push(m.renderHTML());k.deltaHeight-=A.theme_advanced_row_height}q.push(d.createHTML("a",{href:"#",accesskey:"z",title:r.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+r.id+"').focus();"},"<!-- IE -->"));d.setHTML(l,q.join(""))},_addStatusBar:function(m,j){var k,v=this,p=v.editor,w=v.settings,i,q,u,l;k=d.add(m,"tr");k=l=d.add(k,"td",{"class":"mceStatusbar"});k=d.add(k,"div",{id:p.id+"_path_row"},w.theme_advanced_path?p.translate("advanced.path")+": ":"&#160;");d.add(k,"a",{href:"#",accesskey:"x"});if(w.theme_advanced_resizing){d.add(l,"a",{id:p.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize"});if(w.theme_advanced_resizing_use_cookie){p.onPostRender.add(function(){var n=a.getHash("TinyMCE_"+p.id+"_size"),r=d.get(p.id+"_tbl");if(!n){return}v.resizeTo(n.cw,n.ch)})}p.onPostRender.add(function(){b.add(p.id+"_resize","mousedown",function(D){var t,r,s,o,C,z,A,F,n,E,x;function y(G){n=A+(G.screenX-C);E=F+(G.screenY-z);v.resizeTo(n,E)}function B(G){b.remove(d.doc,"mousemove",t);b.remove(p.getDoc(),"mousemove",r);b.remove(d.doc,"mouseup",s);b.remove(p.getDoc(),"mouseup",o);if(w.theme_advanced_resizing_use_cookie){a.setHash("TinyMCE_"+p.id+"_size",{cw:n,ch:E})}}D.preventDefault();C=D.screenX;z=D.screenY;x=d.get(v.editor.id+"_ifr");A=n=x.clientWidth;F=E=x.clientHeight;t=b.add(d.doc,"mousemove",y);r=b.add(p.getDoc(),"mousemove",y);s=b.add(d.doc,"mouseup",B);o=b.add(p.getDoc(),"mouseup",B)})})}j.deltaHeight-=21;k=m=null},_nodeChanged:function(r,z,l,x,j){var C=this,i,y=0,B,u,D=C.settings,A,k,w,m,q;e.each(C.stateControls,function(n){z.setActive(n,r.queryCommandState(C.controls[n][1]))});function o(p){var s,n=j.parents,t=p;if(typeof(p)=="string"){t=function(v){return v.nodeName==p}}for(s=0;s<n.length;s++){if(t(n[s])){return n[s]}}}z.setActive("visualaid",r.hasVisual);z.setDisabled("undo",!r.undoManager.hasUndo()&&!r.typing);z.setDisabled("redo",!r.undoManager.hasRedo());z.setDisabled("outdent",!r.queryCommandState("Outdent"));i=o("A");if(u=z.get("link")){if(!i||!i.name){u.setDisabled(!i&&x);u.setActive(!!i)}}if(u=z.get("unlink")){u.setDisabled(!i&&x);u.setActive(!!i&&!i.name)}if(u=z.get("anchor")){u.setActive(!!i&&i.name)}i=o("IMG");if(u=z.get("image")){u.setActive(!!i&&l.className.indexOf("mceItem")==-1)}if(u=z.get("styleselect")){C._importClasses();m=[];f(u.items,function(n){m.push(n.value)});q=r.formatter.matchAll(m);u.select(q[0])}if(u=z.get("formatselect")){i=o(d.isBlock);if(i){u.select(i.nodeName.toLowerCase())}}o(function(p){if(p.nodeName==="SPAN"){if(!A&&p.className){A=p.className}if(!k&&p.style.fontSize){k=p.style.fontSize}if(!w&&p.style.fontFamily){w=p.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()}}return false});if(u=z.get("fontselect")){u.select(function(n){return n.replace(/^([^,]+).*/,"$1").toLowerCase()==w})}if(u=z.get("fontsizeselect")){if(D.theme_advanced_runtime_fontsize&&!k&&!A){k=r.dom.getStyle(l,"fontSize",true)}u.select(function(n){if(n.fontSize&&n.fontSize===k){return true}if(n["class"]&&n["class"]===A){return true}})}if(D.theme_advanced_path&&D.theme_advanced_statusbar_location){i=d.get(r.id+"_path")||d.add(r.id+"_path_row","span",{id:r.id+"_path"});d.setHTML(i,"");o(function(E){var p=E.nodeName.toLowerCase(),s,v,t="";if(E.nodeType!=1||E.nodeName==="BR"||(d.hasClass(E,"mceItemHidden")||d.hasClass(E,"mceItemRemoved"))){return}if(B=d.getAttrib(E,"mce_name")){p=B}if(e.isIE&&E.scopeName!=="HTML"){p=E.scopeName+":"+p}p=p.replace(/mce\:/g,"");switch(p){case"b":p="strong";break;case"i":p="em";break;case"img":if(B=d.getAttrib(E,"src")){t+="src: "+B+" "}break;case"a":if(B=d.getAttrib(E,"name")){t+="name: "+B+" ";p+="#"+B}if(B=d.getAttrib(E,"href")){t+="href: "+B+" "}break;case"font":if(B=d.getAttrib(E,"face")){t+="font: "+B+" "}if(B=d.getAttrib(E,"size")){t+="size: "+B+" "}if(B=d.getAttrib(E,"color")){t+="color: "+B+" "}break;case"span":if(B=d.getAttrib(E,"style")){t+="style: "+B+" "}break}if(B=d.getAttrib(E,"id")){t+="id: "+B+" "}if(B=E.className){B=B.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(B){t+="class: "+B+" ";if(d.isBlock(E)||p=="img"||p=="span"){p+="."+B}}}p=p.replace(/(html:)/g,"");p={name:p,node:E,title:t};C.onResolveName.dispatch(C,p);t=p.title;p=p.name;v=d.create("a",{href:"javascript:;",onmousedown:"return false;",title:t,"class":"mcePath_"+(y++)},p);if(i.hasChildNodes()){i.insertBefore(d.doc.createTextNode(" \u00bb "),i.firstChild);i.insertBefore(v,i.firstChild)}else{i.appendChild(v)}},r.getBody())}},_sel:function(i){this.editor.execCommand("mceSelectNodeDepth",false,i)},_mceInsertAnchor:function(k,j){var i=this.editor;i.windowManager.open({url:e.baseURL+"/themes/advanced/anchor.htm",width:320+parseInt(i.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(i.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var i=this.editor;i.windowManager.open({url:e.baseURL+"/themes/advanced/charmap.htm",width:550+parseInt(i.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(i.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){var i=this.editor;i.windowManager.open({url:e.baseURL+"/themes/advanced/about.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(k,j){var i=this.editor;j=j||{};i.windowManager.open({url:e.baseURL+"/themes/advanced/color_picker.htm",width:375+parseInt(i.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(i.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:j.color,func:j.func,theme_url:this.url})},_mceCodeEditor:function(j,k){var i=this.editor;i.windowManager.open({url:e.baseURL+"/themes/advanced/source_editor.htm",width:parseInt(i.getParam("theme_advanced_source_editor_width",720)),height:parseInt(i.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(j,k){var i=this.editor;if(i.dom.getAttrib(i.selection.getNode(),"class").indexOf("mceItem")!=-1){return}i.windowManager.open({url:e.baseURL+"/themes/advanced/image.htm",width:355+parseInt(i.getLang("advanced.image_delta_width",0)),height:275+parseInt(i.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url})},_mceLink:function(j,k){var i=this.editor;i.windowManager.open({url:e.baseURL+"/themes/advanced/link.htm",width:310+parseInt(i.getLang("advanced.link_delta_width",0)),height:200+parseInt(i.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url})},_mceNewDocument:function(){var i=this.editor;i.windowManager.confirm("advanced.newdocument",function(j){if(j){i.execCommand("mceSetContent",false,"")}})},_mceForeColor:function(){var i=this;this._mceColorPicker(0,{color:i.fgColor,func:function(j){i.fgColor=j;i.editor.execCommand("ForeColor",false,j)}})},_mceBackColor:function(){var i=this;this._mceColorPicker(0,{color:i.bgColor,func:function(j){i.bgColor=j;i.editor.execCommand("HiliteColor",false,j)}})},_ufirst:function(i){return i.substring(0,1).toUpperCase()+i.substring(1)}});e.ThemeManager.add("advanced",e.themes.AdvancedTheme)}(tinymce));tinyMCE.addI18n('en.advanced',{
style_select:"Styles",
font_size:"Font size",
fontdefault:"Font family",
block:"Format",
paragraph:"Paragraph",
div:"Div",
address:"Address",
pre:"Preformatted",
h1:"Heading 1",
h2:"Heading 2",
h3:"Heading 3",
h4:"Heading 4",
h5:"Heading 5",
h6:"Heading 6",
blockquote:"Blockquote",
code:"Code",
samp:"Code sample",
dt:"Definition term ",
dd:"Definition description",
bold_desc:"Bold (Ctrl+B)",
italic_desc:"Italic (Ctrl+I)",
underline_desc:"Underline (Ctrl+U)",
striketrough_desc:"Strikethrough",
justifyleft_desc:"Align left",
justifycenter_desc:"Align center",
justifyright_desc:"Align right",
justifyfull_desc:"Align full",
bullist_desc:"Unordered list",
numlist_desc:"Ordered list",
outdent_desc:"Outdent",
indent_desc:"Indent",
undo_desc:"Undo (Ctrl+Z)",
redo_desc:"Redo (Ctrl+Y)",
link_desc:"Insert/edit link",
unlink_desc:"Unlink",
image_desc:"Insert/edit image",
cleanup_desc:"Cleanup messy code",
code_desc:"Edit HTML Source",
sub_desc:"Subscript",
sup_desc:"Superscript",
hr_desc:"Insert horizontal ruler",
removeformat_desc:"Remove formatting",
custom1_desc:"Your custom description here",
forecolor_desc:"Select text color",
backcolor_desc:"Select background color",
charmap_desc:"Insert custom character",
visualaid_desc:"Toggle guidelines/invisible elements",
anchor_desc:"Insert/edit anchor",
cut_desc:"Cut",
copy_desc:"Copy",
paste_desc:"Paste",
image_props_desc:"Image properties",
newdocument_desc:"New document",
help_desc:"Help",
blockquote_desc:"Blockquote",
clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\r\nDo you want more information about this issue?",
path:"Path",
newdocument:"Are you sure you want clear all contents?",
toolbar_focus:"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X",
more_colors:"More colors"
});tinyMCE.addI18n('en.advanced_dlg',{
about_title:"About TinyMCE",
about_general:"About",
about_help:"Help",
about_license:"License",
about_plugins:"Plugins",
about_plugin:"Plugin",
about_author:"Author",
about_version:"Version",
about_loaded:"Loaded plugins",
anchor_title:"Insert/edit anchor",
anchor_name:"Anchor name",
code_title:"HTML Source Editor",
code_wordwrap:"Word wrap",
colorpicker_title:"Select a color",
colorpicker_picker_tab:"Picker",
colorpicker_picker_title:"Color picker",
colorpicker_palette_tab:"Palette",
colorpicker_palette_title:"Palette colors",
colorpicker_named_tab:"Named",
colorpicker_named_title:"Named colors",
colorpicker_color:"Color:",
colorpicker_name:"Name:",
charmap_title:"Select custom character",
image_title:"Insert/edit image",
image_src:"Image URL",
image_alt:"Image description",
image_list:"Image list",
image_border:"Border",
image_dimensions:"Dimensions",
image_vspace:"Vertical space",
image_hspace:"Horizontal space",
image_align:"Alignment",
image_align_baseline:"Baseline",
image_align_top:"Top",
image_align_middle:"Middle",
image_align_bottom:"Bottom",
image_align_texttop:"Text top",
image_align_textbottom:"Text bottom",
image_align_left:"Left",
image_align_right:"Right",
link_title:"Insert/edit link",
link_url:"Link URL",
link_target:"Target",
link_target_same:"Open link in the same window",
link_target_blank:"Open link in a new window",
link_titlefield:"Title",
link_is_email:"The URL you entered seems to be an email address, do you want to add the required mailto: prefix?",
link_is_external:"The URL you entered seems to external link, do you want to add the required http:// prefix?",
link_list:"Link list"
});/**
* $Id: editor_plugin_src.js 201 2007-02-12 15:56:56Z spocke $
*
* @author Moxiecode
* @copyright Copyright  2004-2008, Moxiecode Systems AB, All rights reserved.
*/

(function()
{
    tinymce.PluginManager.requireLangPack('codeblock');

    tinymce.create('tinymce.plugins.CodeBlockPlugin', {
        init: function(ed, url)
        {
            ed.addCommand('mceCodeBlock', function()
            {
                ed.windowManager.open({
                    file: url + '/dialog_1.htm',
                    width: 860 ,
                    height: 500,
                    inline: 1
                }, {
                    plugin_url: url
                });
            });

            ed.addButton('codeblock', {
                title: 'codeblock.desc',
                cmd: 'mceCodeBlock',
                image: url + '/img/insert_code_icon.png'
            });
        },

        createControl: function(n, cm)
        {
            return null;
        },

        getInfo: function()
        {
            return {
                longname: 'CodeBlock plugin',
                author: 'Microsoft',
                authorurl: 'http://www.microsoft.com',
                infourl: 'http://www.microsoft.com',
                version: "1.0"
            };
        }
    });

    tinymce.PluginManager.add('codeblock', tinymce.plugins.CodeBlockPlugin);
})();tinyMCE.addI18n('en.codeblock', {
    desc: 'Insert Code Snippet'
});
(function(){var d=tinymce.DOM,b=tinymce.dom.Element,a=tinymce.dom.Event,e=tinymce.each,c=tinymce.is;tinymce.create("tinymce.plugins.InlinePopups",{init:function(f,g){f.onBeforeRenderUI.add(function(){f.windowManager=new tinymce.InlineWindowManager(f);d.loadCSS(g+"/skins/"+(f.settings.inlinepopups_skin||"clearlooks2")+"/window.css")})},getInfo:function(){return{longname:"InlinePopups",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/inlinepopups",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(f){var g=this;g.parent(f);g.zIndex=300000;g.count=0;g.windows={}},open:function(r,j){var y=this,i,k="",q=y.editor,g=0,s=0,h,m,n,o,l,v,x;r=r||{};j=j||{};if(!r.inline){return y.parent(r,j)}if(!r.type){y.bookmark=q.selection.getBookmark(1)}i=d.uniqueId();h=d.getViewPort();r.width=parseInt(r.width||320);r.height=parseInt(r.height||240)+(tinymce.isIE?8:0);r.min_width=parseInt(r.min_width||150);r.min_height=parseInt(r.min_height||100);r.max_width=parseInt(r.max_width||2000);r.max_height=parseInt(r.max_height||2000);r.left=r.left||Math.round(Math.max(h.x,h.x+(h.w/2)-(r.width/2)));r.top=r.top||Math.round(Math.max(h.y,h.y+(h.h/2)-(r.height/2)));r.movable=r.resizable=true;j.mce_width=r.width;j.mce_height=r.height;j.mce_inline=true;j.mce_window_id=i;j.mce_auto_focus=r.auto_focus;y.features=r;y.params=j;y.onOpen.dispatch(y,r,j);if(r.type){k+=" mceModal";if(r.type){k+=" mce"+r.type.substring(0,1).toUpperCase()+r.type.substring(1)}r.resizable=false}if(r.statusbar){k+=" mceStatusbar"}if(r.resizable){k+=" mceResizable"}if(r.minimizable){k+=" mceMinimizable"}if(r.maximizable){k+=" mceMaximizable"}if(r.movable){k+=" mceMovable"}y._addAll(d.doc.body,["div",{id:i,"class":q.settings.inlinepopups_skin||"clearlooks2",style:"width:100px;height:100px"},["div",{id:i+"_wrapper","class":"mceWrapper"+k},["div",{id:i+"_top","class":"mceTop"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:i+"_title"},r.title||""]],["div",{id:i+"_middle","class":"mceMiddle"},["div",{id:i+"_left","class":"mceLeft"}],["span",{id:i+"_content"}],["div",{id:i+"_right","class":"mceRight"}]],["div",{id:i+"_bottom","class":"mceBottom"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:i+"_status"},"Content"]],["a",{"class":"mceMove",tabindex:"-1",href:"javascript:;"}],["a",{"class":"mceMin",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMax",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMed",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceClose",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{id:i+"_resize_n","class":"mceResize mceResizeN",tabindex:"-1",href:"javascript:;"}],["a",{id:i+"_resize_s","class":"mceResize mceResizeS",tabindex:"-1",href:"javascript:;"}],["a",{id:i+"_resize_w","class":"mceResize mceResizeW",tabindex:"-1",href:"javascript:;"}],["a",{id:i+"_resize_e","class":"mceResize mceResizeE",tabindex:"-1",href:"javascript:;"}],["a",{id:i+"_resize_nw","class":"mceResize mceResizeNW",tabindex:"-1",href:"javascript:;"}],["a",{id:i+"_resize_ne","class":"mceResize mceResizeNE",tabindex:"-1",href:"javascript:;"}],["a",{id:i+"_resize_sw","class":"mceResize mceResizeSW",tabindex:"-1",href:"javascript:;"}],["a",{id:i+"_resize_se","class":"mceResize mceResizeSE",tabindex:"-1",href:"javascript:;"}]]]);d.setStyles(i,{top:-10000,left:-10000});if(tinymce.isGecko){d.setStyle(i,"overflow","auto")}if(!r.type){g+=d.get(i+"_left").clientWidth;g+=d.get(i+"_right").clientWidth;s+=d.get(i+"_top").clientHeight;s+=d.get(i+"_bottom").clientHeight}d.setStyles(i,{top:r.top,left:r.left,width:r.width+g,height:r.height+s});x=r.url||r.file;if(x){if(tinymce.relaxedDomain){x+=(x.indexOf("?")==-1?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain}x=tinymce._addVer(x)}if(!r.type){d.add(i+"_content","iframe",{id:i+"_ifr",src:'javascript:""',frameBorder:0,style:"border:0;width:10px;height:10px"});d.setStyles(i+"_ifr",{width:r.width,height:r.height});d.setAttrib(i+"_ifr","src",x)}else{d.add(i+"_wrapper","a",{id:i+"_ok","class":"mceButton mceOk",href:"javascript:;",onmousedown:"return false;"},"Ok");if(r.type=="confirm"){d.add(i+"_wrapper","a",{"class":"mceButton mceCancel",href:"javascript:;",onmousedown:"return false;"},"Cancel")}d.add(i+"_middle","div",{"class":"mceIcon"});d.setHTML(i+"_content",r.content.replace("\n","<br />"))}n=a.add(i,"mousedown",function(t){var u=t.target,f,p;f=y.windows[i];y.focus(i);if(u.nodeName=="A"||u.nodeName=="a"){if(u.className=="mceMax"){f.oldPos=f.element.getXY();f.oldSize=f.element.getSize();p=d.getViewPort();p.w-=2;p.h-=2;f.element.moveTo(p.x,p.y);f.element.resizeTo(p.w,p.h);d.setStyles(i+"_ifr",{width:p.w-f.deltaWidth,height:p.h-f.deltaHeight});d.addClass(i+"_wrapper","mceMaximized")}else{if(u.className=="mceMed"){f.element.moveTo(f.oldPos.x,f.oldPos.y);f.element.resizeTo(f.oldSize.w,f.oldSize.h);f.iframeElement.resizeTo(f.oldSize.w-f.deltaWidth,f.oldSize.h-f.deltaHeight);d.removeClass(i+"_wrapper","mceMaximized")}else{if(u.className=="mceMove"){return y._startDrag(i,t,u.className)}else{if(d.hasClass(u,"mceResize")){return y._startDrag(i,t,u.className.substring(13))}}}}}});o=a.add(i,"click",function(f){var p=f.target;y.focus(i);if(p.nodeName=="A"||p.nodeName=="a"){switch(p.className){case"mceClose":y.close(null,i);return a.cancel(f);case"mceButton mceOk":case"mceButton mceCancel":r.button_func(p.className=="mceButton mceOk");return a.cancel(f)}}});v=y.windows[i]={id:i,mousedown_func:n,click_func:o,element:new b(i,{blocker:1,container:q.getContainer()}),iframeElement:new b(i+"_ifr"),features:r,deltaWidth:g,deltaHeight:s};v.iframeElement.on("focus",function(){y.focus(i)});if(y.count==0&&y.editor.getParam("dialog_type","modal")=="modal"){d.add(d.doc.body,"div",{id:"mceModalBlocker","class":(y.editor.settings.inlinepopups_skin||"clearlooks2")+"_modalBlocker",style:{zIndex:y.zIndex-1}});d.show("mceModalBlocker")}else{d.setStyle("mceModalBlocker","z-index",y.zIndex-1)}if(tinymce.isIE6||/Firefox\/2\./.test(navigator.userAgent)||(tinymce.isIE&&!d.boxModel)){d.setStyles("mceModalBlocker",{position:"absolute",left:h.x,top:h.y,width:h.w-2,height:h.h-2})}y.focus(i);y._fixIELayout(i,1);if(d.get(i+"_ok")){d.get(i+"_ok").focus()}y.count++;return v},focus:function(h){var g=this,f;if(f=g.windows[h]){f.zIndex=this.zIndex++;f.element.setStyle("zIndex",f.zIndex);f.element.update();h=h+"_wrapper";d.removeClass(g.lastId,"mceFocus");d.addClass(h,"mceFocus");g.lastId=h}},_addAll:function(k,h){var g,l,f=this,j=tinymce.DOM;if(c(h,"string")){k.appendChild(j.doc.createTextNode(h))}else{if(h.length){k=k.appendChild(j.create(h[0],h[1]));for(g=2;g<h.length;g++){f._addAll(k,h[g])}}}},_startDrag:function(v,G,E){var o=this,u,z,C=d.doc,f,l=o.windows[v],h=l.element,y=h.getXY(),x,q,F,g,A,s,r,j,i,m,k,n,B;g={x:0,y:0};A=d.getViewPort();A.w-=2;A.h-=2;j=G.screenX;i=G.screenY;m=k=n=B=0;u=a.add(C,"mouseup",function(p){a.remove(C,"mouseup",u);a.remove(C,"mousemove",z);if(f){f.remove()}h.moveBy(m,k);h.resizeBy(n,B);q=h.getSize();d.setStyles(v+"_ifr",{width:q.w-l.deltaWidth,height:q.h-l.deltaHeight});o._fixIELayout(v,1);return a.cancel(p)});if(E!="Move"){D()}function D(){if(f){return}o._fixIELayout(v,0);d.add(C.body,"div",{id:"mceEventBlocker","class":"mceEventBlocker "+(o.editor.settings.inlinepopups_skin||"clearlooks2"),style:{zIndex:o.zIndex+1}});if(tinymce.isIE6||(tinymce.isIE&&!d.boxModel)){d.setStyles("mceEventBlocker",{position:"absolute",left:A.x,top:A.y,width:A.w-2,height:A.h-2})}f=new b("mceEventBlocker");f.update();x=h.getXY();q=h.getSize();s=g.x+x.x-A.x;r=g.y+x.y-A.y;d.add(f.get(),"div",{id:"mcePlaceHolder","class":"mcePlaceHolder",style:{left:s,top:r,width:q.w,height:q.h}});F=new b("mcePlaceHolder")}z=a.add(C,"mousemove",function(w){var p,H,t;D();p=w.screenX-j;H=w.screenY-i;switch(E){case"ResizeW":m=p;n=0-p;break;case"ResizeE":n=p;break;case"ResizeN":case"ResizeNW":case"ResizeNE":if(E=="ResizeNW"){m=p;n=0-p}else{if(E=="ResizeNE"){n=p}}k=H;B=0-H;break;case"ResizeS":case"ResizeSW":case"ResizeSE":if(E=="ResizeSW"){m=p;n=0-p}else{if(E=="ResizeSE"){n=p}}B=H;break;case"mceMove":m=p;k=H;break}if(n<(t=l.features.min_width-q.w)){if(m!==0){m+=n-t}n=t}if(B<(t=l.features.min_height-q.h)){if(k!==0){k+=B-t}B=t}n=Math.min(n,l.features.max_width-q.w);B=Math.min(B,l.features.max_height-q.h);m=Math.max(m,A.x-(s+A.x));k=Math.max(k,A.y-(r+A.y));m=Math.min(m,(A.w+A.x)-(s+q.w+A.x));k=Math.min(k,(A.h+A.y)-(r+q.h+A.y));if(m+k!==0){if(s+m<0){m=0}if(r+k<0){k=0}F.moveTo(s+m,r+k)}if(n+B!==0){F.resizeTo(q.w+n,q.h+B)}return a.cancel(w)});return a.cancel(G)},resizeBy:function(g,h,i){var f=this.windows[i];if(f){f.element.resizeBy(g,h);f.iframeElement.resizeBy(g,h)}},close:function(j,l){var h=this,g,k=d.doc,f=0,i,l;l=h._findId(l||j);if(!h.windows[l]){h.parent(j);return}h.count--;if(h.count==0){d.remove("mceModalBlocker")}if(g=h.windows[l]){h.onClose.dispatch(h);a.remove(k,"mousedown",g.mousedownFunc);a.remove(k,"click",g.clickFunc);a.clear(l);a.clear(l+"_ifr");d.setAttrib(l+"_ifr","src",'javascript:""');g.element.remove();delete h.windows[l];e(h.windows,function(m){if(m.zIndex>f){i=m;f=m.zIndex}});if(i){h.focus(i.id)}}},setTitle:function(f,g){var h;f=this._findId(f);if(h=d.get(f+"_title")){h.innerHTML=d.encode(g)}},alert:function(g,f,j){var i=this,h;h=i.open({title:i,type:"alert",button_func:function(k){if(f){f.call(k||i,k)}i.close(null,h.id)},content:d.encode(i.editor.getLang(g,g)),inline:1,width:400,height:130})},confirm:function(g,f,j){var i=this,h;h=i.open({title:i,type:"confirm",button_func:function(k){if(f){f.call(k||i,k)}i.close(null,h.id)},content:d.encode(i.editor.getLang(g,g)),inline:1,width:400,height:130})},_findId:function(f){var g=this;if(typeof(f)=="string"){return f}e(g.windows,function(h){var i=d.get(h.id+"_ifr");if(i&&f==i.contentWindow){f=h.id;return false}});return f},_fixIELayout:function(i,h){var f,g;if(!tinymce.isIE6){return}e(["n","s","w","e","nw","ne","sw","se"],function(j){var k=d.get(i+"_resize_"+j);d.setStyles(k,{width:h?k.clientWidth:"",height:h?k.clientHeight:"",cursor:d.getStyle(k,"cursor",1)});d.setStyle(i+"_bottom","bottom","-1px");k=0});if(f=this.windows[i]){f.element.hide();f.element.show();e(d.select("div,a",i),function(k,j){if(k.currentStyle.backgroundImage!="none"){g=new Image();g.src=k.currentStyle.backgroundImage.replace(/url\(\"(.+)\"\)/,"$1")}});d.get(i).style.filter=""}}});tinymce.PluginManager.add("inlinepopups",tinymce.plugins.InlinePopups)})();(function(){var c=tinymce.each,d=null,a={paste_auto_cleanup_on_paste:true,paste_block_drop:false,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:false,paste_remove_styles:false,paste_remove_styles_if_webkit:true,paste_convert_middot_lists:true,paste_convert_headers_to_strong:false,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:false,paste_text_sticky:false,paste_text_notifyalways:false,paste_text_linebreaktype:"p",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};function b(e,f){return e.getParam(f,a[f])}tinymce.create("tinymce.plugins.PastePlugin",{init:function(e,f){var g=this;g.editor=e;g.url=f;g.onPreProcess=new tinymce.util.Dispatcher(g);g.onPostProcess=new tinymce.util.Dispatcher(g);g.onPreProcess.add(g._preProcess);g.onPostProcess.add(g._postProcess);g.onPreProcess.add(function(j,k){e.execCallback("paste_preprocess",j,k)});g.onPostProcess.add(function(j,k){e.execCallback("paste_postprocess",j,k)});e.pasteAsPlainText=false;function i(l,j){var k=e.dom;g.onPreProcess.dispatch(g,l);l.node=k.create("div",0,l.content);g.onPostProcess.dispatch(g,l);l.content=e.serializer.serialize(l.node,{getInner:1});if((!j)&&(e.pasteAsPlainText)){g._insertPlainText(e,k,l.content);if(!b(e,"paste_text_sticky")){e.pasteAsPlainText=false;e.controlManager.setActive("pastetext",false)}}else{if(/<(p|h[1-6]|ul|ol)/.test(l.content)){g._insertBlockContent(e,k,l.content)}else{g._insert(l.content)}}}e.addCommand("mceInsertClipboardContent",function(j,k){i(k,true)});if(!b(e,"paste_text_use_dialog")){e.addCommand("mcePasteText",function(k,j){var l=tinymce.util.Cookie;e.pasteAsPlainText=!e.pasteAsPlainText;e.controlManager.setActive("pastetext",e.pasteAsPlainText);if((e.pasteAsPlainText)&&(!l.get("tinymcePasteText"))){if(b(e,"paste_text_sticky")){e.windowManager.alert(e.translate("paste.plaintext_mode_sticky"))}else{e.windowManager.alert(e.translate("paste.plaintext_mode_sticky"))}if(!b(e,"paste_text_notifyalways")){l.set("tinymcePasteText","1",new Date(new Date().getFullYear()+1,12,31))}}})}e.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});e.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"});function h(s){var m,q,k,l=e.selection,p=e.dom,r=e.getBody(),j;if(e.pasteAsPlainText&&(s.clipboardData||p.doc.dataTransfer)){s.preventDefault();i({content:(s.clipboardData||p.doc.dataTransfer).getData("Text")},true);return}if(p.get("_mcePaste")){return}m=p.add(r,"div",{id:"_mcePaste","class":"mcePaste"},'\uFEFF<br _mce_bogus="1">');if(r!=e.getDoc().body){j=p.getPos(e.selection.getStart(),r).y}else{j=r.scrollTop}p.setStyles(m,{position:"absolute",left:-10000,top:j,width:1,height:1,overflow:"hidden"});if(tinymce.isIE){k=p.doc.body.createTextRange();k.moveToElementText(m);k.execCommand("Paste");p.remove(m);if(m.innerHTML==="\uFEFF"){e.execCommand("mcePasteWord");s.preventDefault();return}i({content:m.innerHTML});return tinymce.dom.Event.cancel(s)}else{function o(n){n.preventDefault()}p.bind(e.getDoc(),"mousedown",o);p.bind(e.getDoc(),"keydown",o);q=e.selection.getRng();m=m.firstChild;k=e.getDoc().createRange();k.setStart(m,0);k.setEnd(m,1);l.setRng(k);window.setTimeout(function(){var t="",n=p.select("div.mcePaste");c(n,function(v){var u=v.firstChild;if(u&&u.nodeName=="DIV"&&u.style.marginTop&&u.style.backgroundColor){p.remove(u,1)}c(p.select("div.mcePaste",v),function(w){p.remove(w,1)});c(p.select("span.Apple-style-span",v),function(w){p.remove(w,1)});c(p.select("br[_mce_bogus]",v),function(w){p.remove(w)});t+=v.innerHTML});c(n,function(u){p.remove(u)});if(q){l.setRng(q)}i({content:t});p.unbind(e.getDoc(),"mousedown",o);p.unbind(e.getDoc(),"keydown",o)},0)}}if(b(e,"paste_auto_cleanup_on_paste")){if(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)){e.onKeyDown.add(function(j,k){if(((tinymce.isMac?k.metaKey:k.ctrlKey)&&k.keyCode==86)||(k.shiftKey&&k.keyCode==45)){h(k)}})}else{e.onPaste.addToTop(function(j,k){return h(k)})}}if(b(e,"paste_block_drop")){e.onInit.add(function(){e.dom.bind(e.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(j){j.preventDefault();j.stopPropagation();return false})})}g._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(i,f){var l=this.editor,k=f.content,q=tinymce.grep,p=tinymce.explode,g=tinymce.trim,m,j;function e(h){c(h,function(o){if(o.constructor==RegExp){k=k.replace(o,"")}else{k=k.replace(o[0],o[1])}})}if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(k)||f.wordContent){f.wordContent=true;e([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);if(b(l,"paste_convert_headers_to_strong")){k=k.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")}if(b(l,"paste_convert_middot_lists")){e([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"]])}e([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\u00a0"]]);do{m=k.length;k=k.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1")}while(m!=k.length);if(b(l,"paste_retain_style_properties").replace(/^none$/i,"").length==0){k=k.replace(/<\/?span[^>]*>/gi,"")}else{e([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(o,h){return(h.length>0)?h.replace(/./," ").slice(Math.floor(h.length/2)).split("").join("\u00a0"):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(u,h,t){var v=[],o=0,r=p(g(t).replace(/&quot;/gi,"'"),";");c(r,function(s){var w,y,z=p(s,":");function x(A){return A+((A!=="0")&&(/\d$/.test(A)))?"px":""}if(z.length==2){w=z[0].toLowerCase();y=z[1].toLowerCase();switch(w){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":v[o++]=w.replace(/^mso-|-alt$/g,"")+":"+x(y);return;case"horiz-align":v[o++]="text-align:"+y;return;case"vert-align":v[o++]="vertical-align:"+y;return;case"font-color":case"mso-foreground":v[o++]="color:"+y;return;case"mso-background":case"mso-highlight":v[o++]="background:"+y;return;case"mso-default-height":v[o++]="min-height:"+x(y);return;case"mso-default-width":v[o++]="min-width:"+x(y);return;case"mso-padding-between-alt":v[o++]="border-collapse:separate;border-spacing:"+x(y);return;case"text-line-through":if((y=="single")||(y=="double")){v[o++]="text-decoration:line-through"}return;case"mso-zero-height":if(y=="yes"){v[o++]="display:none"}return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(w)){return}v[o++]=w+":"+z[1]}});if(o>0){return h+' style="'+v.join(";")+'"'}else{return h}}]])}}if(b(l,"paste_convert_headers_to_strong")){e([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]])}j=b(l,"paste_strip_class_attributes");if(j!=="none"){function n(r,o){if(j==="all"){return""}var h=q(p(o.replace(/^(["'])(.*)\1$/,"$2")," "),function(s){return(/^(?!mso)/i.test(s))});return h.length?' class="'+h.join(" ")+'"':""}k=k.replace(/ class="([^"]+)"/gi,n);k=k.replace(/ class=(\w+)/gi,n)}if(b(l,"paste_remove_spans")){k=k.replace(/<\/?span[^>]*>/gi,"")}f.content=k},_postProcess:function(h,j){var g=this,f=g.editor,i=f.dom,e;if(j.wordContent){c(i.select("a",j.node),function(k){if(!k.href||k.href.indexOf("#_Toc")!=-1){i.remove(k,1)}});if(b(f,"paste_convert_middot_lists")){g._convertLists(h,j)}e=b(f,"paste_retain_style_properties");if((tinymce.is(e,"string"))&&(e!=="all")&&(e!=="*")){e=tinymce.explode(e.replace(/^none$/i,""));c(i.select("*",j.node),function(n){var o={},l=0,m,p,k;if(e){for(m=0;m<e.length;m++){p=e[m];k=i.getStyle(n,p);if(k){o[p]=k;l++}}}i.setAttrib(n,"style","");if(e&&l>0){i.setStyles(n,o)}else{if(n.nodeName=="SPAN"&&!n.className){i.remove(n,true)}}})}}if(b(f,"paste_remove_styles")||(b(f,"paste_remove_styles_if_webkit")&&tinymce.isWebKit)){c(i.select("*[style]",j.node),function(k){k.removeAttribute("style");k.removeAttribute("_mce_style")})}else{if(tinymce.isWebKit){c(i.select("*",j.node),function(k){k.removeAttribute("_mce_style")})}}},_convertLists:function(h,f){var j=h.editor.dom,i,m,e=-1,g,n=[],l,k;c(j.select("p",f.node),function(u){var r,v="",t,s,o,q;for(r=u.firstChild;r&&r.nodeType==3;r=r.nextSibling){v+=r.nodeValue}v=u.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g,"\u00a0");if(/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o]\s*\u00a0*/.test(v)){t="ul"}if(/^__MCE_ITEM__\s*\w+\.\s*\u00a0{2,}/.test(v)){t="ol"}if(t){g=parseFloat(u.style.marginLeft||0);if(g>e){n.push(g)}if(!i||t!=l){i=j.create(t);j.insertAfter(i,u)}else{if(g>e){i=m.appendChild(j.create(t))}else{if(g<e){o=tinymce.inArray(n,g);q=j.getParents(i.parentNode,t);i=q[q.length-1-o]||i}}}c(j.select("span",u),function(w){var p=w.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");if(t=="ul"&&/^[\u2022\u00b7\u00a7\u00d8o]/.test(p)){j.remove(w)}else{if(/^[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(p)){j.remove(w)}}});s=u.innerHTML;if(t=="ul"){s=u.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o]\s*(&nbsp;|\u00a0)+\s*/,"")}else{s=u.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,"")}m=i.appendChild(j.create("li",0,s));j.remove(u);e=g;l=t}else{i=e=0}});k=f.node.innerHTML;if(k.indexOf("__MCE_ITEM__")!=-1){f.node.innerHTML=k.replace(/__MCE_ITEM__/g,"")}},_insertBlockContent:function(l,h,m){var f,j,g=l.selection,q,n,e,o,i,k="mce_marker";function p(t){var s;if(tinymce.isIE){s=l.getDoc().body.createTextRange();s.moveToElementText(t);s.collapse(false);s.select()}else{g.select(t,1);g.collapse(false)}}this._insert('<span id="'+k+'"></span>',1);j=h.get(k);f=h.getParent(j,"p,h1,h2,h3,h4,h5,h6,ul,ol,th,td");if(f&&!/TD|TH/.test(f.nodeName)){j=h.split(f,j);c(h.create("div",0,m).childNodes,function(r){q=j.parentNode.insertBefore(r.cloneNode(true),j)});p(q)}else{h.setOuterHTML(j,m);g.select(l.getBody(),1);g.collapse(0)}while(n=h.get(k)){h.remove(n)}n=g.getStart();e=h.getViewPort(l.getWin());o=l.dom.getPos(n).y;i=n.clientHeight;if(o<e.y||o+i>e.y+e.h){l.getDoc().body.scrollTop=o<e.y?o:o-e.h+25}},_insert:function(g,e){var f=this.editor,i=f.selection.getRng();if(!f.selection.isCollapsed()&&i.startContainer!=i.endContainer){f.getDoc().execCommand("Delete",false,null)}f.execCommand(tinymce.isGecko?"insertHTML":"mceInsertContent",false,g,{skip_undo:e})},_insertPlainText:function(j,x,v){var t,u,l,k,r,e,p,f,n=j.getWin(),z=j.getDoc(),s=j.selection,m=tinymce.is,y=tinymce.inArray,g=b(j,"paste_text_linebreaktype"),o=b(j,"paste_text_replacements");function q(h){c(h,function(i){if(i.constructor==RegExp){v=v.replace(i,"")}else{v=v.replace(i[0],i[1])}})}if((typeof(v)==="string")&&(v.length>0)){if(!d){d=("34,quot,38,amp,39,apos,60,lt,62,gt,"+j.serializer.settings.entities).split(",")}if(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(v)){q([/[\n\r]+/g])}else{q([/\r+/g])}q([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/&(#\d+|[a-z0-9]{1,10});/gi,function(i,h){if(h.charAt(0)==="#"){return String.fromCharCode(h.slice(1))}else{return((i=y(d,h))>0)?String.fromCharCode(d[i-1]):" "}}],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"],/^\s+|\s+$/g]);v=x.encode(v);if(!s.isCollapsed()){z.execCommand("Delete",false,null)}if(m(o,"array")||(m(o,"array"))){q(o)}else{if(m(o,"string")){q(new RegExp(o,"gi"))}}if(g=="none"){q([[/\n+/g," "]])}else{if(g=="br"){q([[/\n/g,"<br />"]])}else{q([/^\s+|\s+$/g,[/\n\n/g,"</p><p>"],[/\n/g,"<br />"]])}}if((l=v.indexOf("</p><p>"))!=-1){k=v.lastIndexOf("</p><p>");r=s.getNode();e=[];do{if(r.nodeType==1){if(r.nodeName=="TD"||r.nodeName=="BODY"){break}e[e.length]=r}}while(r=r.parentNode);if(e.length>0){p=v.substring(0,l);f="";for(t=0,u=e.length;t<u;t++){p+="</"+e[t].nodeName.toLowerCase()+">";f+="<"+e[e.length-t-1].nodeName.toLowerCase()+">"}if(l==k){v=p+f+v.substring(l+7)}else{v=p+v.substring(l+4,k+4)+f+v.substring(k+7)}}}j.execCommand("mceInsertRawHTML",false,v+'<span id="_plain_text_marker">&nbsp;</span>');window.setTimeout(function(){var h=x.get("_plain_text_marker"),B,i,A,w;s.select(h,false);z.execCommand("Delete",false,null);h=null;B=s.getStart();i=x.getViewPort(n);A=x.getPos(B).y;w=B.clientHeight;if((A<i.y)||(A+w>i.y+i.h)){z.body.scrollTop=A<i.y?A:A-i.h+25}},0)}},_legacySupport:function(){var f=this,e=f.editor;e.addCommand("mcePasteWord",function(){e.windowManager.open({file:f.url+"/pasteword.htm",width:parseInt(b(e,"paste_dialog_width")),height:parseInt(b(e,"paste_dialog_height")),inline:1})});if(b(e,"paste_text_use_dialog")){e.addCommand("mcePasteText",function(){e.windowManager.open({file:f.url+"/pastetext.htm",width:parseInt(b(e,"paste_dialog_width")),height:parseInt(b(e,"paste_dialog_height")),inline:1})})}e.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}});tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)})();(function(b){var c=b.each;function a(F,E,I){var e,J,B,n;r();n=E.getParent(I.getStart(),"th,td");if(n){J=D(n);B=G();n=v(J.x,J.y)}function w(L,K){L=L.cloneNode(K);L.removeAttribute("id");return L}function r(){var K=0;e=[];c(["thead","tbody","tfoot"],function(L){var M=E.select(L+" tr",F);c(M,function(N,O){O+=K;c(E.select("td,th",N),function(U,P){var Q,R,S,T;if(e[O]){while(e[O][P]){P++}}S=g(U,"rowspan");T=g(U,"colspan");for(R=O;R<O+S;R++){if(!e[R]){e[R]=[]}for(Q=P;Q<P+T;Q++){e[R][Q]={part:L,real:R==O&&Q==P,elm:U,rowspan:S,colspan:T}}}})});K+=M.length})}function v(K,M){var L;L=e[M];if(L){return L[K]}}function g(L,K){return parseInt(L.getAttribute(K)||1)}function h(K){return E.hasClass(K.elm,"mceSelected")||K==n}function j(){var K=[];c(F.rows,function(L){c(L.cells,function(M){if(E.hasClass(M,"mceSelected")||M==n.elm){K.push(L);return false}})});return K}function q(){var K=E.createRng();K.setStartAfter(F);K.setEndAfter(F);I.setRng(K);E.remove(F)}function d(K){var L;b.walk(K,function(N){var M;if(N.nodeType==3){c(E.getParents(N.parentNode,null,K).reverse(),function(O){O=w(O,false);if(!L){L=M=O}else{if(M){M.appendChild(O)}}M=O});if(M){M.innerHTML=b.isIE?"&nbsp;":'<br _mce_bogus="1" />'}return false}},"childNodes");K=w(K,false);K.rowSpan=K.colSpan=1;if(L){K.appendChild(L)}else{if(!b.isIE){K.innerHTML='<br _mce_bogus="1" />'}}return K}function p(){var K=E.createRng();c(E.select("tr",F),function(L){if(L.cells.length==0){E.remove(L)}});if(E.select("tr",F).length==0){K.setStartAfter(F);K.setEndAfter(F);I.setRng(K);E.remove(F);return}c(E.select("thead,tbody,tfoot",F),function(L){if(L.rows.length==0){E.remove(L)}});r();row=e[Math.min(e.length-1,J.y)];if(row){I.select(row[Math.min(row.length-1,J.x)].elm,true);I.collapse(true)}}function s(Q,O,S,P){var N,L,K,M,R;N=e[O][Q].elm.parentNode;for(K=1;K<=S;K++){N=E.getNext(N,"tr");if(N){for(L=Q;L>=0;L--){R=e[O+K][L].elm;if(R.parentNode==N){for(M=1;M<=P;M++){E.insertAfter(d(R),R)}break}}if(L==-1){for(M=1;M<=P;M++){N.insertBefore(d(N.cells[0]),N.cells[0])}}}}}function A(){c(e,function(K,L){c(K,function(N,M){var Q,P,R,O;if(h(N)){N=N.elm;Q=g(N,"colspan");P=g(N,"rowspan");if(Q>1||P>1){N.colSpan=N.rowSpan=1;for(O=0;O<Q-1;O++){E.insertAfter(d(N),N)}s(M,L,P-1,Q)}}})})}function o(S,P,V){var N,M,U,T,R,O,Q,K,S,L;if(S){pos=D(S);N=pos.x;M=pos.y;U=N+(P-1);T=M+(V-1)}else{N=J.x;M=J.y;U=B.x;T=B.y}Q=v(N,M);K=v(U,T);if(Q&&K&&Q.part==K.part){A();r();Q=v(N,M).elm;Q.colSpan=(U-N)+1;Q.rowSpan=(T-M)+1;for(O=M;O<=T;O++){for(R=N;R<=U;R++){S=e[O][R].elm;if(S!=Q){L=b.grep(S.childNodes);c(L,function(X,W){if(X.nodeName!="BR"||W!=L.length-1){Q.appendChild(X)}});E.remove(S)}}}p()}}function k(N){var K,P,M,O,Q,R,L,S;c(e,function(T,U){c(T,function(W,V){if(h(W)){W=W.elm;Q=W.parentNode;R=w(Q,false);K=U;if(N){return false}}});if(N){return !K}});for(O=0;O<e[0].length;O++){P=e[K][O].elm;if(P!=M){if(!N){rowSpan=g(P,"rowspan");if(rowSpan>1){P.rowSpan=rowSpan+1;continue}}else{if(K>0&&e[K-1][O]){S=e[K-1][O].elm;rowSpan=g(S,"rowspan");if(rowSpan>1){S.rowSpan=rowSpan+1;continue}}}L=d(P);L.colSpan=P.colSpan;R.appendChild(L);M=P}}if(R.hasChildNodes()){if(!N){E.insertAfter(R,Q)}else{Q.parentNode.insertBefore(R,Q)}}}function f(L){var M,K;c(e,function(N,O){c(N,function(Q,P){if(h(Q)){M=P;if(L){return false}}});if(L){return !M}});c(e,function(Q,R){var N=Q[M].elm,O,P;if(N!=K){P=g(N,"colspan");O=g(N,"rowspan");if(P==1){if(!L){E.insertAfter(d(N),N);s(M,R,O-1,P)}else{N.parentNode.insertBefore(d(N),N);s(M,R,O-1,P)}}else{N.colSpan++}K=N}})}function m(){var K=[];c(e,function(L,M){c(L,function(O,N){if(h(O)&&b.inArray(K,N)===-1){c(e,function(R){var P=R[N].elm,Q;Q=g(P,"colspan");if(Q>1){P.colSpan=Q-1}else{E.remove(P)}});K.push(N)}})});p()}function l(){var L;function K(O){var N,P,M;N=E.getNext(O,"tr");c(O.cells,function(Q){var R=g(Q,"rowspan");if(R>1){Q.rowSpan=R-1;P=D(Q);s(P.x,P.y,1,1)}});P=D(O.cells[0]);c(e[P.y],function(Q){var R;Q=Q.elm;if(Q!=M){R=g(Q,"rowspan");if(R<=1){E.remove(Q)}else{Q.rowSpan=R-1}M=Q}})}L=j();c(L.reverse(),function(M){K(M)});p()}function C(){var K=j();E.remove(K);p();return K}function H(){var K=j();c(K,function(M,L){K[L]=w(M,true)});return K}function z(M,L){var N=j(),K=N[L?0:N.length-1],O=K.cells.length;c(e,function(Q){var P;O=0;c(Q,function(S,R){if(S.real){O+=S.colspan}if(S.elm.parentNode==K){P=1}});if(P){return false}});if(!L){M.reverse()}c(M,function(R){var Q=R.cells.length,P;for(i=0;i<Q;i++){P=R.cells[i];P.colSpan=P.rowSpan=1}for(i=Q;i<O;i++){R.appendChild(d(R.cells[Q-1]))}for(i=O;i<Q;i++){E.remove(R.cells[i])}if(L){K.parentNode.insertBefore(R,K)}else{E.insertAfter(R,K)}})}function D(K){var L;c(e,function(M,N){c(M,function(P,O){if(P.elm==K){L={x:O,y:N};return false}});return !L});return L}function u(K){J=D(K)}function G(){var M,L,K;L=K=0;c(e,function(N,O){c(N,function(Q,P){var S,R;if(h(Q)){Q=e[O][P];if(P>L){L=P}if(O>K){K=O}if(Q.real){S=Q.colspan-1;R=Q.rowspan-1;if(S){if(P+S>L){L=P+S}}if(R){if(O+R>K){K=O+R}}}}})});return{x:L,y:K}}function t(Q){var N,M,S,R,L,K,O,P;B=D(Q);if(J&&B){N=Math.min(J.x,B.x);M=Math.min(J.y,B.y);S=Math.max(J.x,B.x);R=Math.max(J.y,B.y);L=S;K=R;for(y=M;y<=K;y++){Q=e[y][N];if(!Q.real){if(N-(Q.colspan-1)<N){N-=Q.colspan-1}}}for(x=N;x<=L;x++){Q=e[M][x];if(!Q.real){if(M-(Q.rowspan-1)<M){M-=Q.rowspan-1}}}for(y=M;y<=R;y++){for(x=N;x<=S;x++){Q=e[y][x];if(Q.real){O=Q.colspan-1;P=Q.rowspan-1;if(O){if(x+O>L){L=x+O}}if(P){if(y+P>K){K=y+P}}}}}E.removeClass(E.select("td.mceSelected,th.mceSelected"),"mceSelected");for(y=M;y<=K;y++){for(x=N;x<=L;x++){E.addClass(e[y][x].elm,"mceSelected")}}}}b.extend(this,{deleteTable:q,split:A,merge:o,insertRow:k,insertCol:f,deleteCols:m,deleteRows:l,cutRows:C,copyRows:H,pasteRows:z,getPos:D,setStartCell:u,setEndCell:t})}b.create("tinymce.plugins.TablePlugin",{init:function(e,f){var d,j;function h(m){var l=e.selection,k=e.dom.getParent(m||l.getNode(),"table");if(k){return new a(k,e.dom,l)}}function g(){e.getBody().style.webkitUserSelect="";e.dom.removeClass(e.dom.select("td.mceSelected,th.mceSelected"),"mceSelected")}c([["table","table.desc","mceInsertTable",true],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",true],["cell_props","table.cell_desc","mceTableCellProps",true],["split_cells","table.split_cells_desc","mceTableSplitCells",true],["merge_cells","table.merge_cells_desc","mceTableMergeCells",true]],function(k){e.addButton(k[0],{title:k[1],cmd:k[2],ui:k[3]})});if(!b.isIE){e.onClick.add(function(k,l){l=l.target;if(l.nodeName==="TABLE"){k.selection.select(l)}})}e.onNodeChange.add(function(l,k,o){var m;o=l.selection.getStart();m=l.dom.getParent(o,"td,th,caption");k.setActive("table",o.nodeName==="TABLE"||!!m);if(m&&m.nodeName==="CAPTION"){m=0}k.setDisabled("delete_table",!m);k.setDisabled("delete_col",!m);k.setDisabled("delete_table",!m);k.setDisabled("delete_row",!m);k.setDisabled("col_after",!m);k.setDisabled("col_before",!m);k.setDisabled("row_after",!m);k.setDisabled("row_before",!m);k.setDisabled("row_props",!m);k.setDisabled("cell_props",!m);k.setDisabled("split_cells",!m);k.setDisabled("merge_cells",!m)});e.onInit.add(function(l){var k,o,p=l.dom,m;d=l.windowManager;l.onMouseDown.add(function(q,r){if(r.button!=2){g();o=p.getParent(r.target,"td,th");k=p.getParent(o,"table")}});p.bind(l.getDoc(),"mouseover",function(t){var r,q,s=t.target;if(o&&(m||s!=o)&&(s.nodeName=="TD"||s.nodeName=="TH")){q=p.getParent(s,"table");if(q==k){if(!m){m=h(q);m.setStartCell(o);l.getBody().style.webkitUserSelect="none"}m.setEndCell(s)}r=l.selection.getSel();if(r.removeAllRanges){r.removeAllRanges()}else{r.empty()}t.preventDefault()}});l.onMouseUp.add(function(z,A){var r,t=z.selection,B,C=t.getSel(),q,u,s,w;if(o){if(m){z.getBody().style.webkitUserSelect=""}function v(D,F){var E=new b.dom.TreeWalker(D,D);do{if(D.nodeType==3&&b.trim(D.nodeValue).length!=0){if(F){r.setStart(D,0)}else{r.setEnd(D,D.nodeValue.length)}return}if(D.nodeName=="BR"){if(F){r.setStartBefore(D)}else{r.setEndBefore(D)}return}}while(D=(F?E.next():E.prev()))}B=p.select("td.mceSelected,th.mceSelected");if(B.length>0){r=p.createRng();u=B[0];w=B[B.length-1];v(u,1);q=new b.dom.TreeWalker(u,p.getParent(B[0],"table"));do{if(u.nodeName=="TD"||u.nodeName=="TH"){if(!p.hasClass(u,"mceSelected")){break}s=u}}while(u=q.next());v(s);t.setRng(r)}z.nodeChanged();o=m=k=null}});l.onKeyUp.add(function(q,r){g()});if(l&&l.plugins.contextmenu){l.plugins.contextmenu.onContextMenu.add(function(s,q,u){var v,t=l.selection,r=t.getNode()||l.getBody();if(l.dom.getParent(u,"td")||l.dom.getParent(u,"th")||l.dom.select("td.mceSelected,th.mceSelected").length){q.removeAll();if(r.nodeName=="A"&&!l.dom.getAttrib(r,"name")){q.add({title:"advanced.link_desc",icon:"link",cmd:l.plugins.advlink?"mceAdvLink":"mceLink",ui:true});q.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"});q.addSeparator()}if(r.nodeName=="IMG"&&r.className.indexOf("mceItem")==-1){q.add({title:"advanced.image_desc",icon:"image",cmd:l.plugins.advimage?"mceAdvImage":"mceImage",ui:true});q.addSeparator()}q.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}});q.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"});q.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"});q.addSeparator();v=q.addMenu({title:"table.cell"});v.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"});v.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"});v.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"});v=q.addMenu({title:"table.row"});v.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"});v.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"});v.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"});v.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"});v.addSeparator();v.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"});v.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"});v.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!j);v.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!j);v=q.addMenu({title:"table.col"});v.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"});v.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"});v.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})}else{q.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})}})}if(!b.isIE){function n(){var q;for(q=l.getBody().lastChild;q&&q.nodeType==3&&!q.nodeValue.length;q=q.previousSibling){}if(q&&q.nodeName=="TABLE"){l.dom.add(l.getBody(),"p",null,'<br mce_bogus="1" />')}}if(b.isGecko){l.onKeyDown.add(function(r,t){var q,s,u=r.dom;if(t.keyCode==37||t.keyCode==38){q=r.selection.getRng();s=u.getParent(q.startContainer,"table");if(s&&r.getBody().firstChild==s){if(isAtStart(q,s)){q=u.createRng();q.setStartBefore(s);q.setEndBefore(s);r.selection.setRng(q);t.preventDefault()}}}})}l.onKeyUp.add(n);l.onSetContent.add(n);l.onVisualAid.add(n);l.onPreProcess.add(function(q,s){var r=s.node.lastChild;if(r&&r.childNodes.length==1&&r.firstChild.nodeName=="BR"){q.dom.remove(r)}});n()}});c({mceTableSplitCells:function(k){k.split()},mceTableMergeCells:function(l){var m,n,k;k=e.dom.getParent(e.selection.getNode(),"th,td");if(k){m=k.rowSpan;n=k.colSpan}if(!e.dom.select("td.mceSelected,th.mceSelected").length){d.open({url:f+"/merge_cells.htm",width:240+parseInt(e.getLang("table.merge_cells_delta_width",0)),height:110+parseInt(e.getLang("table.merge_cells_delta_height",0)),inline:1},{rows:m,cols:n,onaction:function(o){l.merge(k,o.cols,o.rows)},plugin_url:f})}else{l.merge()}},mceTableInsertRowBefore:function(k){k.insertRow(true)},mceTableInsertRowAfter:function(k){k.insertRow()},mceTableInsertColBefore:function(k){k.insertCol(true)},mceTableInsertColAfter:function(k){k.insertCol()},mceTableDeleteCol:function(k){k.deleteCols()},mceTableDeleteRow:function(k){k.deleteRows()},mceTableCutRow:function(k){j=k.cutRows()},mceTableCopyRow:function(k){j=k.copyRows()},mceTablePasteRowBefore:function(k){k.pasteRows(j,true)},mceTablePasteRowAfter:function(k){k.pasteRows(j)},mceTableDelete:function(k){k.deleteTable()}},function(l,k){e.addCommand(k,function(){var m=h();if(m){l(m);e.execCommand("mceRepaint");g()}})});c({mceInsertTable:function(k){d.open({url:f+"/table.htm",width:400+parseInt(e.getLang("table.table_delta_width",0)),height:320+parseInt(e.getLang("table.table_delta_height",0)),inline:1},{plugin_url:f,action:k?k.action:0})},mceTableRowProps:function(){d.open({url:f+"/row.htm",width:400+parseInt(e.getLang("table.rowprops_delta_width",0)),height:295+parseInt(e.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:f})},mceTableCellProps:function(){d.open({url:f+"/cell.htm",width:400+parseInt(e.getLang("table.cellprops_delta_width",0)),height:295+parseInt(e.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:f})}},function(l,k){e.addCommand(k,function(m,n){l(n)})})}});b.PluginManager.add("table",b.plugins.TablePlugin)})(tinymce);
function loaded(url) {
    tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(url));
}loaded('langs/en.js');loaded('langs/en_dlg.js');loaded('themes/advanced/editor_template.js');loaded('themes/advanced/langs/en.js');loaded('themes/advanced/langs/en_dlg.js');loaded('plugins/codeblock/editor_plugin.js');loaded('plugins/codeblock/langs/en.js');loaded('plugins/inlinepopups/editor_plugin.js');loaded('plugins/paste/editor_plugin.js');loaded('plugins/paste/lang/en_dlg.js');loaded('plugins/table/editor_plugin.js');loaded('plugins/table/lang/en_dlg.js');